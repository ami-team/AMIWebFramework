<?xml version="1.0"?>

<project name="AMIWebApp" default="compile_prod">

	<path id="execute-classpath">
		<fileset dir="." />
	</path>

	<target name="compile_prod" description="Compile the project (prod mode).">

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="css/AMI/AMIWebApp.css" />
			<arg value="-o" />
			<arg value="css/AMI/AMIWebApp.min.css" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/AMIWebApp.js" />
			<arg value="-o" />
			<arg value="js/AMI/AMIWebApp.min.js" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/AMIObjects.js" />
			<arg value="-o" />
			<arg value="js/AMI/AMIObjects.min.js" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/AMICommand.js" />
			<arg value="-o" />
			<arg value="js/AMI/AMICommand.min.js" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/AMILogin.js" />
			<arg value="-o" />
			<arg value="js/AMI/AMILogin.min.js" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/AMITokenizer.js" />
			<arg value="-o" />
			<arg value="js/AMI/AMITokenizer.min.js" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/twig/AMITwigExprCompiler.js" />
			<arg value="-o" />
			<arg value="js/AMI/twig/AMITwigExprCompiler.min.js" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/twig/AMITwigExprInterpreter.js" />
			<arg value="-o" />
			<arg value="js/AMI/twig/AMITwigExprInterpreter.min.js" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/twig/AMITwigStdLib.js" />
			<arg value="-o" />
			<arg value="js/AMI/twig/AMITwigStdLib.min.js" />
		</java>

		<java classname="com.yahoo.platform.yui.compressor.YUICompressor" failonerror="true" fork="true">
			<classpath refid="execute-classpath" />
			<arg value="js/AMI/twig/AMITwig.js" />
			<arg value="-o" />
			<arg value="js/AMI/twig/AMITwig.min.js" />
		</java>

	</target>

	<target name="compile_debug" description="Compile the project (debug mode).">

		<copy file="css/AMI/AMIWebApp.css" tofile="css/AMI/AMIWebApp.min.css" overwrite="true" force="true" />
		<copy file="js/AMI/AMIWebApp.js" tofile="js/AMI/AMIWebApp.min.js" overwrite="true" force="true" />
		<copy file="js/AMI/AMIObjects.js" tofile="js/AMI/AMIObjects.min.js" overwrite="true" force="true" />
		<copy file="js/AMI/AMICommand.js" tofile="js/AMI/AMICommand.min.js" overwrite="true" force="true" />
		<copy file="js/AMI/AMILogin.js" tofile="js/AMI/AMILogin.min.js" overwrite="true" force="true" />
		<copy file="js/AMI/AMITokenizer.js" tofile="js/AMI/AMITokenizer.min.js" overwrite="true" force="true" />
		<copy file="js/AMI/twig/AMITwigExprCompiler.js" tofile="js/AMI/twig/AMITwigExprCompiler.min.js" overwrite="true" force="true" />
		<copy file="js/AMI/twig/AMITwigExprInterpreter.js" tofile="js/AMI/twig/AMITwigExprInterpreter.min.js" overwrite="true" force="true" />
		<copy file="js/AMI/twig/AMITwigStdLib.js" tofile="js/AMI/twig/AMITwigStdLib.min.js" overwrite="true" force="true" />
		<copy file="js/AMI/twig/AMITwig.js" tofile="js/AMI/twig/AMITwig.min.js" overwrite="true" force="true" />

	</target>

	<target name="clean" description="Clean the project.">

		<delete file="css/AMI/AMIWebApp.min.css" />
		<delete file="js/AMI/AMIWebApp.min.js" />
		<delete file="js/AMI/AMICommand.min.js" />
		<delete file="js/AMI/AMILogin.min.js" />
		<delete file="js/AMI/AMITokenizer.min.js" />
		<delete file="js/AMI/twig/AMITwigExprCompiler.min.js" />
		<delete file="js/AMI/twig/AMITwigExprInterpreter.min.js" />
		<delete file="js/AMI/twig/AMITwigStdLib.min.js" />
		<delete file="js/AMI/twig/AMITwig.min.js" />

	</target>

	<target name="doc" description="Generate doc.">

		<!-- npm install -g jsdoc -->
		<!-- http://usejsdoc.org/ -->

		<exec executable="bash">
			<env key="PATH" value="/usr/local/bin:/usr/bin" />
			<arg value="-c" />
			<arg value="jsdoc --template tools/jsdoc -d console js/AMI/AMIWebApp.js js/AMI/AMICommand.js js/AMI/AMILogin.js js/AMI/AMITokenizer.js js/AMI/AMITwigExprCompiler.js js/AMI/AMITwigExprInterpreter.js > js/AMI/api.min.json" />
		</exec>

	</target>

</project>
