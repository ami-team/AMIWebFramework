<script type="text/javascript" src="{{ORIGIN_URL}}/js/ami.min.js?embedded"></script>

<script type="text/javascript">

	var myElementInfo;

	amiWebApp.onRefresh = function(isAuth) {

		if(isAuth)
		{
			myElementInfo.render('#myElementInfo', '{{catalog|e('js')}}', '{{entity|e('js')}}', '{{primaryFieldName|e('js')}}', '{{primaryFieldValue|e('js')}}', {
				expandedLinkedElements: [{{expandedLinkedElements|join(', ')|e}}],
				enableCache: {{enableCache}},
				enableCount: {{enableCount}},
				hideBigContent: {{hideBigContent}},
				showPrimaryField: {{showPrimaryField}},
				showToolBar: {{showToolBar}},
				showDetails: {{showDetails}},
				showTools: {{showTools}},
				canEdit: {{canEdit}},
				maxCellLength: {{maxCellLength}},
				card: {{card}},
			});
		}
		else
		{
			$('#myElementInfo').empty();
		}
	};

	amiWebApp.onReady = function() {

		return amiWebApp.loadResources(['ctrl:elementInfo']).done(function(ctrls) {

			myElementInfo = new ctrls[0];
		});
	};

	amiWebApp.start({
		endpoint_url: '{{endpoint}}'
	});

</script>

<div id="myElementInfo"></div>