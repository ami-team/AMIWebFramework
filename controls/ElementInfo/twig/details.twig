<table>
	<tr>
		<td class="align-top">
			<div class="card">
				<div class="card-header text-center" style="font-family: 'Open Sans Light'; font-size: 14pt; padding: 3px;">
					Metadata
				</div>
				<div class="card-body p-0">
					<table class="table table-sm table-striped table-bordered mb-0">
						{% if elementRowset is not empty %}
						{%   for row in elementRowset %}
						{%     for field in row.field %}
						{%       if (showEmptyFields or (field.$ is not empty and field.$ != 'N/A' and field.$ is defined)) and (field['@name'] !== 'PROJECT' and field['@name'] !== 'PROCESS' and field['@name'] !== 'AMIENTITYNAME' and field['@name'] !== 'AMIELEMENTID' and field['@name'] !== 'AMICREATED' and field['@name'] !== 'AMILASTMODIFIED' and field['@name'] !== 'AMISYSDATE') %}
						<tr>
							<td class="text-left">
								<strong>{{field['@name']|e}}</strong>
							</td>
							<td class="text-center">
								{{field.$|e}}
								{% if field['link'] is defined %}
								<br />{% for link in field['link'] %}{% if not loop.first %} - {% endif %}<a href="{{link['@href']|e}}" target="_blank">{{link['@label']|e}}</a>{% endfor %}</td>
								{% endif %}
							</td>
						</tr>
						{%       endif %}
						{%     endfor %}
						{%   endfor %}
						{% else %}
						<tr>
							<td class="text-center text-warning">empty element</td>
						</tr>
						{% endif %}
					</table>
				</div>
			</div>
		</td>
		<td>&nbsp</td>
		<td class="align-top">
			<div class="card">
				<div class="card-header text-center" style="font-family: 'Open Sans Light'; font-size: 14pt; padding: 3px;">
					Linked Entities
				</div>
				<div class="card-body p-0" id="B8275C83_776D_57AC_5379_70DC7391AD5A">
					<table class="table table-sm table-striped table-bordered mb-0">
						{% if linkedElementRowset is not empty %}
						{%   for row in linkedElementRowset %}
						<tr>
							<td class="text-center">
								<a href="#" data-action="linked_element" data-catalog="{{row|json_jspath('..field{.@name==="catalog"}.$')[0]|e}}" data-entity="{{row|json_jspath('..field{.@name==="entity"}.$')[0]|e}}" data-mql="{{row|json_jspath('..field{.@name==="mql"}.$')[0]|e}}">{{row|json_jspath('..field{.@name==="entity"}.$')[0]|e}} <span class="text-muted">{ {{row|json_jspath('..field{.@name==="constraint"}.$')[0]|e}} }</span></a>
							</td>
							<td class="text-center">
								{{row|json_jspath('..field{.@name==="count"}.$')[0]|e}} records
							</td>
						</tr>
						{%   endfor %}
						{% else %}
						<tr>
							<td class="text-center">no linked element</td>
						</tr>
						{% endif %}
					</table>
				</div>
			</div>
			{% if expandedLinkedElements is not empty %}
			{%   for expandedLinkedElement in expandedLinkedElements %}
					<div class="card mt-1">
						<div class="card-header text-center" style="font-family: 'Open Sans Light'; font-size: 14pt; padding: 3px;">
							{{ expandedLinkedElement.entity }}
						</div>
					</div>
					<div class="card-body p-0">
						<table class="table table-sm table-striped table-bordered mb-0">
							{% if expandedLinkedElement.keyValMode === true %}
							{%   for row in expandedLinkedElement.rows %}
							<tr>
								{% for field in expandedLinkedElement.fields %}
								<td class="text-center">{{row|json_jspath('..field{.@name==="' + field + '"}.$')[0]|e}}</td>
								{% endfor %}
							</tr>
							{%   endfor %}
							{% else %}
							{%   for row in expandedLinkedElement.rows %}
							{%     for field in row.fields %}
							<tr>
								<td class="text-center">{{field|e}}</td>
								<td class="text-center">{{row|json_jspath('..field{.@name==="' + field + '"}.$')[0]|e}}</td>
							</tr>
							{%     endfor %}
							{%   endfor %}
							{% endif %}
						</table>
					</div>
			{%   endfor %}
			{% endif %}
		</td>
	</tr>
</table>