/*!
* AMI Web Framework
*
* Copyright (c) 2014-XXXX The AMI Team / LPSC / IN2P3
*
* This file must be used under the terms of the CeCILL-C:
* http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
* http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
*
*/

/*-------------------------------------------------------------------------*/
$AMIClass('ElementInfoCtrl', {
  /*---------------------------------------------------------------------*/
  $extends: ami.Control,

  /*---------------------------------------------------------------------*/
  $init: function $init(parent, owner) {
    this.$super.$init(parent, owner);
  },

  /*---------------------------------------------------------------------*/
  onReady: function onReady() {
    var _this = this;

    return amiWebApp.loadResources([amiWebApp.originURL + '/controls/ElementInfo/twig/ElementInfoCtrl.twig', amiWebApp.originURL + '/controls/ElementInfo/twig/details.twig', amiWebApp.originURL + '/controls/ElementInfo/twig/js.twig',
    /**/
    'ctrl:fieldEditor', 'ctrl:unitEditor', 'ctrl:tab']).done(function (data) {
      _this.fragmentElementInfoCtrl = data[0];
      _this.fragmentDetails = data[1];
      _this.fragmentJS = data[2];
      _this.fieldEditorCtor = data[3];
      _this.fieldUnitCtor = data[4];
      _this.tabCtor = data[5];
    });
  },

  /*---------------------------------------------------------------------*/
  render: function render(selector, catalog, entity, primaryFieldName, primaryFieldValue, settings) {
    var result = $.Deferred();
    /*-----------------------------------------------------------------*/

    this.ctx = {
      catalog: catalog,
      entity: entity,
      primaryFieldName: primaryFieldName,
      primaryFieldValue: primaryFieldValue
    };

    var fn = function fn(catalog, entity, primaryFieldName, primaryFieldValue) {
      return 'GetElementInfo -catalog="' + amiWebApp.textToString(catalog) + '" -entity="' + amiWebApp.textToString(entity) + '" -primaryFieldName="' + amiWebApp.textToString(primaryFieldName) + '" -primaryFieldValue="' + amiWebApp.textToString(primaryFieldValue) + '"';
    };

    var _amiWebApp$setup = amiWebApp.setup(['context', 'elementInfoCommandFunc', 'expandedLinkedElements', 'enableCache', 'showToolBar', 'showDetails', 'showTools', 'canEdit', 'start', 'stop', 'maxCellLength', 'card'], [result, fn, [], false, true, false, true, false, 1, 10, 64, false], settings),
        context = _amiWebApp$setup[0],
        elementInfoCommandFunc = _amiWebApp$setup[1],
        expandedLinkedElements = _amiWebApp$setup[2],
        enableCache = _amiWebApp$setup[3],
        showToolBar = _amiWebApp$setup[4],
        showDetails = _amiWebApp$setup[5],
        showTools = _amiWebApp$setup[6],
        canEdit = _amiWebApp$setup[7],
        start = _amiWebApp$setup[8],
        stop = _amiWebApp$setup[9],
        maxCellLength = _amiWebApp$setup[10],
        card = _amiWebApp$setup[11];

    this.ctx.elementInfoCommandFunc = elementInfoCommandFunc;
    this.ctx.expandedLinkedElements = expandedLinkedElements;
    this.ctx.enableCache = enableCache;
    this.ctx.showToolBar = showToolBar;
    this.ctx.showDetails = showDetails;
    this.ctx.showTools = showTools;
    this.ctx.canEdit = canEdit;
    this.ctx.start = start;
    this.ctx.stop = stop;
    this.ctx.maxCellLength = maxCellLength;
    this.ctx.card = card;
    /*-----------------------------------------------------------------*/

    var L = [];
    this.ctx.expandedLinkedElements.forEach(function (expandedLinkedElement) {
      var catalog = expandedLinkedElement.catalog;
      var entity = expandedLinkedElement.entity;
      L.push(catalog + '.' + entity);
    });
    this.ctx.command += ' -expandedLinkedElements="' + L.join(',') + '"';
    /*-----------------------------------------------------------------*/

    this.fieldEditor = new this.fieldEditorCtor(this, this);
    this.unitEditor = new this.fieldUnitCtor(this, this);
    /*-----------------------------------------------------------------*/

    this._render(result, selector);
    /*-----------------------------------------------------------------*/


    return result;
  },

  /*---------------------------------------------------------------------*/
  _render: function _render(result, selector) {
    var _this2 = this;

    if (this.getParent().$name !== 'TabCtrl') {
      var tab = new this.tabCtor(null, this);
      tab.render(selector, this.ctx).done(function () {
        tab.appendItem('<i class="fa fa-arrows-alt"></i> ' + _this2.ctx.entity, {
          closable: false,
          firstVisible: false
        }).done(function (selector) {
          _this2.setParent(tab);

          _this2.__render(result, selector);
        });
      });
    } else {
      this.__render(result, selector);
    }
  },

  /*---------------------------------------------------------------------*/
  __render: function __render(result, selector) {
    var _this3 = this;

    /*-----------------------------------------------------------------*/
    this.replaceHTML(selector, this.fragmentElementInfoCtrl, {
      dict: this.ctx
    }).done(function () {
      /*-------------------------------------------------------------*/
      $(_this3.patchId('#ACFEDF15_7894_6D91_CBE7_D98B5F7E9C6A')).click(function () {
        amiWebApp.lock();

        _this3.refresh().done(function () {
          amiWebApp.unlock();
        }).fail(function (message) {
          amiWebApp.error(message, true);
        });
      });
      $(_this3.patchId('#D98B6B9A_1D5A_021E_5F90_2B55A6C3BE73')).change(function () {
        amiWebApp.lock();

        _this3.refresh().done(function () {
          amiWebApp.unlock();
        }).fail(function (message) {
          amiWebApp.error(message, true);
        });
      });
      /*-------------------------------------------------------------*/

      $(_this3.patchId('#AB84A8CC_5E70_EBE7_8766_317FEE71EFE8')).change(function () {
        _this3.setMode();
      });
      /*-------------------------------------------------------------*/

      $(_this3.patchId('#BF7E7885_DB34_7993_9F17_37990DDD4BF3')).click(function () {
        amiWebApp.createControl(_this3.getParent(), _this3, 'messageBox', [_this3.ctx.command], {});
      });
      $(_this3.patchId('#F1232710_45E2_92BF_7378_1BCD05FBF131')).click(function () {
        amiWebApp.createControl(_this3.getParent(), _this3, 'textBox', [_this3.ctx.js], {});
      });
      /*-------------------------------------------------------------*/

      _this3.ctx.js = amiWebApp.formatTWIG(_this3.fragmentJS, _this3.ctx);
      /*-------------------------------------------------------------*/

      _this3.refresh().done(function (elementRowset, linkedElementRowset, expandedLinkedElements) {
        result.resolveWith(_this3.ctx.context, [elementRowset, linkedElementRowset, expandedLinkedElements]);
      }).fail(function (message) {
        result.rejectWith(_this3.ctx.context, [message]);
      });
      /*-------------------------------------------------------------*/

    });
  },

  /*---------------------------------------------------------------------*/
  refresh: function refresh(settings) {
    var _this4 = this;

    var result = $.Deferred();
    /*-----------------------------------------------------------------*/

    var _amiWebApp$setup2 = amiWebApp.setup(['context'], [result], settings),
        context = _amiWebApp$setup2[0];
    /*-----------------------------------------------------------------*/


    this.ctx.command = this.ctx.elementInfoCommandFunc(this.ctx.catalog, this.ctx.entity, this.ctx.primaryFieldName, this.ctx.primaryFieldValue);
    /*-----------------------------------------------------------------*/

    amiCommand.execute(this.ctx.command).done(function (data) {
      /*-------------------------------------------------------------*/
      var fieldDescriptions = amiWebApp.jspath('..fieldDescription', data);
      /*-------------------------------------------------------------*/

      var elementRowset = amiWebApp.jspath('..rowset{.@type==="element" || .@type==="Element_Info"}.row', data);
      /* BERK */

      var linkedElementRowset = amiWebApp.jspath('..rowset{.@type==="linked_elements" || .@type==="Element_Child"}.row', data);
      /* BERK */

      /*-------------------------------------------------------------*/

      var expandedLinkedElements = [];

      _this4.ctx.expandedLinkedElements.forEach(function (expandedLinkedElement) {
        expandedLinkedElements.push({
          catalog: expandedLinkedElement.catalog,
          entity: expandedLinkedElement.entity,
          fields: expandedLinkedElement.fields,
          keyValMode: expandedLinkedElement.keyValMode,
          rows: amiWebApp.jspath('..rowset{.@type==="' + expandedLinkedElement.entity + '"}.row', data)
        });
      });
      /*-------------------------------------------------------------*/


      var dict = {
        catalog: _this4.ctx.catalog,
        entity: _this4.ctx.entity,

        /**/
        fieldDescriptions: fieldDescriptions,

        /**/
        elementRowset: elementRowset,
        linkedElementRowset: linkedElementRowset,
        expandedLinkedElements: expandedLinkedElements,

        /**/
        showToolBar: _this4.ctx.showToolBar,
        primaryFieldName: _this4.ctx.primaryFieldName,
        primaryFieldValue: _this4.ctx.primaryFieldValue,

        /**/
        showEmptyFields: $(_this4.patchId('#D98B6B9A_1D5A_021E_5F90_2B55A6C3BE73')).prop('checked'),

        /**/
        maxCellLength: _this4.ctx.maxCellLength
      };
      /*-------------------------------------------------------------*/

      _this4.replaceHTML(_this4.patchId('#BBD391C7_759D_01DD_E234_488D46504638'), _this4.fragmentDetails, {
        dict: dict
      }).done(function () {
        /*---------------------------------------------------------*/
        _this4.fieldEditor.setup(_this4.patchId('#BBD391C7_759D_01DD_E234_488D46504638'), _this4.ctx);

        _this4.unitEditor.setup(_this4.patchId('#BBD391C7_759D_01DD_E234_488D46504638'));
        /*---------------------------------------------------------*/


        $(_this4.patchId('#BBD391C7_759D_01DD_E234_488D46504638')).find('[data-ctrl]').click(function (e) {
          e.preventDefault();

          _this4.createControlFromWebLink(_this4.getParent(), e.currentTarget, _this4.ctx);
        });
        /*---------------------------------------------------------*/

        result.resolveWith(context, [elementRowset, linkedElementRowset, expandedLinkedElements]);
      });
      /*-------------------------------------------------------------*/

    }).fail(function (data, message) {
      result.rejectWith(context, [message]);
    });
    /*-----------------------------------------------------------------*/

    return result;
  },

  /*---------------------------------------------------------------------*/
  isInEditMode: function isInEditMode() {
    return this.fieldEditor.isInEditMode();
  },

  /*---------------------------------------------------------------------*/
  setMode: function setMode() {
    var tags1 = $(this.patchId('#BBD391C7_759D_01DD_E234_488D46504638'));
    var tags2 = tags1.find('.view-more');
    var tags3 = tags1.find('.view-media');

    if ($(this.patchId('#AB84A8CC_5E70_EBE7_8766_317FEE71EFE8')).prop('checked')) {
      tags2.hide();
      tags3.hide();
      this.fieldEditor.setInEditMode(true);
      this.unitEditor.setInEditMode(true);
    } else {
      tags2.show();
      tags3.show();
      this.fieldEditor.setInEditMode(false);
      this.unitEditor.setInEditMode(false);
    }
  }
  /*---------------------------------------------------------------------*/

});
/*-------------------------------------------------------------------------*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVsZW1lbnRJbmZvQ3RybC5lczYuanMiXSwibmFtZXMiOlsiJEFNSUNsYXNzIiwiJGV4dGVuZHMiLCJhbWkiLCJDb250cm9sIiwiJGluaXQiLCJwYXJlbnQiLCJvd25lciIsIiRzdXBlciIsIm9uUmVhZHkiLCJhbWlXZWJBcHAiLCJsb2FkUmVzb3VyY2VzIiwib3JpZ2luVVJMIiwiZG9uZSIsImRhdGEiLCJmcmFnbWVudEVsZW1lbnRJbmZvQ3RybCIsImZyYWdtZW50RGV0YWlscyIsImZyYWdtZW50SlMiLCJmaWVsZEVkaXRvckN0b3IiLCJmaWVsZFVuaXRDdG9yIiwidGFiQ3RvciIsInJlbmRlciIsInNlbGVjdG9yIiwiY2F0YWxvZyIsImVudGl0eSIsInByaW1hcnlGaWVsZE5hbWUiLCJwcmltYXJ5RmllbGRWYWx1ZSIsInNldHRpbmdzIiwicmVzdWx0IiwiJCIsIkRlZmVycmVkIiwiY3R4IiwiZm4iLCJ0ZXh0VG9TdHJpbmciLCJzZXR1cCIsImNvbnRleHQiLCJlbGVtZW50SW5mb0NvbW1hbmRGdW5jIiwiZXhwYW5kZWRMaW5rZWRFbGVtZW50cyIsImVuYWJsZUNhY2hlIiwic2hvd1Rvb2xCYXIiLCJzaG93RGV0YWlscyIsInNob3dUb29scyIsImNhbkVkaXQiLCJzdGFydCIsInN0b3AiLCJtYXhDZWxsTGVuZ3RoIiwiY2FyZCIsIkwiLCJmb3JFYWNoIiwiZXhwYW5kZWRMaW5rZWRFbGVtZW50IiwicHVzaCIsImNvbW1hbmQiLCJqb2luIiwiZmllbGRFZGl0b3IiLCJ1bml0RWRpdG9yIiwiX3JlbmRlciIsImdldFBhcmVudCIsIiRuYW1lIiwidGFiIiwiYXBwZW5kSXRlbSIsImNsb3NhYmxlIiwiZmlyc3RWaXNpYmxlIiwic2V0UGFyZW50IiwiX19yZW5kZXIiLCJyZXBsYWNlSFRNTCIsImRpY3QiLCJwYXRjaElkIiwiY2xpY2siLCJsb2NrIiwicmVmcmVzaCIsInVubG9jayIsImZhaWwiLCJtZXNzYWdlIiwiZXJyb3IiLCJjaGFuZ2UiLCJzZXRNb2RlIiwiY3JlYXRlQ29udHJvbCIsImpzIiwiZm9ybWF0VFdJRyIsImVsZW1lbnRSb3dzZXQiLCJsaW5rZWRFbGVtZW50Um93c2V0IiwicmVzb2x2ZVdpdGgiLCJyZWplY3RXaXRoIiwiYW1pQ29tbWFuZCIsImV4ZWN1dGUiLCJmaWVsZERlc2NyaXB0aW9ucyIsImpzcGF0aCIsImZpZWxkcyIsImtleVZhbE1vZGUiLCJyb3dzIiwic2hvd0VtcHR5RmllbGRzIiwicHJvcCIsImZpbmQiLCJlIiwicHJldmVudERlZmF1bHQiLCJjcmVhdGVDb250cm9sRnJvbVdlYkxpbmsiLCJjdXJyZW50VGFyZ2V0IiwiaXNJbkVkaXRNb2RlIiwidGFnczEiLCJ0YWdzMiIsInRhZ3MzIiwiaGlkZSIsInNldEluRWRpdE1vZGUiLCJzaG93Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7QUFXQTtBQUVBQSxTQUFTLENBQUMsaUJBQUQsRUFBb0I7QUFDNUI7QUFFQUMsRUFBQUEsUUFBUSxFQUFFQyxHQUFHLENBQUNDLE9BSGM7O0FBSzVCO0FBRUFDLEVBQUFBLEtBQUssRUFBRSxlQUFTQyxNQUFULEVBQWlCQyxLQUFqQixFQUNQO0FBQ0MsU0FBS0MsTUFBTCxDQUFZSCxLQUFaLENBQWtCQyxNQUFsQixFQUEwQkMsS0FBMUI7QUFDQSxHQVYyQjs7QUFZNUI7QUFFQUUsRUFBQUEsT0FBTyxFQUFFLG1CQUNUO0FBQUE7O0FBQ0MsV0FBT0MsU0FBUyxDQUFDQyxhQUFWLENBQXdCLENBQzlCRCxTQUFTLENBQUNFLFNBQVYsR0FBc0IsaURBRFEsRUFFOUJGLFNBQVMsQ0FBQ0UsU0FBVixHQUFzQix5Q0FGUSxFQUc5QkYsU0FBUyxDQUFDRSxTQUFWLEdBQXNCLG9DQUhRO0FBSTlCO0FBQ0Esc0JBTDhCLEVBTTlCLGlCQU44QixFQU85QixVQVA4QixDQUF4QixFQVFKQyxJQVJJLENBUUMsVUFBQ0MsSUFBRCxFQUFVO0FBRWpCLE1BQUEsS0FBSSxDQUFDQyx1QkFBTCxHQUErQkQsSUFBSSxDQUFDLENBQUQsQ0FBbkM7QUFDQSxNQUFB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QUFYLENBQWQ7O0FBRUEsUUFBRy9ELENBQUMsQ0FBQyxLQUFLcUMsT0FBTCxDQUFhLHVDQUFiLENBQUQsQ0FBRCxDQUF5RHlCLElBQXpELENBQThELFNBQTlELENBQUgsRUFDQTtBQUNDUSxNQUFBQSxLQUFLLENBQUNFLElBQU47QUFDQUQsTUFBQUEsS0FBSyxDQUFDQyxJQUFOO0FBRUEsV0FBS2hELFdBQUwsQ0FBaUJpRCxhQUFqQixDQUErQixJQUEvQjtBQUNBLFdBQUtoRCxVQUFMLENBQWdCZ0QsYUFBaEIsQ0FBOEIsSUFBOUI7QUFDQSxLQVBELE1BU0E7QUFDQ0gsTUFBQUEsS0FBSyxDQUFDSSxJQUFOO0FBQ0FILE1BQUFBLEtBQUssQ0FBQ0csSUFBTjtBQUVBLFdBQUtsRCxXQUFMLENBQWlCaUQsYUFBakIsQ0FBK0IsS0FBL0I7QUFDQSxXQUFLaEQsVUFBTCxDQUFnQmdELGFBQWhCLENBQThCLEtBQTlCO0FBQ0E7QUFDRDtBQUVEOztBQTFXNEIsQ0FBcEIsQ0FBVDtBQTZXQSIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuKiBBTUkgV2ViIEZyYW1ld29ya1xuKlxuKiBDb3B5cmlnaHQgKGMpIDIwMTQtWFhYWCBUaGUgQU1JIFRlYW0gLyBMUFNDIC8gSU4yUDNcbipcbiogVGhpcyBmaWxlIG11c3QgYmUgdXNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIENlQ0lMTC1DOlxuKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZW4uaHRtbFxuKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZnIuaHRtbFxuKlxuKi9cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuJEFNSUNsYXNzKCdFbGVtZW50SW5mb0N0cmwnLCB7XG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQkZXh0ZW5kczogYW1pLkNvbnRyb2wsXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdCRpbml0OiBmdW5jdGlvbihwYXJlbnQsIG93bmVyKVxuXHR7XG5cdFx0dGhpcy4kc3VwZXIuJGluaXQocGFyZW50LCBvd25lcik7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdG9uUmVhZHk6IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiBhbWlXZWJBcHAubG9hZFJlc291cmNlcyhbXG5cdFx0XHRhbWlXZWJBcHAub3JpZ2luVVJMICsgJy9jb250cm9scy9FbGVtZW50SW5mby90d2lnL0VsZW1lbnRJbmZvQ3RybC50d2lnJyxcblx0XHRcdGFtaVdlYkFwcC5vcmlnaW5VUkwgKyAnL2NvbnRyb2xzL0VsZW1lbnRJbmZvL3R3aWcvZGV0YWlscy50d2lnJyxcblx0XHRcdGFtaVdlYkFwcC5vcmlnaW5VUkwgKyAnL2NvbnRyb2xzL0VsZW1lbnRJbmZvL3R3aWcvanMudHdpZycsXG5cdFx0XHQvKiovXG5cdFx0XHQnY3RybDpmaWVsZEVkaXRvcicsXG5cdFx0XHQnY3RybDp1bml0RWRpdG9yJyxcblx0XHRcdCdjdHJsOnRhYicsXG5cdFx0XSkuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHR0aGlzLmZyYWdtZW50RWxlbWVudEluZm9DdHJsID0gZGF0YVswXTtcblx0XHRcdHRoaXMuZnJhZ21lbnREZXRhaWxzID0gZGF0YVsxXTtcblx0XHRcdHRoaXMuZnJhZ21lbnRKUyA9IGRhdGFbMl07XG5cblx0XHRcdHRoaXMuZmllbGRFZGl0b3JDdG9yID0gZGF0YVszXTtcblx0XHRcdHRoaXMuZmllbGRVbml0Q3RvciA9IGRhdGFbNF07XG5cdFx0XHR0aGlzLnRhYkN0b3IgPSBkYXRhWzVdO1xuXHRcdH0pO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRyZW5kZXI6IGZ1bmN0aW9uKHNlbGVjdG9yLCBjYXRhbG9nLCBlbnRpdHksIHByaW1hcnlGaWVsZE5hbWUsIHByaW1hcnlGaWVsZFZhbHVlLCBzZXR0aW5ncylcblx0e1xuXHRcdGNvbnN0IHJlc3VsdCA9ICQuRGVmZXJyZWQoKTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0dGhpcy5jdHggPSB7XG5cdFx0XHRjYXRhbG9nOiBjYXRhbG9nLFxuXHRcdFx0ZW50aXR5OiBlbnRpdHksXG5cdFx0XHRwcmltYXJ5RmllbGROYW1lOiBwcmltYXJ5RmllbGROYW1lLFxuXHRcdFx0cHJpbWFyeUZpZWxkVmFsdWU6IHByaW1hcnlGaWVsZFZhbHVlLFxuXHRcdH07XG5cblx0XHRjb25zdCBmbiA9IChjYXRhbG9nLCBlbnRpdHksIHByaW1hcnlGaWVsZE5hbWUsIHByaW1hcnlGaWVsZFZhbHVlKSA9PiAnR2V0RWxlbWVudEluZm8gLWNhdGFsb2c9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhjYXRhbG9nKSArICdcIiAtZW50aXR5PVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoZW50aXR5KSArICdcIiAtcHJpbWFyeUZpZWxkTmFtZT1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKHByaW1hcnlGaWVsZE5hbWUpICsgJ1wiIC1wcmltYXJ5RmllbGRWYWx1ZT1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKHByaW1hcnlGaWVsZFZhbHVlKSArICdcIic7XG5cblx0XHRjb25zdCBbXG5cdFx0XHRjb250ZXh0LFxuXHRcdFx0ZWxlbWVudEluZm9Db21tYW5kRnVuYyxcblx0XHRcdGV4cGFuZGVkTGlua2VkRWxlbWVudHMsXG5cdFx0XHRlbmFibGVDYWNoZSwgc2hvd1Rvb2xCYXIsIHNob3dEZXRhaWxzLCBzaG93VG9vbHMsIGNhbkVkaXQsXG5cdFx0XHRzdGFydCwgc3RvcCxcblx0XHRcdG1heENlbGxMZW5ndGgsXG5cdFx0XHRjYXJkXG5cdFx0XSA9IGFtaVdlYkFwcC5zZXR1cChcblx0XHRcdFtcblx0XHRcdFx0J2NvbnRleHQnLFxuXHRcdFx0XHQnZWxlbWVudEluZm9Db21tYW5kRnVuYycsXG5cdFx0XHRcdCdleHBhbmRlZExpbmtlZEVsZW1lbnRzJyxcblx0XHRcdFx0J2VuYWJsZUNhY2hlJywgJ3Nob3dUb29sQmFyJywgJ3Nob3dEZXRhaWxzJywgJ3Nob3dUb29scycsICdjYW5FZGl0Jyxcblx0XHRcdFx0J3N0YXJ0JywgJ3N0b3AnLFxuXHRcdFx0XHQnbWF4Q2VsbExlbmd0aCcsXG5cdFx0XHRcdCdjYXJkJyxcblx0XHRcdF0sXG5cdFx0XHRbXG5cdFx0XHRcdHJlc3VsdCxcblx0XHRcdFx0Zm4sXG5cdFx0XHRcdFtdLFxuXHRcdFx0XHRmYWxzZSwgdHJ1ZSwgZmFsc2UsIHRydWUsIGZhbHNlLFxuXHRcdFx0XHQxLCAxMCxcblx0XHRcdFx0NjQsXG5cdFx0XHRcdGZhbHNlLFxuXHRcdFx0XSxcblx0XHRcdHNldHRpbmdzXG5cdFx0KTtcblxuXHRcdHRoaXMuY3R4LmVsZW1lbnRJbmZvQ29tbWFuZEZ1bmMgPSBlbGVtZW50SW5mb0NvbW1hbmRGdW5jO1xuXG5cdFx0dGhpcy5jdHguZXhwYW5kZWRMaW5rZWRFbGVtZW50cyA9IGV4cGFuZGVkTGlua2VkRWxlbWVudHM7XG5cblx0XHR0aGlzLmN0eC5lbmFibGVDYWNoZSA9IGVuYWJsZUNhY2hlO1xuXHRcdHRoaXMuY3R4LnNob3dUb29sQmFyID0gc2hvd1Rvb2xCYXI7XG5cdFx0dGhpcy5jdHguc2hvd0RldGFpbHMgPSBzaG93RGV0YWlscztcblx0XHR0aGlzLmN0eC5zaG93VG9vbHMgPSBzaG93VG9vbHM7XG5cdFx0dGhpcy5jdHguY2FuRWRpdCA9IGNhbkVkaXQ7XG5cblx0XHR0aGlzLmN0eC5zdGFydCA9IHN0YXJ0O1xuXHRcdHRoaXMuY3R4LnN0b3AgPSBzdG9wO1xuXG5cdFx0dGhpcy5jdHgubWF4Q2VsbExlbmd0aCA9IG1heENlbGxMZW5ndGg7XG5cblx0XHR0aGlzLmN0eC5jYXJkID0gY2FyZDtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgTCA9IFtdO1xuXG5cdFx0dGhpcy5jdHguZXhwYW5kZWRMaW5rZWRFbGVtZW50cy5mb3JFYWNoKChleHBhbmRlZExpbmtlZEVsZW1lbnQpID0+IHtcblxuXHRcdFx0bGV0IGNhdGFsb2cgPSBleHBhbmRlZExpbmtlZEVsZW1lbnQuY2F0YWxvZztcblx0XHRcdGxldCBlbnRpdHkgPSBleHBhbmRlZExpbmtlZEVsZW1lbnQuZW50aXR5O1xuXG5cdFx0XHRMLnB1c2goY2F0YWxvZyArICcuJyArIGVudGl0eSk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLmN0eC5jb21tYW5kICs9ICcgLWV4cGFuZGVkTGlua2VkRWxlbWVudHM9XCInICsgTC5qb2luKCcsJykgKyAnXCInO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHR0aGlzLmZpZWxkRWRpdG9yID0gbmV3IHRoaXMuZmllbGRFZGl0b3JDdG9yKHRoaXMsIHRoaXMpO1xuXHRcdHRoaXMudW5pdEVkaXRvciA9IG5ldyB0aGlzLmZpZWxkVW5pdEN0b3IodGhpcywgdGhpcyk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdHRoaXMuX3JlbmRlcihyZXN1bHQsIHNlbGVjdG9yKTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0X3JlbmRlcjogZnVuY3Rpb24ocmVzdWx0LCBzZWxlY3Rvcilcblx0e1xuXHRcdGlmKHRoaXMuZ2V0UGFyZW50KCkuJG5hbWUgIT09ICdUYWJDdHJsJylcblx0XHR7XG5cdFx0XHRjb25zdCB0YWIgPSBuZXcgdGhpcy50YWJDdG9yKG51bGwsIHRoaXMpO1xuXG5cdFx0XHR0YWIucmVuZGVyKHNlbGVjdG9yLCB0aGlzLmN0eCkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0dGFiLmFwcGVuZEl0ZW0oJzxpIGNsYXNzPVwiZmEgZmEtYXJyb3dzLWFsdFwiPjwvaT4gJyArIHRoaXMuY3R4LmVudGl0eSwge2Nsb3NhYmxlOiBmYWxzZSwgZmlyc3RWaXNpYmxlOiBmYWxzZX0pLmRvbmUoKHNlbGVjdG9yKSA9PiB7XG5cblx0XHRcdFx0XHR0aGlzLnNldFBhcmVudCh0YWIpO1xuXG5cdFx0XHRcdFx0dGhpcy5fX3JlbmRlcihyZXN1bHQsIHNlbGVjdG9yKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRoaXMuX19yZW5kZXIocmVzdWx0LCBzZWxlY3Rvcik7XG5cdFx0fVxuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRfX3JlbmRlcjogZnVuY3Rpb24ocmVzdWx0LCBzZWxlY3Rvcilcblx0e1xuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0dGhpcy5yZXBsYWNlSFRNTChzZWxlY3RvciwgdGhpcy5mcmFnbWVudEVsZW1lbnRJbmZvQ3RybCwge2RpY3Q6IHRoaXMuY3R4fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdCQodGhpcy5wYXRjaElkKCcjQUNGRURGMTVfNzg5NF82RDkxX0NCRTdfRDk4QjVGN0U5QzZBJykpLmNsaWNrKCgpID0+IHtcblxuXHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdHRoaXMucmVmcmVzaCgpLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdH0pLmZhaWwoKG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0JCh0aGlzLnBhdGNoSWQoJyNEOThCNkI5QV8xRDVBXzAyMUVfNUY5MF8yQjU1QTZDM0JFNzMnKSkuY2hhbmdlKCgpID0+IHtcblxuXHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdHRoaXMucmVmcmVzaCgpLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdH0pLmZhaWwoKG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0JCh0aGlzLnBhdGNoSWQoJyNBQjg0QThDQ181RTcwX0VCRTdfODc2Nl8zMTdGRUU3MUVGRTgnKSkuY2hhbmdlKCgpID0+IHtcblxuXHRcdFx0XHR0aGlzLnNldE1vZGUoKVxuXHRcdFx0fSk7XG5cblx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdCQodGhpcy5wYXRjaElkKCcjQkY3RTc4ODVfREIzNF83OTkzXzlGMTdfMzc5OTBEREQ0QkYzJykpLmNsaWNrKCgpID0+IHtcblxuXHRcdFx0XHRhbWlXZWJBcHAuY3JlYXRlQ29udHJvbCh0aGlzLmdldFBhcmVudCgpLCB0aGlzLCAnbWVzc2FnZUJveCcsIFt0aGlzLmN0eC5jb21tYW5kXSwge30pO1xuXHRcdFx0fSk7XG5cblx0XHRcdCQodGhpcy5wYXRjaElkKCcjRjEyMzI3MTBfNDVFMl85MkJGXzczNzhfMUJDRDA1RkJGMTMxJykpLmNsaWNrKCgpID0+IHtcblxuXHRcdFx0XHRhbWlXZWJBcHAuY3JlYXRlQ29udHJvbCh0aGlzLmdldFBhcmVudCgpLCB0aGlzLCAndGV4dEJveCcsIFt0aGlzLmN0eC5qc10sIHt9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHR0aGlzLmN0eC5qcyA9IGFtaVdlYkFwcC5mb3JtYXRUV0lHKHRoaXMuZnJhZ21lbnRKUywgdGhpcy5jdHgpO1xuXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHR0aGlzLnJlZnJlc2goKS5kb25lKChlbGVtZW50Um93c2V0LCBsaW5rZWRFbGVtZW50Um93c2V0LCBleHBhbmRlZExpbmtlZEVsZW1lbnRzKSA9PiB7XG5cblx0XHRcdFx0cmVzdWx0LnJlc29sdmVXaXRoKHRoaXMuY3R4LmNvbnRleHQsIFtlbGVtZW50Um93c2V0LCBsaW5rZWRFbGVtZW50Um93c2V0LCBleHBhbmRlZExpbmtlZEVsZW1lbnRzXSk7XG5cblx0XHRcdH0pLmZhaWwoKG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0XHRyZXN1bHQucmVqZWN0V2l0aCh0aGlzLmN0eC5jb250ZXh0LCBbbWVzc2FnZV0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0fSk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHJlZnJlc2g6IGZ1bmN0aW9uKHNldHRpbmdzKVxuXHR7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRjb25zdCBbY29udGV4dF0gPSBhbWlXZWJBcHAuc2V0dXAoWydjb250ZXh0J10sIFtyZXN1bHRdLCBzZXR0aW5ncyk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdHRoaXMuY3R4LmNvbW1hbmQgPSB0aGlzLmN0eC5lbGVtZW50SW5mb0NvbW1hbmRGdW5jKHRoaXMuY3R4LmNhdGFsb2csIHRoaXMuY3R4LmVudGl0eSwgdGhpcy5jdHgucHJpbWFyeUZpZWxkTmFtZSwgdGhpcy5jdHgucHJpbWFyeUZpZWxkVmFsdWUpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRhbWlDb21tYW5kLmV4ZWN1dGUodGhpcy5jdHguY29tbWFuZCkuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRjb25zdCBmaWVsZERlc2NyaXB0aW9ucyA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGREZXNjcmlwdGlvbicsIGRhdGEpO1xuXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRjb25zdCBlbGVtZW50Um93c2V0ID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5yb3dzZXR7LkB0eXBlPT09XCJlbGVtZW50XCIgfHwgLkB0eXBlPT09XCJFbGVtZW50X0luZm9cIn0ucm93JywgZGF0YSk7IC8qIEJFUksgKi9cblxuXHRcdFx0Y29uc3QgbGlua2VkRWxlbWVudFJvd3NldCA9IGFtaVdlYkFwcC5qc3BhdGgoJy4ucm93c2V0ey5AdHlwZT09PVwibGlua2VkX2VsZW1lbnRzXCIgfHwgLkB0eXBlPT09XCJFbGVtZW50X0NoaWxkXCJ9LnJvdycsIGRhdGEpOyAvKiBCRVJLICovXG5cblx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdGNvbnN0IGV4cGFuZGVkTGlua2VkRWxlbWVudHMgPSBbXTtcblxuXHRcdFx0dGhpcy5jdHguZXhwYW5kZWRMaW5rZWRFbGVtZW50cy5mb3JFYWNoKChleHBhbmRlZExpbmtlZEVsZW1lbnQpID0+IHtcblxuXHRcdFx0XHRleHBhbmRlZExpbmtlZEVsZW1lbnRzLnB1c2goe1xuXHRcdFx0XHRcdGNhdGFsb2c6IGV4cGFuZGVkTGlua2VkRWxlbWVudC5jYXRhbG9nLFxuXHRcdFx0XHRcdGVudGl0eTogZXhwYW5kZWRMaW5rZWRFbGVtZW50LmVudGl0eSxcblx0XHRcdFx0XHRmaWVsZHM6IGV4cGFuZGVkTGlua2VkRWxlbWVudC5maWVsZHMsXG5cdFx0XHRcdFx0a2V5VmFsTW9kZTogZXhwYW5kZWRMaW5rZWRFbGVtZW50LmtleVZhbE1vZGUsXG5cdFx0XHRcdFx0cm93czogYW1pV2ViQXBwLmpzcGF0aCgnLi5yb3dzZXR7LkB0eXBlPT09XCInICsgZXhwYW5kZWRMaW5rZWRFbGVtZW50LmVudGl0eSArICdcIn0ucm93JywgZGF0YSksXG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdGNvbnN0IGRpY3QgPSB7XG5cdFx0XHRcdGNhdGFsb2c6IHRoaXMuY3R4LmNhdGFsb2csXG5cdFx0XHRcdGVudGl0eTogdGhpcy5jdHguZW50aXR5LFxuXHRcdFx0XHQvKiovXG5cdFx0XHRcdGZpZWxkRGVzY3JpcHRpb25zOiBmaWVsZERlc2NyaXB0aW9ucyxcblx0XHRcdFx0LyoqL1xuXHRcdFx0XHRlbGVtZW50Um93c2V0OiBlbGVtZW50Um93c2V0LFxuXHRcdFx0XHRsaW5rZWRFbGVtZW50Um93c2V0OiBsaW5rZWRFbGVtZW50Um93c2V0LFxuXHRcdFx0XHRleHBhbmRlZExpbmtlZEVsZW1lbnRzOiBleHBhbmRlZExpbmtlZEVsZW1lbnRzLFxuXHRcdFx0XHQvKiovXG5cdFx0XHRcdHNob3dUb29sQmFyOiB0aGlzLmN0eC5zaG93VG9vbEJhcixcblx0XHRcdFx0cHJpbWFyeUZpZWxkTmFtZTogdGhpcy5jdHgucHJpbWFyeUZpZWxkTmFtZSxcblx0XHRcdFx0cHJpbWFyeUZpZWxkVmFsdWU6IHRoaXMuY3R4LnByaW1hcnlGaWVsZFZhbHVlLFxuXHRcdFx0XHQvKiovXG5cdFx0XHRcdHNob3dFbXB0eUZpZWxkczogJCh0aGlzLnBhdGNoSWQoJyNEOThCNkI5QV8xRDVBXzAyMUVfNUY5MF8yQjU1QTZDM0JFNzMnKSkucHJvcCgnY2hlY2tlZCcpLFxuXHRcdFx0XHQvKiovXG5cdFx0XHRcdG1heENlbGxMZW5ndGg6IHRoaXMuY3R4Lm1heENlbGxMZW5ndGgsXG5cdFx0XHR9O1xuXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHR0aGlzLnJlcGxhY2VIVE1MKHRoaXMucGF0Y2hJZCgnI0JCRDM5MUM3Xzc1OURfMDFERF9FMjM0XzQ4OEQ0NjUwNDYzOCcpLCB0aGlzLmZyYWdtZW50RGV0YWlscywge2RpY3Q6IGRpY3R9KS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0dGhpcy5maWVsZEVkaXRvci5zZXR1cCh0aGlzLnBhdGNoSWQoJyNCQkQzOTFDN183NTlEXzAxRERfRTIzNF80ODhENDY1MDQ2MzgnKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5jdHgpO1xuXHRcdFx0XHR0aGlzLnVuaXRFZGl0b3Iuc2V0dXAodGhpcy5wYXRjaElkKCcjQkJEMzkxQzdfNzU5RF8wMUREX0UyMzRfNDg4RDQ2NTA0NjM4JykpO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHQkKHRoaXMucGF0Y2hJZCgnI0JCRDM5MUM3Xzc1OURfMDFERF9FMjM0XzQ4OEQ0NjUwNDYzOCcpKS5maW5kKCdbZGF0YS1jdHJsXScpLmNsaWNrKChlKSA9PiB7XG5cblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRyb2xGcm9tV2ViTGluayh0aGlzLmdldFBhcmVudCgpLCBlLmN1cnJlbnRUYXJnZXQsIHRoaXMuY3R4KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHJlc3VsdC5yZXNvbHZlV2l0aChjb250ZXh0LCBbZWxlbWVudFJvd3NldCwgbGlua2VkRWxlbWVudFJvd3NldCwgZXhwYW5kZWRMaW5rZWRFbGVtZW50c10pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdHJlc3VsdC5yZWplY3RXaXRoKGNvbnRleHQsIFttZXNzYWdlXSk7XG5cdFx0fSk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGlzSW5FZGl0TW9kZTogZnVuY3Rpb24oKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuZmllbGRFZGl0b3IuaXNJbkVkaXRNb2RlKCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHNldE1vZGU6IGZ1bmN0aW9uKClcblx0e1xuXHRcdGNvbnN0IHRhZ3MxID0gJCh0aGlzLnBhdGNoSWQoJyNCQkQzOTFDN183NTlEXzAxRERfRTIzNF80ODhENDY1MDQ2MzgnKSk7XG5cblx0XHRjb25zdCB0YWdzMiA9IHRhZ3MxLmZpbmQoJy52aWV3LW1vcmUnKTtcblx0XHRjb25zdCB0YWdzMyA9IHRhZ3MxLmZpbmQoJy52aWV3LW1lZGlhJyk7XG5cblx0XHRpZigkKHRoaXMucGF0Y2hJZCgnI0FCODRBOENDXzVFNzBfRUJFN184NzY2XzMxN0ZFRTcxRUZFOCcpKS5wcm9wKCdjaGVja2VkJykpXG5cdFx0e1xuXHRcdFx0dGFnczIuaGlkZSgpO1xuXHRcdFx0dGFnczMuaGlkZSgpO1xuXG5cdFx0XHR0aGlzLmZpZWxkRWRpdG9yLnNldEluRWRpdE1vZGUodHJ1ZSk7XG5cdFx0XHR0aGlzLnVuaXRFZGl0b3Iuc2V0SW5FZGl0TW9kZSh0cnVlKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdHRhZ3MyLnNob3coKTtcblx0XHRcdHRhZ3MzLnNob3coKTtcblxuXHRcdFx0dGhpcy5maWVsZEVkaXRvci5zZXRJbkVkaXRNb2RlKGZhbHNlKTtcblx0XHRcdHRoaXMudW5pdEVkaXRvci5zZXRJbkVkaXRNb2RlKGZhbHNlKTtcblx0XHR9XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4iXX0=
