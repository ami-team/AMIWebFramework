/*!
 * AMI Web Framework
 *
 * Copyright (c) 2014-XXXX The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global ClipboardJS
 *
 */

/*-------------------------------------------------------------------------*/
$AMIClass('ConfirmBoxCtrl', {
  /*---------------------------------------------------------------------*/
  $extends: ami.Control,

  /*---------------------------------------------------------------------*/
  $init: function $init(parent, owner) {
    this.$super.$init(parent, owner);
  },

  /*---------------------------------------------------------------------*/
  onReady: function onReady() {
    var _this = this;

    return amiWebApp.loadResources([amiWebApp.originURL + '/controls/ConfirmBox/twig/ConfirmBoxCtrl.twig', amiWebApp.originURL + '/js/3rd-party/clipboard.min.js']).done(function (data) {
      amiWebApp.appendHTML('body', data[0]).done(function () {
        var _class = _this.$class;
        /*---------------------------------------------------------*/

        $('#DCDB367E_FB67_A957_68AC_B54038F860DB').on('hidden.bs.modal', function () {
          //$('#DCDB367E_FB67_A957_68AC_B54038F860DB').modal('hide');
          _class.deferred.rejectWith(_class.context || _class.deferred, [false]);
        });
        /*---------------------------------------------------------*/

        $('#E5435D68_FE3D_C90F_FC41_DEFF400CE4AE').on(
        /*-*/
        'click'
        /*-*/
        , function () {
          $('#DCDB367E_FB67_A957_68AC_B54038F860DB').modal('hide');

          _class.deferred.resolveWith(_class.context || _class.deferred, [true]);
        });
        /*---------------------------------------------------------*/

        new ClipboardJS('#DCDB367E_FB67_A957_68AC_B54038F860DB .btn[data-clipboard-target]');
        /*---------------------------------------------------------*/
      });
    });
  },

  /*---------------------------------------------------------------------*/
  render: function render(text, settings) {
    var deferred = $.Deferred();
    /*-----------------------------------------------------------------*/

    var _amiWebApp$setup = amiWebApp.setup(['context', 'title'], [deferred, 'Confirm box'], settings),
        context = _amiWebApp$setup[0],
        title = _amiWebApp$setup[1];
    /*-----------------------------------------------------------------*/


    amiWebApp.unlock();
    $('#DF8EBE84_FA77_2711_8EB5_4B3213739A54').html(title);
    $('#DCDB367E_FB67_A957_68AC_B54038F860DB .modal-body').text(text || '');
    $('#DCDB367E_FB67_A957_68AC_B54038F860DB').modal('show');
    this.$class.deferred = deferred;
    this.$class.context = context;
    /*-----------------------------------------------------------------*/

    return deferred.promise();
    /*-----------------------------------------------------------------*/
  },

  /*---------------------------------------------------------------------*/
  show: function show(text, settings) {
    return this.render(text, settings);
  }
  /*---------------------------------------------------------------------*/

});
/*-------------------------------------------------------------------------*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbmZpcm1Cb3hDdHJsLmVzNi5qcyJdLCJuYW1lcyI6WyIkQU1JQ2xhc3MiLCIkZXh0ZW5kcyIsImFtaSIsIkNvbnRyb2wiLCIkaW5pdCIsInBhcmVudCIsIm93bmVyIiwiJHN1cGVyIiwib25SZWFkeSIsImFtaVdlYkFwcCIsImxvYWRSZXNvdXJjZXMiLCJvcmlnaW5VUkwiLCJkb25lIiwiZGF0YSIsImFwcGVuZEhUTUwiLCJfY2xhc3MiLCIkY2xhc3MiLCIkIiwib24iLCJkZWZlcnJlZCIsInJlamVjdFdpdGgiLCJjb250ZXh0IiwibW9kYWwiLCJyZXNvbHZlV2l0aCIsIkNsaXBib2FyZEpTIiwicmVuZGVyIiwidGV4dCIsInNldHRpbmdzIiwiRGVmZXJyZWQiLCJzZXR1cCIsInRpdGxlIiwidW5sb2NrIiwiaHRtbCIsInByb21pc2UiLCJzaG93Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7OztBQWFBO0FBRUFBLFNBQVMsQ0FBQyxnQkFBRCxFQUFtQjtBQUMzQjtBQUVBQyxFQUFBQSxRQUFRLEVBQUVDLEdBQUcsQ0FBQ0MsT0FIYTs7QUFLM0I7QUFFQUMsRUFBQUEsS0FBSyxFQUFFLGVBQVNDLE1BQVQsRUFBaUJDLEtBQWpCLEVBQ1A7QUFDQyxTQUFLQyxNQUFMLENBQVlILEtBQVosQ0FBa0JDLE1BQWxCLEVBQTBCQyxLQUExQjtBQUNBLEdBVjBCOztBQVkzQjtBQUVBRSxFQUFBQSxPQUFPLEVBQUUsbUJBQ1Q7QUFBQTs7QUFDQyxXQUFPQyxTQUFTLENBQUNDLGFBQVYsQ0FBd0IsQ0FDOUJELFNBQVMsQ0FBQ0UsU0FBVixHQUFzQiwrQ0FEUSxFQUU5QkYsU0FBUyxDQUFDRSxTQUFWLEdBQXNCLGdDQUZRLENBQXhCLEVBR0pDLElBSEksQ0FHQyxVQUFDQyxJQUFELEVBQVU7QUFFakJKLE1BQUFBLFNBQVMsQ0FBQ0ssVUFBVixDQUFxQixNQUFyQixFQUE2QkQsSUFBSSxDQUFDLENBQUQsQ0FBakMsRUFBc0NELElBQXRDLENBQTJDLFlBQU07QUFFaEQsWUFBTUcsTUFBTSxHQUFHLEtBQUksQ0FBQ0MsTUFBcEI7QUFFQTs7QUFFQUMsUUFBQUEsQ0FBQyxDQUFDLHVDQUFELENBQUQsQ0FBMkNDLEVBQTNDLENBQThDLGlCQUE5QyxFQUFpRSxZQUFNO0FBRXRFO0FBRUFILFVBQUFBLE1BQU0sQ0FBQ0ksUUFBUCxDQUFnQkMsVUFBaEIsQ0FBMkJMLE1BQU0sQ0FBQ00sT0FBUCxJQUFrQk4sTUFBTSxDQUFDSSxRQUFwRCxFQUE4RCxDQUFDLEtBQUQsQ0FBOUQ7QUFDQSxTQUxEO0FBT0E7O0FBRUFGLFFBQUFBLENBQUMsQ0FBQyx1Q0FBRCxDQUFELENBQTJDQyxFQUEzQztBQUE4QztBQUFLO0FBQU87QUFBMUQsVUFBaUUsWUFBTTtBQUV0RUQsVUFBQUEsQ0FBQyxDQUFDLHVDQUFELENBQUQsQ0FBMkNLLEtBQTNDLENBQWlELE1BQWpEOztBQUVBUCxVQUFBQSxNQUFNLENBQUNJLFFBQVAsQ0FBZ0JJLFdBQWhCLENBQTRCUixNQUFNLENBQUNNLE9BQVAsSUFBa0JOLE1BQU0sQ0FBQ0ksUUFBckQsRUFBK0QsQ0FBQyxJQUFELENBQS9EO0FBQ0EsU0FMRDtBQU9BOztBQUVBLFlBQUlLLFdBQUosQ0FBZ0IsbUVBQWhCO0FBRUE7QUFDQSxPQTNCRDtBQTRCQSxLQWpDTSxDQUFQO0FBa0NBLEdBbEQwQjs7QUFvRDNCO0FBRUFDLEVBQUFBLE1BQU0sRUFBRSxnQkFBU0MsSUFBVCxFQUFlQyxRQUFmLEVBQ1I7QUFDQyxRQUFNUixRQUFRLEdBQUdGLENBQUMsQ0FBQ1csUUFBRixFQUFqQjtBQUVBOztBQUhELDJCQU9LbkIsU0FBUyxDQUFDb0IsS0FBVixDQUNILENBQUMsU0FBRCxFQUFZLE9BQVosQ0FERyxFQUVILENBQUNWLFFBQUQsRUFBVyxhQUFYLENBRkcsRUFHSFEsUUFIRyxDQVBMO0FBQUEsUUFNRU4sT0FORjtBQUFBLFFBTVdTLEtBTlg7QUFhQzs7O0FBRUFyQixJQUFBQSxTQUFTLENBQUNzQixNQUFWO0FBRUFkLElBQUFBLENBQUMsQ0FBQyx1Q0FBRCxDQUFELENBQTJDZSxJQUEzQyxDQUFnREYsS0FBaEQ7QUFFQWIsSUFBQUEsQ0FBQyxDQUFDLG1EQUFELENBQUQsQ0FBdURTLElBQXZELENBQTREQSxJQUFJLElBQUksRUFBcEU7QUFFQVQsSUFBQUEsQ0FBQyxDQUFDLHVDQUFELENBQUQsQ0FBMkNLLEtBQTNDLENBQWlELE1BQWpEO0FBRUEsU0FBS04sTUFBTCxDQUFZRyxRQUFaLEdBQXVCQSxRQUF2QjtBQUNBLFNBQUtILE1BQUwsQ0FBWUssT0FBWixHQUFzQkEsT0FBdEI7QUFFQTs7QUFFQSxXQUFPRixRQUFRLENBQUNjLE9BQVQsRUFBUDtBQUVBO0FBQ0EsR0F0RjBCOztBQXdGM0I7QUFFQUMsRUFBQUEsSUFBSSxFQUFFLGNBQVNSLElBQVQsRUFBZUMsUUFBZixFQUNOO0FBQ0MsV0FBTyxLQUFLRixNQUFMLENBQVlDLElBQVosRUFBa0JDLFFBQWxCLENBQVA7QUFDQTtBQUVEOztBQS9GMkIsQ0FBbkIsQ0FBVDtBQWtHQSIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQU1JIFdlYiBGcmFtZXdvcmtcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtWFhYWCBUaGUgQU1JIFRlYW0gLyBMUFNDIC8gSU4yUDNcbiAqXG4gKiBUaGlzIGZpbGUgbXVzdCBiZSB1c2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQ2VDSUxMLUM6XG4gKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZW4uaHRtbFxuICogaHR0cDovL3d3dy5jZWNpbGwuaW5mby9saWNlbmNlcy9MaWNlbmNlX0NlQ0lMTC1DX1YxLWZyLmh0bWxcbiAqXG4gKiBAZ2xvYmFsIENsaXBib2FyZEpTXG4gKlxuICovXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiRBTUlDbGFzcygnQ29uZmlybUJveEN0cmwnLCB7XG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQkZXh0ZW5kczogYW1pLkNvbnRyb2wsXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdCRpbml0OiBmdW5jdGlvbihwYXJlbnQsIG93bmVyKVxuXHR7XG5cdFx0dGhpcy4kc3VwZXIuJGluaXQocGFyZW50LCBvd25lcik7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdG9uUmVhZHk6IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiBhbWlXZWJBcHAubG9hZFJlc291cmNlcyhbXG5cdFx0XHRhbWlXZWJBcHAub3JpZ2luVVJMICsgJy9jb250cm9scy9Db25maXJtQm94L3R3aWcvQ29uZmlybUJveEN0cmwudHdpZycsXG5cdFx0XHRhbWlXZWJBcHAub3JpZ2luVVJMICsgJy9qcy8zcmQtcGFydHkvY2xpcGJvYXJkLm1pbi5qcycsXG5cdFx0XSkuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHRhbWlXZWJBcHAuYXBwZW5kSFRNTCgnYm9keScsIGRhdGFbMF0pLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdGNvbnN0IF9jbGFzcyA9IHRoaXMuJGNsYXNzO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHQkKCcjRENEQjM2N0VfRkI2N19BOTU3XzY4QUNfQjU0MDM4Rjg2MERCJykub24oJ2hpZGRlbi5icy5tb2RhbCcsICgpID0+IHtcblxuXHRcdFx0XHRcdC8vJCgnI0RDREIzNjdFX0ZCNjdfQTk1N182OEFDX0I1NDAzOEY4NjBEQicpLm1vZGFsKCdoaWRlJyk7XG5cblx0XHRcdFx0XHRfY2xhc3MuZGVmZXJyZWQucmVqZWN0V2l0aChfY2xhc3MuY29udGV4dCB8fCBfY2xhc3MuZGVmZXJyZWQsIFtmYWxzZV0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0JCgnI0U1NDM1RDY4X0ZFM0RfQzkwRl9GQzQxX0RFRkY0MDBDRTRBRScpLm9uKC8qLSovJ2NsaWNrJy8qLSovLCAoKSA9PiB7XG5cblx0XHRcdFx0XHQkKCcjRENEQjM2N0VfRkI2N19BOTU3XzY4QUNfQjU0MDM4Rjg2MERCJykubW9kYWwoJ2hpZGUnKTtcblxuXHRcdFx0XHRcdF9jbGFzcy5kZWZlcnJlZC5yZXNvbHZlV2l0aChfY2xhc3MuY29udGV4dCB8fCBfY2xhc3MuZGVmZXJyZWQsIFt0cnVlXSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRuZXcgQ2xpcGJvYXJkSlMoJyNEQ0RCMzY3RV9GQjY3X0E5NTdfNjhBQ19CNTQwMzhGODYwREIgLmJ0bltkYXRhLWNsaXBib2FyZC10YXJnZXRdJyk7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHJlbmRlcjogZnVuY3Rpb24odGV4dCwgc2V0dGluZ3MpXG5cdHtcblx0XHRjb25zdCBkZWZlcnJlZCA9ICQuRGVmZXJyZWQoKTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgW1xuXHRcdFx0Y29udGV4dCwgdGl0bGVcblx0XHRdID0gYW1pV2ViQXBwLnNldHVwKFxuXHRcdFx0Wydjb250ZXh0JywgJ3RpdGxlJ10sXG5cdFx0XHRbZGVmZXJyZWQsICdDb25maXJtIGJveCddLFxuXHRcdFx0c2V0dGluZ3Ncblx0XHQpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHQkKCcjREY4RUJFODRfRkE3N18yNzExXzhFQjVfNEIzMjEzNzM5QTU0JykuaHRtbCh0aXRsZSk7XG5cblx0XHQkKCcjRENEQjM2N0VfRkI2N19BOTU3XzY4QUNfQjU0MDM4Rjg2MERCIC5tb2RhbC1ib2R5JykudGV4dCh0ZXh0IHx8ICcnKTtcblxuXHRcdCQoJyNEQ0RCMzY3RV9GQjY3X0E5NTdfNjhBQ19CNTQwMzhGODYwREInKS5tb2RhbCgnc2hvdycpO1xuXG5cdFx0dGhpcy4kY2xhc3MuZGVmZXJyZWQgPSBkZWZlcnJlZDtcblx0XHR0aGlzLiRjbGFzcy5jb250ZXh0ID0gY29udGV4dDtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRzaG93OiBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncylcblx0e1xuXHRcdHJldHVybiB0aGlzLnJlbmRlcih0ZXh0LCBzZXR0aW5ncyk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4iXX0=
