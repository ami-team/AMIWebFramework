/*!
 * AMI Web Framework
 *
 * Copyright (c) 2014-XXXX The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global ClipboardJS
 *
 */

/*-------------------------------------------------------------------------*/
$AMIClass('EditBoxCtrl', {
  /*---------------------------------------------------------------------*/
  $extends: ami.Control,

  /*---------------------------------------------------------------------*/
  $init: function $init(parent, owner) {
    this.$super.$init(parent, owner);
  },

  /*---------------------------------------------------------------------*/
  onReady: function onReady() {
    var _this = this;

    return amiWebApp.loadResources([amiWebApp.originURL + '/controls/EditBox/twig/EditBoxCtrl.twig', amiWebApp.originURL + '/js/3rd-party/clipboard.min.js']).done(function (data) {
      amiWebApp.appendHTML('body', data[0]).done(function () {
        var _class = _this.$class;
        /*---------------------------------------------------------*/

        $('#F9BC65C1_07EB_2F56_E152_9B76DB218F10').on('hidden.bs.modal', function () {
          //$('#F9BC65C1_07EB_2F56_E152_9B76DB218F10').modal('hide');
          _class.deferred.rejectWith(_class.context || _class.deferred, [$('#F9BC65C1_07EB_2F56_E152_9B76DB218F10 textarea').val()]);
        });
        /*---------------------------------------------------------*/

        $('#CB99273A_B731_0289_8D87_D0549A1944FB').on(
        /*-*/
        'click'
        /*-*/
        , function () {
          $('#F9BC65C1_07EB_2F56_E152_9B76DB218F10').modal('hide');

          _class.deferred.resolveWith(_class.context || _class.deferred, [$('#F9BC65C1_07EB_2F56_E152_9B76DB218F10 textarea').val()]);
        });
        /*---------------------------------------------------------*/

        new ClipboardJS('#F9BC65C1_07EB_2F56_E152_9B76DB218F10 .btn[data-clipboard-target]');
        /*---------------------------------------------------------*/
      });
    });
  },

  /*---------------------------------------------------------------------*/
  render: function render(text, settings) {
    var deferred = $.Deferred();
    /*-----------------------------------------------------------------*/

    var _amiWebApp$setup = amiWebApp.setup(['context', 'title'], [deferred, 'Edit box'], settings),
        context = _amiWebApp$setup[0],
        title = _amiWebApp$setup[1];
    /*-----------------------------------------------------------------*/


    amiWebApp.unlock();
    $('#D042A24A_4F19_BEF9_A843_15391EAD26A1').html(title);
    $('#F9BC65C1_07EB_2F56_E152_9B76DB218F10 textarea').val(text || '');
    $('#F9BC65C1_07EB_2F56_E152_9B76DB218F10').modal('show');
    this.$class.deferred = deferred;
    this.$class.context = context;
    /*-----------------------------------------------------------------*/

    return deferred.promise();
    /*-----------------------------------------------------------------*/
  },

  /*---------------------------------------------------------------------*/
  show: function show(text, settings) {
    return this.render(text, settings);
  }
  /*---------------------------------------------------------------------*/

});
/*-------------------------------------------------------------------------*/
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVkaXRCb3hDdHJsLmVzNi5qcyJdLCJuYW1lcyI6WyIkQU1JQ2xhc3MiLCIkZXh0ZW5kcyIsImFtaSIsIkNvbnRyb2wiLCIkaW5pdCIsInBhcmVudCIsIm93bmVyIiwiJHN1cGVyIiwib25SZWFkeSIsImFtaVdlYkFwcCIsImxvYWRSZXNvdXJjZXMiLCJvcmlnaW5VUkwiLCJkb25lIiwiZGF0YSIsImFwcGVuZEhUTUwiLCJfY2xhc3MiLCIkY2xhc3MiLCIkIiwib24iLCJkZWZlcnJlZCIsInJlamVjdFdpdGgiLCJjb250ZXh0IiwidmFsIiwibW9kYWwiLCJyZXNvbHZlV2l0aCIsIkNsaXBib2FyZEpTIiwicmVuZGVyIiwidGV4dCIsInNldHRpbmdzIiwiRGVmZXJyZWQiLCJzZXR1cCIsInRpdGxlIiwidW5sb2NrIiwiaHRtbCIsInByb21pc2UiLCJzaG93Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7OztBQWFBO0FBRUFBLFNBQVMsQ0FBQyxhQUFELEVBQWdCO0FBQ3hCO0FBRUFDLEVBQUFBLFFBQVEsRUFBRUMsR0FBRyxDQUFDQyxPQUhVOztBQUt4QjtBQUVBQyxFQUFBQSxLQUFLLEVBQUUsZUFBU0MsTUFBVCxFQUFpQkMsS0FBakIsRUFDUDtBQUNDLFNBQUtDLE1BQUwsQ0FBWUgsS0FBWixDQUFrQkMsTUFBbEIsRUFBMEJDLEtBQTFCO0FBQ0EsR0FWdUI7O0FBWXhCO0FBRUFFLEVBQUFBLE9BQU8sRUFBRSxtQkFDVDtBQUFBOztBQUNDLFdBQU9DLFNBQVMsQ0FBQ0MsYUFBVixDQUF3QixDQUM5QkQsU0FBUyxDQUFDRSxTQUFWLEdBQXNCLHlDQURRLEVBRTlCRixTQUFTLENBQUNFLFNBQVYsR0FBc0IsZ0NBRlEsQ0FBeEIsRUFHSkMsSUFISSxDQUdDLFVBQUNDLElBQUQsRUFBVTtBQUVqQkosTUFBQUEsU0FBUyxDQUFDSyxVQUFWLENBQXFCLE1BQXJCLEVBQTZCRCxJQUFJLENBQUMsQ0FBRCxDQUFqQyxFQUFzQ0QsSUFBdEMsQ0FBMkMsWUFBTTtBQUVoRCxZQUFNRyxNQUFNLEdBQUcsS0FBSSxDQUFDQyxNQUFwQjtBQUVBOztBQUVBQyxRQUFBQSxDQUFDLENBQUMsdUNBQUQsQ0FBRCxDQUEyQ0MsRUFBM0MsQ0FBOEMsaUJBQTlDLEVBQWlFLFlBQU07QUFFdEU7QUFFQUgsVUFBQUEsTUFBTSxDQUFDSSxRQUFQLENBQWdCQyxVQUFoQixDQUEyQkwsTUFBTSxDQUFDTSxPQUFQLElBQWtCTixNQUFNLENBQUNJLFFBQXBELEVBQThELENBQUNGLENBQUMsQ0FBQyxnREFBRCxDQUFELENBQW9ESyxHQUFwRCxFQUFELENBQTlEO0FBQ0EsU0FMRDtBQU9BOztBQUVBTCxRQUFBQSxDQUFDLENBQUMsdUNBQUQsQ0FBRCxDQUEyQ0MsRUFBM0M7QUFBOEM7QUFBSztBQUFPO0FBQTFELFVBQWlFLFlBQU07QUFFdEVELFVBQUFBLENBQUMsQ0FBQyx1Q0FBRCxDQUFELENBQTJDTSxLQUEzQyxDQUFpRCxNQUFqRDs7QUFFQVIsVUFBQUEsTUFBTSxDQUFDSSxRQUFQLENBQWdCSyxXQUFoQixDQUE0QlQsTUFBTSxDQUFDTSxPQUFQLElBQWtCTixNQUFNLENBQUNJLFFBQXJELEVBQStELENBQUNGLENBQUMsQ0FBQyxnREFBRCxDQUFELENBQW9ESyxHQUFwRCxFQUFELENBQS9EO0FBQ0EsU0FMRDtBQU9BOztBQUVBLFlBQUlHLFdBQUosQ0FBZ0IsbUVBQWhCO0FBRUE7QUFDQSxPQTNCRDtBQTRCQSxLQWpDTSxDQUFQO0FBa0NBLEdBbER1Qjs7QUFvRHhCO0FBRUFDLEVBQUFBLE1BQU0sRUFBRSxnQkFBU0MsSUFBVCxFQUFlQyxRQUFmLEVBQ1I7QUFDQyxRQUFNVCxRQUFRLEdBQUdGLENBQUMsQ0FBQ1ksUUFBRixFQUFqQjtBQUVBOztBQUhELDJCQU9LcEIsU0FBUyxDQUFDcUIsS0FBVixDQUNILENBQUMsU0FBRCxFQUFZLE9BQVosQ0FERyxFQUVILENBQUNYLFFBQUQsRUFBVyxVQUFYLENBRkcsRUFHSFMsUUFIRyxDQVBMO0FBQUEsUUFNRVAsT0FORjtBQUFBLFFBTVdVLEtBTlg7QUFhQzs7O0FBRUF0QixJQUFBQSxTQUFTLENBQUN1QixNQUFWO0FBRUFmLElBQUFBLENBQUMsQ0FBQyx1Q0FBRCxDQUFELENBQTJDZ0IsSUFBM0MsQ0FBZ0RGLEtBQWhEO0FBRUFkLElBQUFBLENBQUMsQ0FBQyxnREFBRCxDQUFELENBQW9ESyxHQUFwRCxDQUF3REssSUFBSSxJQUFJLEVBQWhFO0FBRUFWLElBQUFBLENBQUMsQ0FBQyx1Q0FBRCxDQUFELENBQTJDTSxLQUEzQyxDQUFpRCxNQUFqRDtBQUVBLFNBQUtQLE1BQUwsQ0FBWUcsUUFBWixHQUF1QkEsUUFBdkI7QUFDQSxTQUFLSCxNQUFMLENBQVlLLE9BQVosR0FBc0JBLE9BQXRCO0FBRUE7O0FBRUEsV0FBT0YsUUFBUSxDQUFDZSxPQUFULEVBQVA7QUFFQTtBQUNBLEdBdEZ1Qjs7QUF3RnhCO0FBRUFDLEVBQUFBLElBQUksRUFBRSxjQUFTUixJQUFULEVBQWVDLFFBQWYsRUFDTjtBQUNDLFdBQU8sS0FBS0YsTUFBTCxDQUFZQyxJQUFaLEVBQWtCQyxRQUFsQixDQUFQO0FBQ0E7QUFFRDs7QUEvRndCLENBQWhCLENBQVQ7QUFrR0EiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFNSSBXZWIgRnJhbWV3b3JrXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LVhYWFggVGhlIEFNSSBUZWFtIC8gTFBTQyAvIElOMlAzXG4gKlxuICogVGhpcyBmaWxlIG11c3QgYmUgdXNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIENlQ0lMTC1DOlxuICogaHR0cDovL3d3dy5jZWNpbGwuaW5mby9saWNlbmNlcy9MaWNlbmNlX0NlQ0lMTC1DX1YxLWVuLmh0bWxcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1mci5odG1sXG4gKlxuICogQGdsb2JhbCBDbGlwYm9hcmRKU1xuICpcbiAqL1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4kQU1JQ2xhc3MoJ0VkaXRCb3hDdHJsJywge1xuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0JGV4dGVuZHM6IGFtaS5Db250cm9sLFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQkaW5pdDogZnVuY3Rpb24ocGFyZW50LCBvd25lcilcblx0e1xuXHRcdHRoaXMuJHN1cGVyLiRpbml0KHBhcmVudCwgb3duZXIpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRvblJlYWR5OiBmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gYW1pV2ViQXBwLmxvYWRSZXNvdXJjZXMoW1xuXHRcdFx0YW1pV2ViQXBwLm9yaWdpblVSTCArICcvY29udHJvbHMvRWRpdEJveC90d2lnL0VkaXRCb3hDdHJsLnR3aWcnLFxuXHRcdFx0YW1pV2ViQXBwLm9yaWdpblVSTCArICcvanMvM3JkLXBhcnR5L2NsaXBib2FyZC5taW4uanMnLFxuXHRcdF0pLmRvbmUoKGRhdGEpID0+IHtcblxuXHRcdFx0YW1pV2ViQXBwLmFwcGVuZEhUTUwoJ2JvZHknLCBkYXRhWzBdKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRjb25zdCBfY2xhc3MgPSB0aGlzLiRjbGFzcztcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0JCgnI0Y5QkM2NUMxXzA3RUJfMkY1Nl9FMTUyXzlCNzZEQjIxOEYxMCcpLm9uKCdoaWRkZW4uYnMubW9kYWwnLCAoKSA9PiB7XG5cblx0XHRcdFx0XHQvLyQoJyNGOUJDNjVDMV8wN0VCXzJGNTZfRTE1Ml85Qjc2REIyMThGMTAnKS5tb2RhbCgnaGlkZScpO1xuXG5cdFx0XHRcdFx0X2NsYXNzLmRlZmVycmVkLnJlamVjdFdpdGgoX2NsYXNzLmNvbnRleHQgfHwgX2NsYXNzLmRlZmVycmVkLCBbJCgnI0Y5QkM2NUMxXzA3RUJfMkY1Nl9FMTUyXzlCNzZEQjIxOEYxMCB0ZXh0YXJlYScpLnZhbCgpXSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHQkKCcjQ0I5OTI3M0FfQjczMV8wMjg5XzhEODdfRDA1NDlBMTk0NEZCJykub24oLyotKi8nY2xpY2snLyotKi8sICgpID0+IHtcblxuXHRcdFx0XHRcdCQoJyNGOUJDNjVDMV8wN0VCXzJGNTZfRTE1Ml85Qjc2REIyMThGMTAnKS5tb2RhbCgnaGlkZScpO1xuXG5cdFx0XHRcdFx0X2NsYXNzLmRlZmVycmVkLnJlc29sdmVXaXRoKF9jbGFzcy5jb250ZXh0IHx8IF9jbGFzcy5kZWZlcnJlZCwgWyQoJyNGOUJDNjVDMV8wN0VCXzJGNTZfRTE1Ml85Qjc2REIyMThGMTAgdGV4dGFyZWEnKS52YWwoKV0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0bmV3IENsaXBib2FyZEpTKCcjRjlCQzY1QzFfMDdFQl8yRjU2X0UxNTJfOUI3NkRCMjE4RjEwIC5idG5bZGF0YS1jbGlwYm9hcmQtdGFyZ2V0XScpO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRyZW5kZXI6IGZ1bmN0aW9uKHRleHQsIHNldHRpbmdzKVxuXHR7XG5cdFx0Y29uc3QgZGVmZXJyZWQgPSAkLkRlZmVycmVkKCk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGNvbnN0IFtcblx0XHRcdGNvbnRleHQsIHRpdGxlXG5cdFx0XSA9IGFtaVdlYkFwcC5zZXR1cChcblx0XHRcdFsnY29udGV4dCcsICd0aXRsZSddLFxuXHRcdFx0W2RlZmVycmVkLCAnRWRpdCBib3gnXSxcblx0XHRcdHNldHRpbmdzXG5cdFx0KTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0JCgnI0QwNDJBMjRBXzRGMTlfQkVGOV9BODQzXzE1MzkxRUFEMjZBMScpLmh0bWwodGl0bGUpO1xuXG5cdFx0JCgnI0Y5QkM2NUMxXzA3RUJfMkY1Nl9FMTUyXzlCNzZEQjIxOEYxMCB0ZXh0YXJlYScpLnZhbCh0ZXh0IHx8ICcnKTtcblxuXHRcdCQoJyNGOUJDNjVDMV8wN0VCXzJGNTZfRTE1Ml85Qjc2REIyMThGMTAnKS5tb2RhbCgnc2hvdycpO1xuXG5cdFx0dGhpcy4kY2xhc3MuZGVmZXJyZWQgPSBkZWZlcnJlZDtcblx0XHR0aGlzLiRjbGFzcy5jb250ZXh0ID0gY29udGV4dDtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0cmV0dXJuIGRlZmVycmVkLnByb21pc2UoKTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRzaG93OiBmdW5jdGlvbih0ZXh0LCBzZXR0aW5ncylcblx0e1xuXHRcdHJldHVybiB0aGlzLnJlbmRlcih0ZXh0LCBzZXR0aW5ncyk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4iXX0=
