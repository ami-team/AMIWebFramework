/*!
 * AMI Web Framework
 *
 * Copyright (c) 2014-XXXX The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 *
 * @global Viz, saveAs
 *
 */$AMIClass("GraphCtrl",{$extends:ami.Control,$init:function $init(parent,owner){this.$super.$init(parent,owner)},onReady:function onReady(){var _this=this;return amiWebApp.loadResources([amiWebApp.originURL+"/controls/Graph/twig/GraphCtrl.twig",amiWebApp.originURL+"/controls/Graph/twig/graph.twig",amiWebApp.originURL+"/js/3rd-party/viz.min.js",amiWebApp.originURL+"/css/ami.min.css",amiWebApp.originURL+"/css/font-awesome.min.css"]).done(function(data){_this.fragmentGraphCtrl=data[0];_this.fragmentGraph=data[1]})},render:function render(selector,command,settings){var _this2=this;var result=$.Deferred();var _amiWebApp$setup=amiWebApp.setup(["context","direction"],[result,"LR"],settings),context=_amiWebApp$setup[0],direction=_amiWebApp$setup[1];this.direction=direction;amiCommand.execute(command).done(function(data){if((_this2.dotString=amiWebApp.jspath("..rowset{.@type===\"graph\"}.row.field{.@name===\"dot\"}.$",data)[0]||"")!==""){_this2.mode="dot"}else{_this2.json=data;_this2.dotString=_this2.jsonToDot(_this2.json,"");_this2.mode="json"}_this2.replaceHTML(selector,_this2.fragmentGraphCtrl,{dict:{mode:_this2.mode}}).done(function(){$(_this2.patchId("#A8E7C88D_7B78_B221_0BCB_6EF1F9CC3C15")).change(function(e){e.preventDefault();_this2.switchDirection()});$(_this2.patchId("#E90168C4_E4BD_ACC8_085F_9953D6CF789F")).click(function(e){e.preventDefault();_this2.exportSVG()});$(_this2.patchId("#D68E49F9_A0C7_C15D_8323_8BA215856428")).click(function(e){e.preventDefault();_this2.exportPNG()});$(_this2.patchId("#EC45916B_DC77_AD27_8117_E84FC2598196")).click(function(e){e.preventDefault();_this2.dotString=_this2.jsonToDot(_this2.json,$("#"+_this2.patchId("D9256B01_3DBE_6E51_AA91_B2F80944607D")).val().trim());_this2.display()});$(_this2.patchId("#D9256B01_3DBE_6E51_AA91_B2F80944607D")).keypress(function(e){if(e.keyCode==13){_this2.dotString=_this2.jsonToDot(_this2.json,$("#"+_this2.patchId("D9256B01_3DBE_6E51_AA91_B2F80944607D")).val().trim());_this2.display()}});_this2.display().done(function(){result.resolveWith(context,[data])})})}).fail(function(data){result.rejectWith(context,[data])});return result.promise()},display:function display(){var _this3=this;amiWebApp.lock();var result=$.Deferred();this.graph=typeof Viz!=="undefined"?Viz(this.dotString,"svg"):"";this.graph=this.graph.replace(/xlink:href="([^"]*)"/g,function(x,json){var jsonbObj=JSON.parse(amiWebApp.htmlToText(json));var attrs=["data-ctrl=\""+amiWebApp.textToHtml(jsonbObj["data-ctrl"])+"\"","data-ctrl-location=\""+amiWebApp.textToHtml(jsonbObj["data-ctrl-location"])+"\"","data-params=\""+amiWebApp.textToHtml(JSON.stringify(jsonbObj["data-params"]))+"\"","data-settings=\""+amiWebApp.textToHtml(JSON.stringify(jsonbObj["data-settings"]))+"\"","data-icon=\""+amiWebApp.textToHtml(jsonbObj["data-icon"])+"\"","data-title=\""+amiWebApp.textToHtml(jsonbObj["data-title"])+"\"","data-title-icon=\""+amiWebApp.textToHtml(jsonbObj["data-title-icon"])+"\""];return"xlink:href=\"#\" "+attrs.join(" ")});var doc=new DOMParser().parseFromString(this.graph,"image/svg+xml");var svg=$(doc.documentElement);svg.find("a[data-title-icon]").each(function(i,el){$("<tspan font-family=\"FontAwesome\">"+String.fromCharCode("0x"+$(el).attr("data-title-icon"))+"</tspan><tspan> </tspan>").prependTo($(el).find("text"))});this.graph=doc.documentElement.outerHTML;var dict={graph:this.graph};this.replaceHTML(this.patchId("#A0F6763F_DE29_5185_35C1_DCAA81E8C487"),this.fragmentGraph,{dict:dict}).done(function(){$(_this3.patchId("#A0F6763F_DE29_5185_35C1_DCAA81E8C487")+" a[data-ctrl]").click(function(e){e.preventDefault();_this3.createControlFromWebLink(_this3.getParent(),e.currentTarget,_this3.ctx)});amiWebApp.unlock();result.resolveWith(_this3,[result])});return result.promise()},switchDirection:function switchDirection(){var regex=new RegExp("(.*s*rankdirs*=s*\")([L][R]|[T][B])(\"s*.*)");var direction=this.dotString.match(regex)[2];if(direction==="LR"){this.dotString=this.dotString.replace(regex,"$1TB$3");this.direction="TB"}else if(direction==="TB"){this.dotString=this.dotString.replace(regex,"$1LR$3");this.direction="LR"}this.display()},exportSVG:function exportSVG(){var blob=new Blob([this.graph],{type:"image/svg+xml",endings:"native"});saveAs(blob,"graph.svg")},exportPNG:function exportPNG(){Viz.svgXmlToPngBase64(this.graph,1,this._exportPNG)},_exportPNG:function _exportPNG(err,data){var binary_string=window.atob(data);var len=binary_string.length;var bytes=new Uint8Array(len);for(var i=0;i<len;i++){bytes[i]=binary_string.charCodeAt(i)}var blob=new Blob([bytes.buffer],{type:"image/png",endings:"native"});saveAs(blob,"graph.png")},jsonToDot:function jsonToDot(json,filter){var _this4=this;var nodes=amiWebApp.jspath("..rowset{.@type===\"node\"}.row",json)||[];var edges=amiWebApp.jspath("..rowset{.@type===\"edge\"}.row",json)||[];var filteredGraph=new Map;[].concat(edges).forEach(function(edge){var source=amiWebApp.jspath("..field{.@name===\"SOURCE\"}.$",edge)[0]||"";var destination=amiWebApp.jspath("..field{.@name===\"DESTINATION\"}.$",edge)[0]||"";var destinations;if(filteredGraph.has(source)){destinations=filteredGraph.get(source)}else{destinations=[]}destinations.push(destination);filteredGraph.set(source,destinations)});var dot="digraph \"provenance\" {graph [rankdir=\""+this.direction+"\", ranksep=\"0.30\"]; node [width=\"7.5em\",height=\"0.3em\", fontcolor=\"#004bffff\", fontname=\"Arial\", fontsize=\"10.0\", shape=\"rectangle\"];";var regex=new RegExp(filter);[].concat(nodes).forEach(function(node){var label=amiWebApp.jspath("..field{.@name===\"LABEL\"}.$",node)[0]||"";if(filter!==""&&!regex.test(label)){var substitution=filteredGraph.get(label)||"";filteredGraph.delete(label);filteredGraph.forEach(function(children,source){[].concat(children).forEach(function(child,idx){if(child===label){if(substitution===""){filteredGraph.set(source,children.slice(0,idx).concat(children.slice(idx+1)))}else{filteredGraph.set(source,children.slice(0,idx).concat(substitution).concat(children.slice(idx+1)))}}})})}else{dot+="\""+label+"\" "+"[ "+"color=\""+(amiWebApp.jspath("..field{.@name===\"COLOUR\"}.$",node)[0]||"")+"\", "+"label=\""+label+"\" ";if((amiWebApp.jspath("..field{.@name===\"DISTANCE\"}.$",node)[0]||"")==="0"){dot+=", style =\"filled, rounded\""}else{dot+=", style =\"filled\""}dot+=", URL=\""+_this4.url(amiWebApp.jspath("..field{.@name===\"IDENTIFIER\"}.$",node)[0]||"",amiWebApp.jspath("..field{.@name===\"CATALOG\"}.$",node)[0]||"",amiWebApp.jspath("..field{.@name===\"ICON\"}.$",node)[0]||"")+"\" ";dot+="]"}});filteredGraph.forEach(function(destinations,source){[].concat(destinations).forEach(function(destination){var edge=amiWebApp.jspath("..{.field{.@name === \"SOURCE\"}.$ === \""+source+"\" && .field{.@name === \"DESTINATION\"}.$ === \""+destination+"\"}",edges)[0]||"";dot+="\""+source+"\" "+"->"+"\""+destination+"\" "+(edge===""?"[style=\"dashed\"]":"")})});dot+="}";return dot},url:function url(id,catalog,icon){return"{&quot;data-ctrl&quot;:&quot;elementInfo&quot;, "+"&quot;data-params&quot;:[&quot;"+catalog+"&quot;, &quot;dataset&quot;, &quot;identifier&quot;, &quot;"+id+"&quot;], "+"&quot;data-settings&quot;: {"+"&quot;expandedLinkedElements&quot;: ["+"{&quot;catalog&quot;: &quot;"+catalog+"&quot;, "+"&quot;entity&quot;: &quot;physicsParameterVals&quot;, "+"&quot;fields&quot;: [&quot;paramName&quot;, &quot;paramValue&quot;, &quot;units&quot;, &quot;physicsGroup&quot;], "+"&quot;keyValMode&quot;:true"+"}, {"+"&quot;catalog&quot;: &quot;"+catalog+"&quot;, "+"&quot;entity&quot;: &quot;dataset_extra&quot;, "+"&quot;fields&quot;: [&quot;field&quot;, &quot;value&quot;], "+"&quot;keyValMode&quot;:true"+"}]}, "+"&quot;data-icon&quot;: &quot;arrows-alt&quot;, "+"&quot;data-title&quot;: &quot;dataset&quot; "+(""===icon?"":", &quot;data-title-icon&quot;: &quot;"+icon+"&quot;")+"}"}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkdyYXBoQ3RybC5lczYuanMiXSwibmFtZXMiOlsiJEFNSUNsYXNzIiwiJGV4dGVuZHMiLCJhbWkiLCJDb250cm9sIiwiJGluaXQiLCJwYXJlbnQiLCJvd25lciIsIiRzdXBlciIsIm9uUmVhZHkiLCJhbWlXZWJBcHAiLCJsb2FkUmVzb3VyY2VzIiwib3JpZ2luVVJMIiwiZG9uZSIsImRhdGEiLCJmcmFnbWVudEdyYXBoQ3RybCIsImZyYWdtZW50R3JhcGgiLCJyZW5kZXIiLCJzZWxlY3RvciIsImNvbW1hbmQiLCJzZXR0aW5ncyIsInJlc3VsdCIsIiQiLCJEZWZlcnJlZCIsInNldHVwIiwiY29udGV4dCIsImRpcmVjdGlvbiIsImFtaUNvbW1hbmQiLCJleGVjdXRlIiwiZG90U3RyaW5nIiwianNwYXRoIiwibW9kZSIsImpzb24iLCJqc29uVG9Eb3QiLCJyZXBsYWNlSFRNTCIsImRpY3QiLCJwYXRjaElkIiwiY2hhbmdlIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic3dpdGNoRGlyZWN0aW9uIiwiY2xpY2siLCJleHBvcnRTVkciLCJleHBvcnRQTkciLCJ2YWwiLCJ0cmltIiwiZGlzcGxheSIsImtleXByZXNzIiwia2V5Q29kZSIsInJlc29sdmVXaXRoIiwiZmFpbCIsInJlamVjdFdpdGgiLCJwcm9taXNlIiwibG9jayIsImdyYXBoIiwiVml6IiwicmVwbGFjZSIsIngiLCJqc29uYk9iaiIsIkpTT04iLCJwYXJzZSIsImh0bWxUb1RleHQiLCJhdHRycyIsInRleHRUb0h0bWwiLCJzdHJpbmdpZnkiLCJqb2luIiwiZG9jIiwiRE9NUGFyc2VyIiwicGFyc2VGcm9tU3RyaW5nIiwic3ZnIiwiZG9jdW1lbnRFbGVtZW50IiwiZmluZCIsImVhY2giLCJpIiwiZWwiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJhdHRyIiwicHJlcGVuZFRvIiwib3V0ZXJIVE1MIiwiY3JlYXRlQ29udHJvbEZyb21XZWJMaW5rIiwiZ2V0UGFyZW50IiwiY3VycmVudFRhcmdldCIsImN0eCIsInVubG9jayIsInJlZ2V4IiwiUmVnRXhwIiwibWF0Y2giLCJibG9iIiwiQmxvYiIsInR5cGUiLCJlbmRpbmdzIiwic2F2ZUFzIiwic3ZnWG1sVG9QbmdCYXNlNjQiLCJfZXhwb3J0UE5HIiwiZXJyIiwiYmluYXJ5X3N0cmluZyIsIndpbmRvdyIsImF0b2IiLCJsZW4iLCJsZW5ndGgiLCJieXRlcyIsIlVpbnQ4QXJyYXkiLCJjaGFyQ29kZUF0IiwiYnVmZmVyIiwiZmlsdGVyIiwibm9kZXMiLCJlZGdlcyIsImZpbHRlcmVkR3JhcGgiLCJNYXAiLCJmb3JFYWNoIiwiZWRnZSIsInNvdXJjZSIsImRlc3RpbmF0aW9uIiwiZGVzdGluYXRpb25zIiwiaGFzIiwiZ2V0IiwicHVzaCIsInNldCIsImRvdCIsIm5vZGUiLCJsYWJlbCIsInRlc3QiLCJzdWJzdGl0dXRpb24iLCJkZWxldGUiLCJjaGlsZHJlbiIsImNoaWxkIiwiaWR4Iiwic2xpY2UiLCJjb25jYXQiLCJ1cmwiLCJpZCIsImNhdGFsb2ciLCJpY29uIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7O0dBZ0JBQSxTQUFTLENBQUMsV0FBRCxDQUFjLENBR3RCQyxRQUFRLENBQUVDLEdBQUcsQ0FBQ0MsT0FIUSxDQU90QkMsS0FBSyxDQUFFLGVBQVNDLE1BQVQsQ0FBaUJDLEtBQWpCLENBQ1AsQ0FDQyxLQUFLQyxNQUFMLENBQVlILEtBQVosQ0FBa0JDLE1BQWxCLENBQTBCQyxLQUExQixDQUNBLENBVnFCLENBY3RCRSxPQUFPLENBQUUsa0JBQ1QsZ0JBQ0MsTUFBT0MsQ0FBQUEsU0FBUyxDQUFDQyxhQUFWLENBQXdCLENBQzlCRCxTQUFTLENBQUNFLFNBQVYsQ0FBc0IscUNBRFEsQ0FFOUJGLFNBQVMsQ0FBQ0UsU0FBVixDQUFzQixpQ0FGUSxDQUc5QkYsU0FBUyxDQUFDRSxTQUFWLENBQXNCLDBCQUhRLENBSTlCRixTQUFTLENBQUNFLFNBQVYsQ0FBc0Isa0JBSlEsQ0FLOUJGLFNBQVMsQ0FBQ0UsU0FBVixDQUFzQiwyQkFMUSxDQUF4QixF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QWRHLENBZUgsOENBZkcsRUFnQkYsS0FBT0MsSUFBUCxDQUFjLEVBQWQsQ0FBbUIsd0NBQTBDQSxJQUExQyxDQUFpRCxRQWhCbEUsRUFpQkgsR0FDSixDQXJhcUIsQ0FBZCxDQUFUIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBTUkgV2ViIEZyYW1ld29ya1xuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC1YWFhYIFRoZSBBTUkgVGVhbSAvIExQU0MgLyBJTjJQM1xuICpcbiAqIFRoaXMgZmlsZSBtdXN0IGJlIHVzZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBDZUNJTEwtQzpcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1lbi5odG1sXG4gKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZnIuaHRtbFxuICpcbiAqXG4gKiBAZ2xvYmFsIFZpeiwgc2F2ZUFzXG4gKlxuICovXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4kQU1JQ2xhc3MoJ0dyYXBoQ3RybCcsIHtcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQkZXh0ZW5kczogYW1pLkNvbnRyb2wsXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHQkaW5pdDogZnVuY3Rpb24ocGFyZW50LCBvd25lcilcblx0e1xuXHRcdHRoaXMuJHN1cGVyLiRpbml0KHBhcmVudCwgb3duZXIpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0b25SZWFkeTogZnVuY3Rpb24oKVxuXHR7XG5cdFx0cmV0dXJuIGFtaVdlYkFwcC5sb2FkUmVzb3VyY2VzKFtcblx0XHRcdGFtaVdlYkFwcC5vcmlnaW5VUkwgKyAnL2NvbnRyb2xzL0dyYXBoL3R3aWcvR3JhcGhDdHJsLnR3aWcnLFxuXHRcdFx0YW1pV2ViQXBwLm9yaWdpblVSTCArICcvY29udHJvbHMvR3JhcGgvdHdpZy9ncmFwaC50d2lnJyxcblx0XHRcdGFtaVdlYkFwcC5vcmlnaW5VUkwgKyAnL2pzLzNyZC1wYXJ0eS92aXoubWluLmpzJyxcblx0XHRcdGFtaVdlYkFwcC5vcmlnaW5VUkwgKyAnL2Nzcy9hbWkubWluLmNzcycsXG5cdFx0XHRhbWlXZWJBcHAub3JpZ2luVVJMICsgJy9jc3MvZm9udC1hd2Vzb21lLm1pbi5jc3MnLFxuXHRcdF0pLmRvbmUoKGRhdGEpID0+IHtcblxuXHRcdFx0dGhpcy5mcmFnbWVudEdyYXBoQ3RybCA9IGRhdGFbMF07XG5cdFx0XHR0aGlzLmZyYWdtZW50R3JhcGggPSBkYXRhWzFdO1xuXHRcdH0pO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKHNlbGVjdG9yLCBjb21tYW5kLCBzZXR0aW5ncylcbiAgICB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgW2NvbnRleHQsIGRpcmVjdGlvbl0gPSBhbWlXZWJBcHAuc2V0dXAoWydjb250ZXh0JywgJ2RpcmVjdGlvbiddLCBbcmVzdWx0LCAnTFInXSwgc2V0dGluZ3MpO1xuXG5cdFx0dGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoY29tbWFuZCkuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0aWYoKHRoaXMuZG90U3RyaW5nID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5yb3dzZXR7LkB0eXBlPT09XCJncmFwaFwifS5yb3cuZmllbGR7LkBuYW1lPT09XCJkb3RcIn0uJCcsIGRhdGEpWzBdIHx8ICcnKSAhPT0gJycpXG5cdFx0XHR7XG5cdFx0XHRcdHRoaXMubW9kZT0nZG90Jztcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0dGhpcy5qc29uID0gZGF0YTtcblx0XHRcdFx0dGhpcy5kb3RTdHJpbmcgPSB0aGlzLmpzb25Ub0RvdCh0aGlzLmpzb24sJycpO1xuXHRcdFx0XHR0aGlzLm1vZGUgPSAnanNvbic7XG5cdFx0XHR9XG5cblx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHR0aGlzLnJlcGxhY2VIVE1MKHNlbGVjdG9yLCB0aGlzLmZyYWdtZW50R3JhcGhDdHJsLCB7ZGljdDoge21vZGU6IHRoaXMubW9kZX19KS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdCQodGhpcy5wYXRjaElkKCcjQThFN0M4OERfN0I3OF9CMjIxXzBCQ0JfNkVGMUY5Q0MzQzE1JykpLmNoYW5nZSgoZSkgPT4ge1xuXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdFx0dGhpcy5zd2l0Y2hEaXJlY3Rpb24oKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHQkKHRoaXMucGF0Y2hJZCgnI0U5MDE2OEM0X0U0QkRfQUNDOF8wODVGXzk5NTNENkNGNzg5RicpKS5jbGljaygoZSkgPT4ge1xuXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG5cdFx0XHRcdFx0dGhpcy5leHBvcnRTVkcoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JCh0aGlzLnBhdGNoSWQoJyNENjhFNDlGOV9BMEM3X0MxNURfODMyM184QkEyMTU4NTY0MjgnKSkuY2xpY2soKGUpID0+IHtcblxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdHRoaXMuZXhwb3J0UE5HKCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHRcdC8qIEZJTFRFUiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0JCh0aGlzLnBhdGNoSWQoJyNFQzQ1OTE2Ql9EQzc3X0FEMjdfODExN19FODRGQzI1OTgxOTYnKSkuY2xpY2soKGUpID0+IHtcblxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdHRoaXMuZG90U3RyaW5nID0gdGhpcy5qc29uVG9Eb3QodGhpcy5qc29uLCQoJyMnICsgdGhpcy5wYXRjaElkKCdEOTI1NkIwMV8zREJFXzZFNTFfQUE5MV9CMkY4MDk0NDYwN0QnKSkudmFsKCkudHJpbSgpKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JCh0aGlzLnBhdGNoSWQoJyNEOTI1NkIwMV8zREJFXzZFNTFfQUE5MV9CMkY4MDk0NDYwN0QnKSkua2V5cHJlc3MoKGUpID0+IHtcblxuXHRcdFx0XHRcdGlmKGUua2V5Q29kZSA9PSAxMylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHR0aGlzLmRvdFN0cmluZyA9IHRoaXMuanNvblRvRG90KHRoaXMuanNvbiwkKCcjJyArIHRoaXMucGF0Y2hJZCgnRDkyNTZCMDFfM0RCRV82RTUxX0FBOTFfQjJGODA5NDQ2MDdEJykpLnZhbCgpLnRyaW0oKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0dGhpcy5kaXNwbGF5KCkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRyZXN1bHQucmVzb2x2ZVdpdGgoY29udGV4dCwgW2RhdGFdKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRcdH0pO1xuXG5cdFx0fSkuZmFpbCgoZGF0YSkgPT4ge1xuXG5cdFx0XHRyZXN1bHQucmVqZWN0V2l0aChjb250ZXh0LCBbZGF0YV0pO1xuXHRcdH0pO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0cmV0dXJuIHJlc3VsdC5wcm9taXNlKCk7XG5cbiAgICB9LFxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgZGlzcGxheTogZnVuY3Rpb24oKVxuICAgIHtcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9ICQuRGVmZXJyZWQoKTtcblxuICAgICAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgICAgICAgdGhpcy5ncmFwaCA9IHR5cGVvZiBWaXogIT09ICd1bmRlZmluZWQnID8gVml6KHRoaXMuZG90U3RyaW5nLCAnc3ZnJykgOiAnJztcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHQvKiBHUkFQSCBQT1NUIFRSRUFUTUVOVCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0dGhpcy5ncmFwaCA9IHRoaXMuZ3JhcGgucmVwbGFjZSgveGxpbms6aHJlZj1cIihbXlwiXSopXCIvZywgKHgsIGpzb24pID0+IHtcblxuXHRcdFx0Y29uc3QganNvbmJPYmogPSBKU09OLnBhcnNlKGFtaVdlYkFwcC5odG1sVG9UZXh0KGpzb24pKTtcblxuXHRcdFx0Y29uc3QgYXR0cnMgPSBbXG5cdFx0XHRcdCdkYXRhLWN0cmw9XCInICsgYW1pV2ViQXBwLnRleHRUb0h0bWwoanNvbmJPYmpbJ2RhdGEtY3RybCddKSArICdcIicsXG5cdFx0XHRcdCdkYXRhLWN0cmwtbG9jYXRpb249XCInICsgYW1pV2ViQXBwLnRleHRUb0h0bWwoanNvbmJPYmpbJ2RhdGEtY3RybC1sb2NhdGlvbiddKSArICdcIicsXG5cdFx0XHRcdCdkYXRhLXBhcmFtcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvSHRtbChKU09OLnN0cmluZ2lmeShqc29uYk9ialsnZGF0YS1wYXJhbXMnXSkpICsgJ1wiJyxcblx0XHRcdFx0J2RhdGEtc2V0dGluZ3M9XCInICsgYW1pV2ViQXBwLnRleHRUb0h0bWwoSlNPTi5zdHJpbmdpZnkoanNvbmJPYmpbJ2RhdGEtc2V0dGluZ3MnXSkpICsgJ1wiJyxcblx0XHRcdFx0J2RhdGEtaWNvbj1cIicgKyBhbWlXZWJBcHAudGV4dFRvSHRtbChqc29uYk9ialsnZGF0YS1pY29uJ10pICsgJ1wiJyxcblx0XHRcdFx0J2RhdGEtdGl0bGU9XCInICsgYW1pV2ViQXBwLnRleHRUb0h0bWwoanNvbmJPYmpbJ2RhdGEtdGl0bGUnXSkgKyAnXCInLFxuXHRcdFx0XHQnZGF0YS10aXRsZS1pY29uPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9IdG1sKGpzb25iT2JqWydkYXRhLXRpdGxlLWljb24nXSkgKyAnXCInLFxuXHRcdFx0XTtcblxuXHRcdFx0cmV0dXJuICd4bGluazpocmVmPVwiI1wiICcgKyBhdHRycy5qb2luKCcgJyk7XG5cdFx0fSk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGNvbnN0IGRvYyA9IG5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcodGhpcy5ncmFwaCwgJ2ltYWdlL3N2Zyt4bWwnKTtcblxuXHRcdGNvbnN0IHN2ZyA9ICQoZG9jLmRvY3VtZW50RWxlbWVudCk7XG5cblx0XHRzdmcuZmluZCgnYVtkYXRhLXRpdGxlLWljb25dJykuZWFjaCgoaSwgZWwpID0+IHtcblxuXHRcdFx0JCgnPHRzcGFuIGZvbnQtZmFtaWx5PVwiRm9udEF3ZXNvbWVcIj4nICsgU3RyaW5nLmZyb21DaGFyQ29kZSgnMHgnICsgJChlbCkuYXR0cignZGF0YS10aXRsZS1pY29uJykpICsgJzwvdHNwYW4+PHRzcGFuPiA8L3RzcGFuPicpLnByZXBlbmRUbygkKGVsKS5maW5kKCd0ZXh0JykpO1xuXHRcdH0pO1xuXG5cdFx0dGhpcy5ncmFwaCA9IGRvYy5kb2N1bWVudEVsZW1lbnQub3V0ZXJIVE1MO1xuXG4gICAgICAgIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGNvbnN0IGRpY3QgPSB7XG5cdFx0XHRncmFwaCA6IHRoaXMuZ3JhcGgsXG5cdFx0fTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0dGhpcy5yZXBsYWNlSFRNTCh0aGlzLnBhdGNoSWQoJyNBMEY2NzYzRl9ERTI5XzUxODVfMzVDMV9EQ0FBODFFOEM0ODcnKSwgdGhpcy5mcmFnbWVudEdyYXBoLCB7ZGljdDogZGljdH0pLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHQkKHRoaXMucGF0Y2hJZCgnI0EwRjY3NjNGX0RFMjlfNTE4NV8zNUMxX0RDQUE4MUU4QzQ4NycpICsgJyBhW2RhdGEtY3RybF0nKS5jbGljaygoZSkgPT4ge1xuXG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHR0aGlzLmNyZWF0ZUNvbnRyb2xGcm9tV2ViTGluayh0aGlzLmdldFBhcmVudCgpLCBlLmN1cnJlbnRUYXJnZXQsIHRoaXMuY3R4KTtcblx0XHRcdH0pO1xuXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0cmVzdWx0LnJlc29sdmVXaXRoKHRoaXMsIFtyZXN1bHRdKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiByZXN1bHQucHJvbWlzZSgpO1xuICAgIH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRzd2l0Y2hEaXJlY3Rpb246IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgIFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgIFx0Y29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKCcoLipcXHMqcmFua2Rpclxccyo9XFxzKlwiKShbTF1bUl18W1RdW0JdKShcIlxccyouKiknKTtcblxuICAgICBcdGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMuZG90U3RyaW5nLm1hdGNoKHJlZ2V4KVsyXTtcblxuICAgICBcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgICBcdGlmKGRpcmVjdGlvbiA9PT0gJ0xSJyApXG4gICAgIFx0e1xuICAgICBcdFx0dGhpcy5kb3RTdHJpbmcgPSB0aGlzLmRvdFN0cmluZy5yZXBsYWNlKHJlZ2V4LCAnJDFUQiQzJyk7XG4gICAgIFx0XHR0aGlzLmRpcmVjdGlvbiA9ICdUQic7XG4gICAgIFx0fVxuICAgICBcdGVsc2UgaWYoZGlyZWN0aW9uID09PSAnVEInIClcbiAgICAgXHR7XG5cdFx0XHR0aGlzLmRvdFN0cmluZyA9IHRoaXMuZG90U3RyaW5nLnJlcGxhY2UocmVnZXgsICckMUxSJDMnKTtcblx0XHRcdHRoaXMuZGlyZWN0aW9uID0gJ0xSJztcbiAgICAgXHR9XG5cblx0XHR0aGlzLmRpc3BsYXkoKTtcbiAgICB9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0ZXhwb3J0U1ZHOiBmdW5jdGlvbigpXG5cdHtcblx0XHRjb25zdCBibG9iID0gbmV3IEJsb2IoW3RoaXMuZ3JhcGhdLCB7XG5cdFx0XHR0eXBlOiAnaW1hZ2Uvc3ZnK3htbCcsXG5cdFx0XHRlbmRpbmdzIDogJ25hdGl2ZScsXG5cdFx0fSk7XG5cblx0XHRzYXZlQXMoYmxvYiwgJ2dyYXBoLnN2ZycpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0ZXhwb3J0UE5HOiBmdW5jdGlvbigpXG5cdHtcblx0XHRWaXouc3ZnWG1sVG9QbmdCYXNlNjQodGhpcy5ncmFwaCwgMSwgdGhpcy5fZXhwb3J0UE5HKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdF9leHBvcnRQTkc6IGZ1bmN0aW9uKGVyciwgZGF0YSlcbiAgICB7XG5cdFx0bGV0IGJpbmFyeV9zdHJpbmcgPSB3aW5kb3cuYXRvYihkYXRhKTtcblx0XHRsZXQgbGVuID0gYmluYXJ5X3N0cmluZy5sZW5ndGg7XG5cdFx0bGV0IGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkobGVuKTtcblxuXHRcdGZvcihsZXQgaSA9IDA7IGkgPCBsZW47IGkrKylcblx0XHR7XG5cdFx0XHRieXRlc1tpXSA9IGJpbmFyeV9zdHJpbmcuY2hhckNvZGVBdChpKTtcblx0XHR9XG5cblx0XHRjb25zdCBibG9iID0gbmV3IEJsb2IoW2J5dGVzLmJ1ZmZlcl0sIHtcblx0XHRcdHR5cGU6ICdpbWFnZS9wbmcnLFxuXHRcdFx0ZW5kaW5ncyA6ICduYXRpdmUnLFxuXHRcdH0pO1xuXG5cdFx0c2F2ZUFzKGJsb2IsICdncmFwaC5wbmcnKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGpzb25Ub0RvdDogZnVuY3Rpb24oanNvbiwgZmlsdGVyKVxuICAgIHtcblx0XHRsZXQgbm9kZXMgPSBhbWlXZWJBcHAuanNwYXRoKCcuLnJvd3NldHsuQHR5cGU9PT1cIm5vZGVcIn0ucm93JywganNvbikgfHwgW107XG5cdFx0bGV0IGVkZ2VzID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5yb3dzZXR7LkB0eXBlPT09XCJlZGdlXCJ9LnJvdycsIGpzb24pIHx8IFtdO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdC8qIElOSVQgU1RSVUNUVVJFICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRsZXQgZmlsdGVyZWRHcmFwaCA9IG5ldyBNYXAoKTtcblxuXHRcdFsuLi5lZGdlc10uZm9yRWFjaCgoZWRnZSkgPT4ge1xuXG5cdFx0XHRsZXQgc291cmNlID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cIlNPVVJDRVwifS4kJywgZWRnZSlbMF0gfHwgJyc7XG5cdFx0XHRsZXQgZGVzdGluYXRpb24gPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiREVTVElOQVRJT05cIn0uJCcsIGVkZ2UpWzBdIHx8ICcnO1xuXG5cdFx0XHRsZXQgZGVzdGluYXRpb25zO1xuXG5cdFx0XHRpZihmaWx0ZXJlZEdyYXBoLmhhcyhzb3VyY2UpKVxuXHRcdFx0e1xuXHRcdFx0XHRkZXN0aW5hdGlvbnMgPSBmaWx0ZXJlZEdyYXBoLmdldChzb3VyY2UpO1xuXHRcdFx0fVxuXHRcdFx0ZWxzZVxuXHRcdFx0e1xuXHRcdFx0XHRkZXN0aW5hdGlvbnMgPSBbXTtcblx0XHRcdH1cblxuXHRcdFx0ZGVzdGluYXRpb25zLnB1c2goZGVzdGluYXRpb24pO1xuXHRcdFx0ZmlsdGVyZWRHcmFwaC5zZXQoc291cmNlLCBkZXN0aW5hdGlvbnMpO1xuXHRcdH0pO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgXHRsZXQgZG90ID0gJ2RpZ3JhcGggXCJwcm92ZW5hbmNlXCIge2dyYXBoIFtyYW5rZGlyPVwiJyArIHRoaXMuZGlyZWN0aW9uICsgJ1wiLCByYW5rc2VwPVwiMC4zMFwiXTsgbm9kZSBbd2lkdGg9XCI3LjVlbVwiLGhlaWdodD1cIjAuM2VtXCIsIGZvbnRjb2xvcj1cIiMwMDRiZmZmZlwiLCBmb250bmFtZT1cIkFyaWFsXCIsIGZvbnRzaXplPVwiMTAuMFwiLCBzaGFwZT1cInJlY3RhbmdsZVwiXTsnO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgcmVnZXggPSBuZXcgUmVnRXhwKGZpbHRlcik7XG5cblx0XHRbLi4ubm9kZXNdLmZvckVhY2goKG5vZGUpID0+IHtcblxuXHRcdFx0bGV0IGxhYmVsID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cIkxBQkVMXCJ9LiQnLCBub2RlKVswXSB8fCAnJztcblxuXHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHQvKiBETyBFREdFIEZJTFRFUklORyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cblx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRpZihmaWx0ZXIgIT09ICcnICYmICFyZWdleC50ZXN0KGxhYmVsKSlcblx0XHRcdHtcblx0XHRcdFx0bGV0IHN1YnN0aXR1dGlvbiA9IGZpbHRlcmVkR3JhcGguZ2V0KGxhYmVsKSB8fCAnJztcblx0XHRcdFx0ZmlsdGVyZWRHcmFwaC5kZWxldGUobGFiZWwpO1xuXG5cdFx0XHRcdGZpbHRlcmVkR3JhcGguZm9yRWFjaCgoY2hpbGRyZW4sIHNvdXJjZSkgPT4ge1xuXG5cdFx0XHRcdFx0Wy4uLmNoaWxkcmVuXS5mb3JFYWNoKChjaGlsZCxpZHgpID0+IHtcblxuXHRcdFx0XHRcdFx0aWYoY2hpbGQgPT09IGxhYmVsKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRpZihzdWJzdGl0dXRpb24gPT09ICcnKVxuXHRcdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdFx0ZmlsdGVyZWRHcmFwaC5zZXQoc291cmNlLCBjaGlsZHJlbi5zbGljZSgwLCBpZHgpLmNvbmNhdChjaGlsZHJlbi5zbGljZShpZHggKyAxKSkpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRcdGZpbHRlcmVkR3JhcGguc2V0KHNvdXJjZSwgY2hpbGRyZW4uc2xpY2UoMCwgaWR4KS5jb25jYXQoc3Vic3RpdHV0aW9uKS5jb25jYXQoY2hpbGRyZW4uc2xpY2UoaWR4ICsgMSkpKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuICAgICAgICAgICAgICAgICB9KTtcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdHtcblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRkb3QgKz0gJ1wiJyArIGxhYmVsICsgJ1wiICdcblx0XHRcdFx0XHQrICdbICdcblx0XHRcdFx0XHQrICdjb2xvcj1cIicgKyAoYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cIkNPTE9VUlwifS4kJywgbm9kZSlbMF0gfHwgJycpICsgJ1wiLCAnXG5cdFx0XHRcdFx0KyAnbGFiZWw9XCInICsgbGFiZWwgKyAnXCIgJztcblxuXHRcdFx0XHRcdGlmKChhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiRElTVEFOQ0VcIn0uJCcsIG5vZGUpWzBdIHx8ICcnKSA9PT0gJzAnKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGRvdCArPSAnLCBzdHlsZSA9XCJmaWxsZWQsIHJvdW5kZWRcIic7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRkb3QgKz0gJywgc3R5bGUgPVwiZmlsbGVkXCInO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGRvdFx0Kz0gJywgVVJMPVwiJyArIHRoaXMudXJsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdChhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiSURFTlRJRklFUlwifS4kJywgbm9kZSlbMF0gfHwgJycpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdChhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiQ0FUQUxPR1wifS4kJywgbm9kZSlbMF0gfHwgJycpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdChhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiSUNPTlwifS4kJywgbm9kZSlbMF0gfHwgJycpLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQgICkgKyAnXCIgJztcblxuXHRcdFx0XHRkb3QgKz0gJ10nO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4gICAgXHRcdH1cbiAgICBcdH0pO1xuXG4gICAgXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRmaWx0ZXJlZEdyYXBoLmZvckVhY2goKGRlc3RpbmF0aW9ucyxzb3VyY2UpID0+IHtcblxuXHRcdFx0Wy4uLmRlc3RpbmF0aW9uc10uZm9yRWFjaCgoZGVzdGluYXRpb24pID0+IHtcblxuXHRcdFx0bGV0IGVkZ2UgPSAoYW1pV2ViQXBwLmpzcGF0aCgnLi57LmZpZWxkey5AbmFtZSA9PT0gXCJTT1VSQ0VcIn0uJCA9PT0gXCInKyBzb3VyY2UgKydcIiAmJiAuZmllbGR7LkBuYW1lID09PSBcIkRFU1RJTkFUSU9OXCJ9LiQgPT09IFwiJysgZGVzdGluYXRpb24gKydcIn0nLCBlZGdlcylbMF0gfHwgJycpO1xuXG5cdFx0XHRkb3QgKz0gJ1wiJyArIHNvdXJjZSArICdcIiAnXG5cdFx0XHRcdCsgJy0+J1xuXHRcdFx0XHQrICdcIicgKyBkZXN0aW5hdGlvbiArICdcIiAnXG5cdFx0XHRcdCsgKGVkZ2UgPT09ICcnID8gJ1tzdHlsZT1cImRhc2hlZFwiXScgOiAnJylcblx0XHRcdH0pXG5cdFx0fSk7XG5cbiAgICBcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAgIFx0ZG90ICs9ICd9JztcblxuICAgIFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gICAgXHRyZXR1cm4gZG90O1xuICAgIH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHR1cmw6IGZ1bmN0aW9uKGlkLCBjYXRhbG9nLCBpY29uKVxuXHR7XG5cdFx0cmV0dXJuICd7JnF1b3Q7ZGF0YS1jdHJsJnF1b3Q7OiZxdW90O2VsZW1lbnRJbmZvJnF1b3Q7LCAnXG5cdFx0XHQgKyAnJnF1b3Q7ZGF0YS1wYXJhbXMmcXVvdDs6WyZxdW90OycgKyBjYXRhbG9nICsgJyZxdW90OywgJnF1b3Q7ZGF0YXNldCZxdW90OywgJnF1b3Q7aWRlbnRpZmllciZxdW90OywgJnF1b3Q7JyArIGlkICsgJyZxdW90O10sICdcblx0XHRcdCArICcmcXVvdDtkYXRhLXNldHRpbmdzJnF1b3Q7OiB7J1xuXHRcdFx0ICsgJyZxdW90O2V4cGFuZGVkTGlua2VkRWxlbWVudHMmcXVvdDs6IFsnXG5cdFx0XHQgKyAneyZxdW90O2NhdGFsb2cmcXVvdDs6ICZxdW90OycrIGNhdGFsb2cgKyAnJnF1b3Q7LCAnXG5cdFx0XHQgKyAnJnF1b3Q7ZW50aXR5JnF1b3Q7OiAmcXVvdDtwaHlzaWNzUGFyYW1ldGVyVmFscyZxdW90OywgJ1xuXHRcdFx0ICsgJyZxdW90O2ZpZWxkcyZxdW90OzogWyZxdW90O3BhcmFtTmFtZSZxdW90OywgJnF1b3Q7cGFyYW1WYWx1ZSZxdW90OywgJnF1b3Q7dW5pdHMmcXVvdDssICZxdW90O3BoeXNpY3NHcm91cCZxdW90O10sICdcblx0XHRcdCArICcmcXVvdDtrZXlWYWxNb2RlJnF1b3Q7OnRydWUnXG5cdFx0XHQgKyAnfSwgeydcblx0XHRcdCArICcmcXVvdDtjYXRhbG9nJnF1b3Q7OiAmcXVvdDsnICsgY2F0YWxvZyArICcmcXVvdDssICdcblx0XHRcdCArICcmcXVvdDtlbnRpdHkmcXVvdDs6ICZxdW90O2RhdGFzZXRfZXh0cmEmcXVvdDssICdcblx0XHRcdCArICcmcXVvdDtmaWVsZHMmcXVvdDs6IFsmcXVvdDtmaWVsZCZxdW90OywgJnF1b3Q7dmFsdWUmcXVvdDtdLCAnXG5cdFx0XHQgKyAnJnF1b3Q7a2V5VmFsTW9kZSZxdW90Ozp0cnVlJ1xuXHRcdFx0ICsgJ31dfSwgJ1xuXHRcdFx0ICsgJyZxdW90O2RhdGEtaWNvbiZxdW90OzogJnF1b3Q7YXJyb3dzLWFsdCZxdW90OywgJ1xuXHRcdFx0ICsgJyZxdW90O2RhdGEtdGl0bGUmcXVvdDs6ICZxdW90O2RhdGFzZXQmcXVvdDsgJ1xuXHRcdFx0ICsgKCcnID09PSBpY29uID8gJycgOiAnLCAmcXVvdDtkYXRhLXRpdGxlLWljb24mcXVvdDs6ICZxdW90OycgKyBpY29uICsgJyZxdW90OycpXG5cdFx0XHQgKyAnfSc7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qLyJdfQ==
