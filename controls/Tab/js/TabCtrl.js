/*!
 * AMI Web Framework
 *
 * Copyright (c) 2014-XXXX The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 */$AMIClass("TabCtrl",{$extends:ami.Control,$init:function $init(parent,owner){this.$super.$init(parent,owner);this._previousActiveTab="";this._cnt=0},onReady:function onReady(){var _this=this;return amiWebApp.loadResources([amiWebApp.originURL+"/controls/Tab/twig/TabCtrl.twig",amiWebApp.originURL+"/controls/Tab/twig/nav_item.twig",amiWebApp.originURL+"/controls/Tab/twig/tab_pane.twig"]).done(function(data){_this.fragmentTabCtrl=data[0];_this.fragmentNavItem=data[1];_this.fragmentTabPane=data[2]})},render:function render(selector,settings){var _this2=this;var result=$.Deferred();var _amiWebApp$setup=amiWebApp.setup(["context","card","closable","firstVisible"],[result,true,true,true],settings);this._context=_amiWebApp$setup[0];this._card=_amiWebApp$setup[1];this._closable=_amiWebApp$setup[2];this._firstVisible=_amiWebApp$setup[3];var dict={"card":this._card};this.replaceHTML(this._selector=selector,this.fragmentTabCtrl,{dict:dict}).done(function(){result.resolveWith(_this2._context)});return result.promise()},_getTabEl:function _getTabEl(tabId){return $(this._selector+" .nav-link[href=\"#"+tabId+"\"]:parent")},_getLinkEl:function _getLinkEl(tabId){return $(this._selector+" .nav-link[href=\"#"+tabId+"\"]")},_getPaneEl:function _getPaneEl(tabId){return $(this._selector+" #"+tabId)},prependItem:function prependItem(title,settings){var _this3=this;var result=$.Deferred();var _amiWebApp$setup2=amiWebApp.setup(["context","height","active","closable","firstVisible"],[result,"auto",true,this._closable,this._firstVisible],settings),context=_amiWebApp$setup2[0],height=_amiWebApp$setup2[1],active=_amiWebApp$setup2[2],closable=_amiWebApp$setup2[3],firstVisible=_amiWebApp$setup2[4];var tabId=this.patchId("F3EF6D3D_723B_F5FB_F299_E0AA9CA0914D")+"_"+this._cnt;var dict={id:tabId,title:title,height:height,closable:closable};var tabSelector=this._card?".card > .card-header > .nav-tabs":".nav-tabs";var contentSelector=this._card?".card > .card-body > .tab-content":".tab-content";this.prependHTML(this._selector+" > "+tabSelector,this.fragmentNavItem,{dict:dict}).done(function(){_this3.prependHTML(_this3._selector+" > "+contentSelector,_this3.fragmentTabPane,{dict:dict}).done(function(){_this3._getTabEl(tabId).find(".fa-times").click(function(e){_this3.removeTab(tabId);e.preventDefault()});_this3._getLinkEl(tabId).on("show.bs.tab",function(e){_this3._previousActiveTab=e.relatedTarget?$(e.relatedTarget).attr("href").substring(1):""});if(_this3._cnt++===0||active){_this3._getLinkEl(tabId).tab("show")}var els=$(_this3._selector+" > "+tabSelector);if(els.length===1&&firstVisible===false){els.hide()}else{els.show()}result.resolveWith(context,["#"+tabId])})});return result.promise()},appendItem:function appendItem(title,settings){var _this4=this;var result=$.Deferred();var _amiWebApp$setup3=amiWebApp.setup(["context","height","active","closable","firstVisible"],[result,"auto",true,this._closable,this._firstVisible],settings),context=_amiWebApp$setup3[0],height=_amiWebApp$setup3[1],active=_amiWebApp$setup3[2],closable=_amiWebApp$setup3[3],firstVisible=_amiWebApp$setup3[4];var tabId=this.patchId("F3EF6D3D_723B_F5FB_F299_E0AA9CA0914D")+"_"+this._cnt;var dict={id:tabId,title:title,height:height,closable:closable};var tabSelector=this._card?".card > .card-header > .nav-tabs":".nav-tabs";var contentSelector=this._card?".card > .card-body > .tab-content":".tab-content";this.appendHTML(this._selector+" > "+tabSelector,this.fragmentNavItem,{dict:dict}).done(function(){_this4.appendHTML(_this4._selector+" > "+contentSelector,_this4.fragmentTabPane,{dict:dict}).done(function(){_this4._getTabEl(tabId).find(".fa-times").click(function(e){_this4.removeTab(tabId);e.preventDefault()});_this4._getLinkEl(tabId).on("show.bs.tab",function(e){_this4._previousActiveTab=e.relatedTarget?$(e.relatedTarget).attr("href").substring(1):""});if(_this4._cnt++===0||active){_this4._getLinkEl(tabId).tab("show")}var els=$(_this4._selector+" > "+tabSelector);if(els.length===1&&firstVisible===false){els.hide()}else{els.show()}result.resolveWith(context,["#"+tabId])})});return result.promise()},removeTab:function removeTab(tabId){this._getTabEl(tabId).remove();this._getPaneEl(tabId).remove();if(this._previousActiveTab){this._getLinkEl(this._previousActiveTab).tab("show")}else{$(this._selector+" .nav-link:first").tab("show")}},removeTabs:function removeTabs(){$(this._selector+" .nav-tabs").empty();$(this._selector+" .tab-content").empty()},isEmpty:function isEmpty(){return $(this._selector+" .nav-tabs").is(":empty")||$(this._selector+" .nav-content").is(":empty")}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRhYkN0cmwuZXM2LmpzIl0sIm5hbWVzIjpbIiRBTUlDbGFzcyIsIiRleHRlbmRzIiwiYW1pIiwiQ29udHJvbCIsIiRpbml0IiwicGFyZW50Iiwib3duZXIiLCIkc3VwZXIiLCJfcHJldmlvdXNBY3RpdmVUYWIiLCJfY250Iiwib25SZWFkeSIsImFtaVdlYkFwcCIsImxvYWRSZXNvdXJjZXMiLCJvcmlnaW5VUkwiLCJkb25lIiwiZGF0YSIsImZyYWdtZW50VGFiQ3RybCIsImZyYWdtZW50TmF2SXRlbSIsImZyYWdtZW50VGFiUGFuZSIsInJlbmRlciIsInNlbGVjdG9yIiwic2V0dGluZ3MiLCJyZXN1bHQiLCIkIiwiRGVmZXJyZWQiLCJzZXR1cCIsIl9jb250ZXh0IiwiX2NhcmQiLCJfY2xvc2FibGUiLCJfZmlyc3RWaXNpYmxlIiwiZGljdCIsInJlcGxhY2VIVE1MIiwiX3NlbGVjdG9yIiwicmVzb2x2ZVdpdGgiLCJwcm9taXNlIiwiX2dldFRhYkVsIiwidGFiSWQiLCJfZ2V0TGlua0VsIiwiX2dldFBhbmVFbCIsInByZXBlbmRJdGVtIiwidGl0bGUiLCJjb250ZXh0IiwiaGVpZ2h0IiwiYWN0aXZlIiwiY2xvc2FibGUiLCJmaXJzdFZpc2libGUiLCJwYXRjaElkIiwiaWQiLCJ0YWJTZWxlY3RvciIsImNvbnRlbnRTZWxlY3RvciIsInByZXBlbmRIVE1MIiwiZmluZCIsImNsaWNrIiwiZSIsInJlbW92ZVRhYiIsInByZXZlbnREZWZhdWx0Iiwib24iLCJyZWxhdGVkVGFyZ2V0IiwiYXR0ciIsInN1YnN0cmluZyIsInRhYiIsImVscyIsImxlbmd0aCIsImhpZGUiLCJzaG93IiwiYXBwZW5kSXRlbSIsImFwcGVuZEhUTUwiLCJyZW1vdmUiLCJyZW1vdmVUYWJzIiwiZW1wdHkiLCJpc0VtcHR5IiwiaXMiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7R0FhQUEsU0FBUyxDQUFDLFNBQUQsQ0FBWSxDQUdwQkMsUUFBUSxDQUFFQyxHQUFHLENBQUNDLE9BSE0s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QUFDLEtBQUtTLFNBQUwsQ0FBaUIsa0JBQWxCLENBQUQsQ0FBdUM0QixHQUF2QyxDQUEyQyxNQUEzQyxDQUNBLENBQ0QsQ0E1U21CLENBZ1RwQlEsVUFBVSxDQUFFLHFCQUNaLENBQ0M3QyxDQUFDLENBQUMsS0FBS1MsU0FBTCxDQUFpQixZQUFsQixDQUFELENBQWlDcUMsS0FBakMsR0FFQTlDLENBQUMsQ0FBQyxLQUFLUyxTQUFMLENBQWlCLGVBQWxCLENBQUQsQ0FBb0NxQyxLQUFwQyxFQUNBLENBclRtQixDQXlUcEJDLE9BQU8sQ0FBRSxrQkFDVCxDQUNDLE1BQU8vQyxDQUFBQSxDQUFDLENBQUMsS0FBS1MsU0FBTCxDQUFpQixZQUFsQixDQUFELENBQWlDdUMsRUFBakMsQ0FBb0MsUUFBcEMsR0FFQWhELENBQUMsQ0FBQyxLQUFLUyxTQUFMLENBQWlCLGVBQWxCLENBQUQsQ0FBb0N1QyxFQUFwQyxDQUF1QyxRQUF2QyxDQUVQLENBL1RtQixDQUFaLENBQVQiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFNSSBXZWIgRnJhbWV3b3JrXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LVhYWFggVGhlIEFNSSBUZWFtIC8gTFBTQyAvIElOMlAzXG4gKlxuICogVGhpcyBmaWxlIG11c3QgYmUgdXNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIENlQ0lMTC1DOlxuICogaHR0cDovL3d3dy5jZWNpbGwuaW5mby9saWNlbmNlcy9MaWNlbmNlX0NlQ0lMTC1DX1YxLWVuLmh0bWxcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1mci5odG1sXG4gKlxuICovXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4kQU1JQ2xhc3MoJ1RhYkN0cmwnLCB7XG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0JGV4dGVuZHM6IGFtaS5Db250cm9sLFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0JGluaXQ6IGZ1bmN0aW9uKHBhcmVudCwgb3duZXIpXG5cdHtcblx0XHR0aGlzLiRzdXBlci4kaW5pdChwYXJlbnQsIG93bmVyKTtcblxuXHRcdHRoaXMuX3ByZXZpb3VzQWN0aXZlVGFiID0gJyc7XG5cblx0XHR0aGlzLl9jbnQgPSAwO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0b25SZWFkeTogZnVuY3Rpb24oKVxuXHR7XG5cdFx0cmV0dXJuIGFtaVdlYkFwcC5sb2FkUmVzb3VyY2VzKFtcblx0XHRcdGFtaVdlYkFwcC5vcmlnaW5VUkwgKyAnL2NvbnRyb2xzL1RhYi90d2lnL1RhYkN0cmwudHdpZycsXG5cdFx0XHRhbWlXZWJBcHAub3JpZ2luVVJMICsgJy9jb250cm9scy9UYWIvdHdpZy9uYXZfaXRlbS50d2lnJyxcblx0XHRcdGFtaVdlYkFwcC5vcmlnaW5VUkwgKyAnL2NvbnRyb2xzL1RhYi90d2lnL3RhYl9wYW5lLnR3aWcnLFxuXHRcdF0pLmRvbmUoKGRhdGEpID0+IHtcblxuXHRcdFx0dGhpcy5mcmFnbWVudFRhYkN0cmwgPSBkYXRhWzBdO1xuXHRcdFx0dGhpcy5mcmFnbWVudE5hdkl0ZW0gPSBkYXRhWzFdO1xuXHRcdFx0dGhpcy5mcmFnbWVudFRhYlBhbmUgPSBkYXRhWzJdO1xuXHRcdH0pO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0cmVuZGVyOiBmdW5jdGlvbihzZWxlY3Rvciwgc2V0dGluZ3MpXG5cdHtcblx0XHRjb25zdCByZXN1bHQgPSAkLkRlZmVycmVkKCk7XG5cblx0XHRbXG5cdFx0XHR0aGlzLl9jb250ZXh0LFxuXHRcdFx0dGhpcy5fY2FyZCxcblx0XHRcdHRoaXMuX2Nsb3NhYmxlLFxuXHRcdFx0dGhpcy5fZmlyc3RWaXNpYmxlLFxuXHRcdF0gPSBhbWlXZWJBcHAuc2V0dXAoXG5cdFx0XHRbXG5cdFx0XHRcdCdjb250ZXh0Jyxcblx0XHRcdFx0J2NhcmQnLFxuXHRcdFx0XHQnY2xvc2FibGUnLFxuXHRcdFx0XHQnZmlyc3RWaXNpYmxlJyxcblx0XHRcdF0sXG5cdFx0XHRbXG5cdFx0XHRcdHJlc3VsdCxcblx0XHRcdFx0dHJ1ZSxcblx0XHRcdFx0dHJ1ZSxcblx0XHRcdFx0dHJ1ZSxcblx0XHRcdF0sXG5cdFx0XHRzZXR0aW5nc1xuXHRcdCk7XG5cblx0XHRjb25zdCBkaWN0ID0ge1xuXHRcdFx0J2NhcmQnOiB0aGlzLl9jYXJkXG5cdFx0fTtcblxuXHRcdHRoaXMucmVwbGFjZUhUTUwodGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvciwgdGhpcy5mcmFnbWVudFRhYkN0cmwsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdHJlc3VsdC5yZXNvbHZlV2l0aCh0aGlzLl9jb250ZXh0KTtcblx0XHR9KTtcblxuXHRcdHJldHVybiByZXN1bHQucHJvbWlzZSgpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0X2dldFRhYkVsOiBmdW5jdGlvbih0YWJJZClcblx0e1xuXHRcdHJldHVybiAkKHRoaXMuX3NlbGVjdG9yICsgJyAubmF2LWxpbmtbaHJlZj1cIiMnICsgdGFiSWQgKyAnXCJdOnBhcmVudCcpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0X2dldExpbmtFbDogZnVuY3Rpb24odGFiSWQpXG5cdHtcblx0XHRyZXR1cm4gJCh0aGlzLl9zZWxlY3RvciArICcgLm5hdi1saW5rW2hyZWY9XCIjJyArIHRhYklkICsgJ1wiXScpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0X2dldFBhbmVFbDogZnVuY3Rpb24odGFiSWQpXG5cdHtcblx0XHRyZXR1cm4gJCh0aGlzLl9zZWxlY3RvciArICcgIycgKyB0YWJJZCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRwcmVwZW5kSXRlbTogZnVuY3Rpb24odGl0bGUsIHNldHRpbmdzKVxuXHR7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0Y29uc3QgW1xuXHRcdFx0Y29udGV4dCxcblx0XHRcdGhlaWdodCxcblx0XHRcdGFjdGl2ZSxcblx0XHRcdGNsb3NhYmxlLFxuXHRcdFx0Zmlyc3RWaXNpYmxlXG5cdFx0XSA9IGFtaVdlYkFwcC5zZXR1cChcblx0XHRcdFtcblx0XHRcdFx0J2NvbnRleHQnLFxuXHRcdFx0XHQnaGVpZ2h0Jyxcblx0XHRcdFx0J2FjdGl2ZScsXG5cdFx0XHRcdCdjbG9zYWJsZScsXG5cdFx0XHRcdCdmaXJzdFZpc2libGUnLFxuXHRcdFx0XSxcblx0XHRcdFtcblx0XHRcdFx0cmVzdWx0LFxuXHRcdFx0XHQnYXV0bycsXG5cdFx0XHRcdHRydWUsXG5cdFx0XHRcdHRoaXMuX2Nsb3NhYmxlLFxuXHRcdFx0XHR0aGlzLl9maXJzdFZpc2libGUsXG5cdFx0XHRdLFxuXHRcdFx0c2V0dGluZ3Ncblx0XHQpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgdGFiSWQgPSB0aGlzLnBhdGNoSWQoJ0YzRUY2RDNEXzcyM0JfRjVGQl9GMjk5X0UwQUE5Q0EwOTE0RCcpICsgJ18nICsgdGhpcy5fY250O1xuXG5cdFx0Y29uc3QgZGljdCA9IHtcblx0XHRcdGlkOiB0YWJJZCxcblx0XHRcdHRpdGxlOiB0aXRsZSxcblx0XHRcdGhlaWdodDogaGVpZ2h0LFxuXHRcdFx0Y2xvc2FibGU6IGNsb3NhYmxlLFxuXHRcdH07XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRjb25zdCB0YWJTZWxlY3RvciA9IHRoaXMuX2NhcmQgPyAnLmNhcmQgPiAuY2FyZC1oZWFkZXIgPiAubmF2LXRhYnMnIDogJy5uYXYtdGFicyc7XG5cdFx0Y29uc3QgY29udGVudFNlbGVjdG9yID0gdGhpcy5fY2FyZCA/ICcuY2FyZCA+IC5jYXJkLWJvZHkgPiAudGFiLWNvbnRlbnQnIDogJy50YWItY29udGVudCc7XG5cblx0XHR0aGlzLnByZXBlbmRIVE1MKHRoaXMuX3NlbGVjdG9yICsgJyA+ICcgKyB0YWJTZWxlY3RvciwgdGhpcy5mcmFnbWVudE5hdkl0ZW0sIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cdFx0XHR0aGlzLnByZXBlbmRIVE1MKHRoaXMuX3NlbGVjdG9yICsgJyA+ICcgKyBjb250ZW50U2VsZWN0b3IsIHRoaXMuZnJhZ21lbnRUYWJQYW5lLCB7ZGljdDogZGljdH0pLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0dGhpcy5fZ2V0VGFiRWwodGFiSWQpLmZpbmQoJy5mYS10aW1lcycpLmNsaWNrKChlKSA9PiB7XG5cblx0XHRcdFx0XHR0aGlzLnJlbW92ZVRhYih0YWJJZCk7XG5cblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0dGhpcy5fZ2V0TGlua0VsKHRhYklkKS5vbignc2hvdy5icy50YWInLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0dGhpcy5fcHJldmlvdXNBY3RpdmVUYWIgPSBlLnJlbGF0ZWRUYXJnZXQgPyAkKGUucmVsYXRlZFRhcmdldCkuYXR0cignaHJlZicpLnN1YnN0cmluZygxKSA6ICcnO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdGlmKHRoaXMuX2NudCsrID09PSAwIHx8IGFjdGl2ZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoaXMuX2dldExpbmtFbCh0YWJJZCkudGFiKCdzaG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdGNvbnN0IGVscyA9ICQodGhpcy5fc2VsZWN0b3IgKyAnID4gJyArIHRhYlNlbGVjdG9yKTtcblxuXHRcdFx0XHRpZihlbHMubGVuZ3RoID09PSAxICYmIGZpcnN0VmlzaWJsZSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0XHRlbHMuaGlkZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdGVscy5zaG93KCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHJlc3VsdC5yZXNvbHZlV2l0aChjb250ZXh0LCBbJyMnICsgdGFiSWRdKTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRyZXR1cm4gcmVzdWx0LnByb21pc2UoKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGFwcGVuZEl0ZW06IGZ1bmN0aW9uKHRpdGxlLCBzZXR0aW5ncylcblx0e1xuXHRcdGNvbnN0IHJlc3VsdCA9ICQuRGVmZXJyZWQoKTtcblxuXHRcdGNvbnN0IFtcblx0XHRcdGNvbnRleHQsXG5cdFx0XHRoZWlnaHQsXG5cdFx0XHRhY3RpdmUsXG5cdFx0XHRjbG9zYWJsZSxcblx0XHRcdGZpcnN0VmlzaWJsZVxuXHRcdF0gPSBhbWlXZWJBcHAuc2V0dXAoXG5cdFx0XHRbXG5cdFx0XHRcdCdjb250ZXh0Jyxcblx0XHRcdFx0J2hlaWdodCcsXG5cdFx0XHRcdCdhY3RpdmUnLFxuXHRcdFx0XHQnY2xvc2FibGUnLFxuXHRcdFx0XHQnZmlyc3RWaXNpYmxlJyxcblx0XHRcdF0sXG5cdFx0XHRbXG5cdFx0XHRcdHJlc3VsdCxcblx0XHRcdFx0J2F1dG8nLFxuXHRcdFx0XHR0cnVlLFxuXHRcdFx0XHR0aGlzLl9jbG9zYWJsZSxcblx0XHRcdFx0dGhpcy5fZmlyc3RWaXNpYmxlLFxuXHRcdFx0XSxcblx0XHRcdHNldHRpbmdzXG5cdFx0KTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGNvbnN0IHRhYklkID0gdGhpcy5wYXRjaElkKCdGM0VGNkQzRF83MjNCX0Y1RkJfRjI5OV9FMEFBOUNBMDkxNEQnKSArICdfJyArIHRoaXMuX2NudDtcblxuXHRcdGNvbnN0IGRpY3QgPSB7XG5cdFx0XHRpZDogdGFiSWQsXG5cdFx0XHR0aXRsZTogdGl0bGUsXG5cdFx0XHRoZWlnaHQ6IGhlaWdodCxcblx0XHRcdGNsb3NhYmxlOiBjbG9zYWJsZSxcblx0XHR9O1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgdGFiU2VsZWN0b3IgPSB0aGlzLl9jYXJkID8gJy5jYXJkID4gLmNhcmQtaGVhZGVyID4gLm5hdi10YWJzJyA6ICcubmF2LXRhYnMnO1xuXHRcdGNvbnN0IGNvbnRlbnRTZWxlY3RvciA9IHRoaXMuX2NhcmQgPyAnLmNhcmQgPiAuY2FyZC1ib2R5ID4gLnRhYi1jb250ZW50JyA6ICcudGFiLWNvbnRlbnQnO1xuXG5cdFx0dGhpcy5hcHBlbmRIVE1MKHRoaXMuX3NlbGVjdG9yICsgJyA+ICcgKyB0YWJTZWxlY3RvciwgdGhpcy5mcmFnbWVudE5hdkl0ZW0sIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cdFx0XHR0aGlzLmFwcGVuZEhUTUwodGhpcy5fc2VsZWN0b3IgKyAnID4gJyArIGNvbnRlbnRTZWxlY3RvciwgdGhpcy5mcmFnbWVudFRhYlBhbmUsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHR0aGlzLl9nZXRUYWJFbCh0YWJJZCkuZmluZCgnLmZhLXRpbWVzJykuY2xpY2soKGUpID0+IHtcblxuXHRcdFx0XHRcdHRoaXMucmVtb3ZlVGFiKHRhYklkKTtcblxuXHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHR0aGlzLl9nZXRMaW5rRWwodGFiSWQpLm9uKCdzaG93LmJzLnRhYicsIChlKSA9PiB7XG5cblx0XHRcdFx0XHR0aGlzLl9wcmV2aW91c0FjdGl2ZVRhYiA9IGUucmVsYXRlZFRhcmdldCA/ICQoZS5yZWxhdGVkVGFyZ2V0KS5hdHRyKCdocmVmJykuc3Vic3RyaW5nKDEpIDogJyc7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0aWYodGhpcy5fY250KysgPT09IDAgfHwgYWN0aXZlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhpcy5fZ2V0TGlua0VsKHRhYklkKS50YWIoJ3Nob3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0Y29uc3QgZWxzID0gJCh0aGlzLl9zZWxlY3RvciArICcgPiAnICsgdGFiU2VsZWN0b3IpO1xuXG5cdFx0XHRcdGlmKGVscy5sZW5ndGggPT09IDEgJiYgZmlyc3RWaXNpYmxlID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdGVscy5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0ZWxzLnNob3coKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0cmVzdWx0LnJlc29sdmVXaXRoKGNvbnRleHQsIFsnIycgKyB0YWJJZF0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdHJldHVybiByZXN1bHQucHJvbWlzZSgpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0cmVtb3ZlVGFiOiBmdW5jdGlvbih0YWJJZClcblx0e1xuXHRcdHRoaXMuX2dldFRhYkVsKHRhYklkKS5yZW1vdmUoKTtcblxuXHRcdHRoaXMuX2dldFBhbmVFbCh0YWJJZCkucmVtb3ZlKCk7XG5cblx0XHRpZih0aGlzLl9wcmV2aW91c0FjdGl2ZVRhYilcblx0XHR7XG5cdFx0XHR0aGlzLl9nZXRMaW5rRWwodGhpcy5fcHJldmlvdXNBY3RpdmVUYWIpLnRhYignc2hvdycpO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0JCh0aGlzLl9zZWxlY3RvciArICcgLm5hdi1saW5rOmZpcnN0JykudGFiKCdzaG93Jyk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0cmVtb3ZlVGFiczogZnVuY3Rpb24oKVxuXHR7XG5cdFx0JCh0aGlzLl9zZWxlY3RvciArICcgLm5hdi10YWJzJykuZW1wdHkoKTtcblxuXHRcdCQodGhpcy5fc2VsZWN0b3IgKyAnIC50YWItY29udGVudCcpLmVtcHR5KCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRpc0VtcHR5OiBmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gJCh0aGlzLl9zZWxlY3RvciArICcgLm5hdi10YWJzJykuaXMoJzplbXB0eScpXG5cdFx0ICAgICAgIHx8XG5cdFx0ICAgICAgICQodGhpcy5fc2VsZWN0b3IgKyAnIC5uYXYtY29udGVudCcpLmlzKCc6ZW1wdHknKVxuXHRcdDtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuIl19
