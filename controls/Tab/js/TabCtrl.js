/*!
 * AMI Web Framework
 *
 * Copyright (c) 2014-XXXX The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 */$AMIClass("TabCtrl",{$extends:ami.Control,$init:function $init(parent,owner){this.$super.$init(parent,owner);this._previousActiveTab="";this._cnt=0},onReady:function onReady(){var _this=this;return amiWebApp.loadResources([amiWebApp.originURL+"/controls/Tab/twig/TabCtrl.twig",amiWebApp.originURL+"/controls/Tab/twig/nav_item.twig",amiWebApp.originURL+"/controls/Tab/twig/tab_pane.twig"]).done(function(data){_this.fragmentTabCtrl=data[0];_this.fragmentNavItem=data[1];_this.fragmentTabPane=data[2]})},render:function render(selector,settings){var _this2=this;var result=$.Deferred();this._context=result;this._card=true;this._closable=true;this._firstVisible=true;if(settings){if("context"in settings){this._context=settings["context"]}if("card"in settings){this._card=settings["card"]}if("closable"in settings){this._closable=settings["closable"]}if("firstVisible"in settings){this._firstVisible=settings["firstVisible"]}}var dict={"card":this._card};this.replaceHTML(this._selector=selector,this.fragmentTabCtrl,{dict:dict}).done(function(){result.resolveWith(_this2._context)});return result.promise()},_getTabEl:function _getTabEl(tabId){return $(this._selector+" .nav-link[href=\"#"+tabId+"\"]:parent")},_getLinkEl:function _getLinkEl(tabId){return $(this._selector+" .nav-link[href=\"#"+tabId+"\"]")},_getPaneEl:function _getPaneEl(tabId){return $(this._selector+" #"+tabId)},prependItem:function prependItem(title,settings){var _this3=this;var result=$.Deferred();var context=result;var height="auto";var active=true;var closable=this._closable;var firstVisible=this._firstVisible;if(settings){if("context"in settings){context=settings["context"]}if("height"in settings){height=settings["height"]}if("active"in settings){active=settings["active"]}if("closable"in settings){closable=settings["closable"]}if("firstVisible"in settings){firstVisible=settings["firstVisible"]}}var tabId=this.patchId("F3EF6D3D_723B_F5FB_F299_E0AA9CA0914D")+"_"+this._cnt;var dict={id:tabId,title:title,height:height,closable:closable};var tabSelector=this._card?".card > .card-header > .nav-tabs":".nav-tabs";var contentSelector=this._card?".card > .card-body > .tab-content":".tab-content";this.prependHTML(this._selector+" > "+tabSelector,this.fragmentNavItem,{dict:dict}).done(function(){_this3.prependHTML(_this3._selector+" > "+contentSelector,_this3.fragmentTabPane,{dict:dict}).done(function(){_this3._getTabEl(tabId).find(".fa-times").click(function(e){_this3.removeTab(tabId);e.preventDefault()});_this3._getLinkEl(tabId).on("show.bs.tab",function(e){_this3._previousActiveTab=e.relatedTarget?$(e.relatedTarget).attr("href").substring(1):""});if(_this3._cnt++===0||active){_this3._getLinkEl(tabId).tab("show")}var els=$(_this3._selector+" > "+tabSelector);if(els.length===1&&firstVisible===false){els.hide()}else{els.show()}result.resolveWith(context,["#"+tabId])})});return result.promise()},appendItem:function appendItem(title,settings){var _this4=this;var result=$.Deferred();var context=result;var height="auto";var active=true;var closable=this._closable;var firstVisible=this._firstVisible;if(settings){if("context"in settings){context=settings["context"]}if("height"in settings){height=settings["height"]}if("active"in settings){active=settings["active"]}if("closable"in settings){closable=settings["closable"]}if("firstVisible"in settings){firstVisible=settings["firstVisible"]}}var tabId=this.patchId("F3EF6D3D_723B_F5FB_F299_E0AA9CA0914D")+"_"+this._cnt;var dict={id:tabId,title:title,height:height,closable:closable};var tabSelector=this._card?".card > .card-header > .nav-tabs":".nav-tabs";var contentSelector=this._card?".card > .card-body > .tab-content":".tab-content";this.appendHTML(this._selector+" > "+tabSelector,this.fragmentNavItem,{dict:dict}).done(function(){_this4.appendHTML(_this4._selector+" > "+contentSelector,_this4.fragmentTabPane,{dict:dict}).done(function(){_this4._getTabEl(tabId).find(".fa-times").click(function(e){_this4.removeTab(tabId);e.preventDefault()});_this4._getLinkEl(tabId).on("show.bs.tab",function(e){_this4._previousActiveTab=e.relatedTarget?$(e.relatedTarget).attr("href").substring(1):""});if(_this4._cnt++===0||active){_this4._getLinkEl(tabId).tab("show")}var els=$(_this4._selector+" > "+tabSelector);if(els.length===1&&firstVisible===false){els.hide()}else{els.show()}result.resolveWith(context,["#"+tabId])})});return result.promise()},removeTab:function removeTab(tabId){this._getTabEl(tabId).remove();this._getPaneEl(tabId).remove();if(this._previousActiveTab){this._getLinkEl(this._previousActiveTab).tab("show")}else{$(this._selector+" .nav-link:first").tab("show")}},removeTabs:function removeTabs(){$(this._selector+" .nav-tabs").empty();$(this._selector+" .tab-content").empty()},isEmpty:function isEmpty(){return $(this._selector+" .nav-tabs").is(":empty")||$(this._selector+" .nav-content").is(":empty")}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRhYkN0cmwuZXM2LmpzIl0sIm5hbWVzIjpbIiRBTUlDbGFzcyIsIiRleHRlbmRzIiwiYW1pIiwiQ29udHJvbCIsIiRpbml0IiwicGFyZW50Iiwib3duZXIiLCIkc3VwZXIiLCJfcHJldmlvdXNBY3RpdmVUYWIiLCJfY250Iiwib25SZWFkeSIsImFtaVdlYkFwcCIsImxvYWRSZXNvdXJjZXMiLCJvcmlnaW5VUkwiLCJkb25lIiwiZGF0YSIsImZyYWdtZW50VGFiQ3RybCIsImZyYWdtZW50TmF2SXRlbSIsImZyYWdtZW50VGFiUGFuZSIsInJlbmRlciIsInNlbGVjdG9yIiwic2V0dGluZ3MiLCJyZXN1bHQiLCIkIiwiRGVmZXJyZWQiLCJfY29udGV4dCIsIl9jYXJkIiwiX2Nsb3NhYmxlIiwiX2ZpcnN0VmlzaWJsZSIsImRpY3QiLCJyZXBsYWNlSFRNTCIsIl9zZWxlY3RvciIsInJlc29sdmVXaXRoIiwicHJvbWlzZSIsIl9nZXRUYWJFbCIsInRhYklkIiwiX2dldExpbmtFbCIsIl9nZXRQYW5lRWwiLCJwcmVwZW5kSXRlbSIsInRpdGxlIiwiY29udGV4dCIsImhlaWdodCIsImFjdGl2ZSIsImNsb3NhYmxlIiwiZmlyc3RWaXNpYmxlIiwicGF0Y2hJZCIsImlkIiwidGFiU2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJwcmVwZW5kSFRNTCIsImZpbmQiLCJjbGljayIsImUiLCJyZW1vdmVUYWIiLCJwcmV2ZW50RGVmYXVsdCIsIm9uIiwicmVsYXRlZFRhcmdldCIsImF0dHIiLCJzdWJzdHJpbmciLCJ0YWIiLCJlbHMiLCJsZW5ndGgiLCJoaWRlIiwic2hvdyIsImFwcGVuZEl0ZW0iLCJhcHBlbmRIVE1MIiwicmVtb3ZlIiwicmVtb3ZlVGFicyIsImVtcHR5IiwiaXNFbXB0eSIsImlzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0dBYUFBLFNBQVMsQ0FBQyxTQUFELENBQVksQ0FHcEJDLFFBQVEsQ0FBRUMsR0FBRyxDQUFDQyxPQUhNLENBT3BCQyxL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QUNDcEMsQ0FBQyxDQUFDLEtBQUtRLFNBQUwsQ0FBaUIsa0JBQWxCLENBQUQsQ0FBdUM0QixHQUF2QyxDQUEyQyxNQUEzQyxDQUNBLENBQ0QsQ0F6VG1CLENBNlRwQlEsVUFBVSxDQUFFLHFCQUNaLENBQ0M1QyxDQUFDLENBQUMsS0FBS1EsU0FBTCxDQUFpQixZQUFsQixDQUFELENBQWlDcUMsS0FBakMsR0FFQTdDLENBQUMsQ0FBQyxLQUFLUSxTQUFMLENBQWlCLGVBQWxCLENBQUQsQ0FBb0NxQyxLQUFwQyxFQUNBLENBbFVtQixDQXNVcEJDLE9BQU8sQ0FBRSxrQkFDVCxDQUNDLE1BQU85QyxDQUFBQSxDQUFDLENBQUMsS0FBS1EsU0FBTCxDQUFpQixZQUFsQixDQUFELENBQWlDdUMsRUFBakMsQ0FBb0MsUUFBcEMsR0FFQS9DLENBQUMsQ0FBQyxLQUFLUSxTQUFMLENBQWlCLGVBQWxCLENBQUQsQ0FBb0N1QyxFQUFwQyxDQUF1QyxRQUF2QyxDQUVQLENBNVVtQixDQUFaLENBQVQiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFNSSBXZWIgRnJhbWV3b3JrXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LVhYWFggVGhlIEFNSSBUZWFtIC8gTFBTQyAvIElOMlAzXG4gKlxuICogVGhpcyBmaWxlIG11c3QgYmUgdXNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIENlQ0lMTC1DOlxuICogaHR0cDovL3d3dy5jZWNpbGwuaW5mby9saWNlbmNlcy9MaWNlbmNlX0NlQ0lMTC1DX1YxLWVuLmh0bWxcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1mci5odG1sXG4gKlxuICovXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiRBTUlDbGFzcygnVGFiQ3RybCcsIHtcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdCRleHRlbmRzOiBhbWkuQ29udHJvbCxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0JGluaXQ6IGZ1bmN0aW9uKHBhcmVudCwgb3duZXIpXG5cdHtcblx0XHR0aGlzLiRzdXBlci4kaW5pdChwYXJlbnQsIG93bmVyKTtcblxuXHRcdHRoaXMuX3ByZXZpb3VzQWN0aXZlVGFiID0gJyc7XG5cblx0XHR0aGlzLl9jbnQgPSAwO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRvblJlYWR5OiBmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gYW1pV2ViQXBwLmxvYWRSZXNvdXJjZXMoW1xuXHRcdFx0YW1pV2ViQXBwLm9yaWdpblVSTCArICcvY29udHJvbHMvVGFiL3R3aWcvVGFiQ3RybC50d2lnJyxcblx0XHRcdGFtaVdlYkFwcC5vcmlnaW5VUkwgKyAnL2NvbnRyb2xzL1RhYi90d2lnL25hdl9pdGVtLnR3aWcnLFxuXHRcdFx0YW1pV2ViQXBwLm9yaWdpblVSTCArICcvY29udHJvbHMvVGFiL3R3aWcvdGFiX3BhbmUudHdpZycsXG5cdFx0XSkuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHR0aGlzLmZyYWdtZW50VGFiQ3RybCA9IGRhdGFbMF07XG5cdFx0XHR0aGlzLmZyYWdtZW50TmF2SXRlbSA9IGRhdGFbMV07XG5cdFx0XHR0aGlzLmZyYWdtZW50VGFiUGFuZSA9IGRhdGFbMl07XG5cdFx0fSk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHJlbmRlcjogZnVuY3Rpb24oc2VsZWN0b3IsIHNldHRpbmdzKVxuXHR7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0dGhpcy5fY29udGV4dCA9IHJlc3VsdDtcblx0XHR0aGlzLl9jYXJkID0gdHJ1ZTtcblx0XHR0aGlzLl9jbG9zYWJsZSA9IHRydWU7XG5cdFx0dGhpcy5fZmlyc3RWaXNpYmxlID0gdHJ1ZTtcblxuXHRcdGlmKHNldHRpbmdzKVxuXHRcdHtcblx0XHRcdGlmKCdjb250ZXh0JyBpbiBzZXR0aW5ncykge1xuXHRcdFx0XHR0aGlzLl9jb250ZXh0ID0gc2V0dGluZ3NbJ2NvbnRleHQnXTtcblx0XHRcdH1cblxuXHRcdFx0aWYoJ2NhcmQnIGluIHNldHRpbmdzKSB7XG5cdFx0XHRcdHRoaXMuX2NhcmQgPSBzZXR0aW5nc1snY2FyZCddO1xuXHRcdFx0fVxuXG5cdFx0XHRpZignY2xvc2FibGUnIGluIHNldHRpbmdzKSB7XG5cdFx0XHRcdHRoaXMuX2Nsb3NhYmxlID0gc2V0dGluZ3NbJ2Nsb3NhYmxlJ107XG5cdFx0XHR9XG5cblx0XHRcdGlmKCdmaXJzdFZpc2libGUnIGluIHNldHRpbmdzKSB7XG5cdFx0XHRcdHRoaXMuX2ZpcnN0VmlzaWJsZSA9IHNldHRpbmdzWydmaXJzdFZpc2libGUnXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCBkaWN0ID0ge1xuXHRcdFx0J2NhcmQnOiB0aGlzLl9jYXJkXG5cdFx0fTtcblxuXHRcdHRoaXMucmVwbGFjZUhUTUwodGhpcy5fc2VsZWN0b3IgPSBzZWxlY3RvciwgdGhpcy5mcmFnbWVudFRhYkN0cmwsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdHJlc3VsdC5yZXNvbHZlV2l0aCh0aGlzLl9jb250ZXh0KTtcblx0XHR9KTtcblxuXHRcdHJldHVybiByZXN1bHQucHJvbWlzZSgpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRfZ2V0VGFiRWw6IGZ1bmN0aW9uKHRhYklkKVxuXHR7XG5cdFx0cmV0dXJuICQodGhpcy5fc2VsZWN0b3IgKyAnIC5uYXYtbGlua1tocmVmPVwiIycgKyB0YWJJZCArICdcIl06cGFyZW50Jyk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdF9nZXRMaW5rRWw6IGZ1bmN0aW9uKHRhYklkKVxuXHR7XG5cdFx0cmV0dXJuICQodGhpcy5fc2VsZWN0b3IgKyAnIC5uYXYtbGlua1tocmVmPVwiIycgKyB0YWJJZCArICdcIl0nKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0X2dldFBhbmVFbDogZnVuY3Rpb24odGFiSWQpXG5cdHtcblx0XHRyZXR1cm4gJCh0aGlzLl9zZWxlY3RvciArICcgIycgKyB0YWJJZCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHByZXBlbmRJdGVtOiBmdW5jdGlvbih0aXRsZSwgc2V0dGluZ3MpXG5cdHtcblx0XHRjb25zdCByZXN1bHQgPSAkLkRlZmVycmVkKCk7XG5cblx0XHRsZXQgY29udGV4dCA9IHJlc3VsdDtcblx0XHRsZXQgaGVpZ2h0ID0gJ2F1dG8nO1xuXHRcdGxldCBhY3RpdmUgPSB0cnVlO1xuXHRcdGxldCBjbG9zYWJsZSA9IHRoaXMuX2Nsb3NhYmxlO1xuXHRcdGxldCBmaXJzdFZpc2libGUgPSB0aGlzLl9maXJzdFZpc2libGU7XG5cblx0XHRpZihzZXR0aW5ncylcblx0XHR7XG5cdFx0XHRpZignY29udGV4dCcgaW4gc2V0dGluZ3MpIHtcblx0ICBcdFx0XHRjb250ZXh0ID0gc2V0dGluZ3NbJ2NvbnRleHQnXTtcblx0XHRcdH1cblxuXHRcdFx0aWYoJ2hlaWdodCcgaW4gc2V0dGluZ3MpIHtcblx0XHRcdFx0aGVpZ2h0ID0gc2V0dGluZ3NbJ2hlaWdodCddO1xuXHRcdFx0fVxuXG5cdFx0XHRpZignYWN0aXZlJyBpbiBzZXR0aW5ncykge1xuXHRcdFx0XHRhY3RpdmUgPSBzZXR0aW5nc1snYWN0aXZlJ107XG5cdFx0XHR9XG5cblx0XHRcdGlmKCdjbG9zYWJsZScgaW4gc2V0dGluZ3MpIHtcblx0XHRcdFx0Y2xvc2FibGUgPSBzZXR0aW5nc1snY2xvc2FibGUnXTtcblx0XHRcdH1cblxuXHRcdFx0aWYoJ2ZpcnN0VmlzaWJsZScgaW4gc2V0dGluZ3MpIHtcblx0XHRcdFx0Zmlyc3RWaXNpYmxlID0gc2V0dGluZ3NbJ2ZpcnN0VmlzaWJsZSddO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgdGFiSWQgPSB0aGlzLnBhdGNoSWQoJ0YzRUY2RDNEXzcyM0JfRjVGQl9GMjk5X0UwQUE5Q0EwOTE0RCcpICsgJ18nICsgdGhpcy5fY250O1xuXG5cdFx0Y29uc3QgZGljdCA9IHtcblx0XHRcdGlkOiB0YWJJZCxcblx0XHRcdHRpdGxlOiB0aXRsZSxcblx0XHRcdGhlaWdodDogaGVpZ2h0LFxuXHRcdFx0Y2xvc2FibGU6IGNsb3NhYmxlLFxuXHRcdH07XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGNvbnN0IHRhYlNlbGVjdG9yID0gdGhpcy5fY2FyZCA/ICcuY2FyZCA+IC5jYXJkLWhlYWRlciA+IC5uYXYtdGFicycgOiAnLm5hdi10YWJzJztcblx0XHRjb25zdCBjb250ZW50U2VsZWN0b3IgPSB0aGlzLl9jYXJkID8gJy5jYXJkID4gLmNhcmQtYm9keSA+IC50YWItY29udGVudCcgOiAnLnRhYi1jb250ZW50JztcblxuXHRcdHRoaXMucHJlcGVuZEhUTUwodGhpcy5fc2VsZWN0b3IgKyAnID4gJyArIHRhYlNlbGVjdG9yLCB0aGlzLmZyYWdtZW50TmF2SXRlbSwge2RpY3Q6IGRpY3R9KS5kb25lKCgpID0+IHtcblx0XHRcdHRoaXMucHJlcGVuZEhUTUwodGhpcy5fc2VsZWN0b3IgKyAnID4gJyArIGNvbnRlbnRTZWxlY3RvciwgdGhpcy5mcmFnbWVudFRhYlBhbmUsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHRoaXMuX2dldFRhYkVsKHRhYklkKS5maW5kKCcuZmEtdGltZXMnKS5jbGljaygoZSkgPT4ge1xuXG5cdFx0XHRcdFx0dGhpcy5yZW1vdmVUYWIodGFiSWQpO1xuXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0dGhpcy5fZ2V0TGlua0VsKHRhYklkKS5vbignc2hvdy5icy50YWInLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0dGhpcy5fcHJldmlvdXNBY3RpdmVUYWIgPSBlLnJlbGF0ZWRUYXJnZXQgPyAkKGUucmVsYXRlZFRhcmdldCkuYXR0cignaHJlZicpLnN1YnN0cmluZygxKSA6ICcnO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0aWYodGhpcy5fY250KysgPT09IDAgfHwgYWN0aXZlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhpcy5fZ2V0TGlua0VsKHRhYklkKS50YWIoJ3Nob3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRjb25zdCBlbHMgPSAkKHRoaXMuX3NlbGVjdG9yICsgJyA+ICcgKyB0YWJTZWxlY3Rvcik7XG5cblx0XHRcdFx0aWYoZWxzLmxlbmd0aCA9PT0gMSAmJiBmaXJzdFZpc2libGUgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0ZWxzLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRlbHMuc2hvdygpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHJlc3VsdC5yZXNvbHZlV2l0aChjb250ZXh0LCBbJyMnICsgdGFiSWRdKTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0cmV0dXJuIHJlc3VsdC5wcm9taXNlKCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGFwcGVuZEl0ZW06IGZ1bmN0aW9uKHRpdGxlLCBzZXR0aW5ncylcblx0e1xuXHRcdGNvbnN0IHJlc3VsdCA9ICQuRGVmZXJyZWQoKTtcblxuXHRcdGxldCBjb250ZXh0ID0gcmVzdWx0O1xuXHRcdGxldCBoZWlnaHQgPSAnYXV0byc7XG5cdFx0bGV0IGFjdGl2ZSA9IHRydWU7XG5cdFx0bGV0IGNsb3NhYmxlID0gdGhpcy5fY2xvc2FibGU7XG5cdFx0bGV0IGZpcnN0VmlzaWJsZSA9IHRoaXMuX2ZpcnN0VmlzaWJsZTtcblxuXHRcdGlmKHNldHRpbmdzKVxuXHRcdHtcblx0XHRcdGlmKCdjb250ZXh0JyBpbiBzZXR0aW5ncykge1xuXHQgIFx0XHRcdGNvbnRleHQgPSBzZXR0aW5nc1snY29udGV4dCddO1xuXHRcdFx0fVxuXG5cdFx0XHRpZignaGVpZ2h0JyBpbiBzZXR0aW5ncykge1xuXHRcdFx0XHRoZWlnaHQgPSBzZXR0aW5nc1snaGVpZ2h0J107XG5cdFx0XHR9XG5cblx0XHRcdGlmKCdhY3RpdmUnIGluIHNldHRpbmdzKSB7XG5cdFx0XHRcdGFjdGl2ZSA9IHNldHRpbmdzWydhY3RpdmUnXTtcblx0XHRcdH1cblxuXHRcdFx0aWYoJ2Nsb3NhYmxlJyBpbiBzZXR0aW5ncykge1xuXHRcdFx0XHRjbG9zYWJsZSA9IHNldHRpbmdzWydjbG9zYWJsZSddO1xuXHRcdFx0fVxuXG5cdFx0XHRpZignZmlyc3RWaXNpYmxlJyBpbiBzZXR0aW5ncykge1xuXHRcdFx0XHRmaXJzdFZpc2libGUgPSBzZXR0aW5nc1snZmlyc3RWaXNpYmxlJ107XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRjb25zdCB0YWJJZCA9IHRoaXMucGF0Y2hJZCgnRjNFRjZEM0RfNzIzQl9GNUZCX0YyOTlfRTBBQTlDQTA5MTREJykgKyAnXycgKyB0aGlzLl9jbnQ7XG5cblx0XHRjb25zdCBkaWN0ID0ge1xuXHRcdFx0aWQ6IHRhYklkLFxuXHRcdFx0dGl0bGU6IHRpdGxlLFxuXHRcdFx0aGVpZ2h0OiBoZWlnaHQsXG5cdFx0XHRjbG9zYWJsZTogY2xvc2FibGUsXG5cdFx0fTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgdGFiU2VsZWN0b3IgPSB0aGlzLl9jYXJkID8gJy5jYXJkID4gLmNhcmQtaGVhZGVyID4gLm5hdi10YWJzJyA6ICcubmF2LXRhYnMnO1xuXHRcdGNvbnN0IGNvbnRlbnRTZWxlY3RvciA9IHRoaXMuX2NhcmQgPyAnLmNhcmQgPiAuY2FyZC1ib2R5ID4gLnRhYi1jb250ZW50JyA6ICcudGFiLWNvbnRlbnQnO1xuXG5cdFx0dGhpcy5hcHBlbmRIVE1MKHRoaXMuX3NlbGVjdG9yICsgJyA+ICcgKyB0YWJTZWxlY3RvciwgdGhpcy5mcmFnbWVudE5hdkl0ZW0sIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cdFx0XHR0aGlzLmFwcGVuZEhUTUwodGhpcy5fc2VsZWN0b3IgKyAnID4gJyArIGNvbnRlbnRTZWxlY3RvciwgdGhpcy5mcmFnbWVudFRhYlBhbmUsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHRoaXMuX2dldFRhYkVsKHRhYklkKS5maW5kKCcuZmEtdGltZXMnKS5jbGljaygoZSkgPT4ge1xuXG5cdFx0XHRcdFx0dGhpcy5yZW1vdmVUYWIodGFiSWQpO1xuXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0dGhpcy5fZ2V0TGlua0VsKHRhYklkKS5vbignc2hvdy5icy50YWInLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0dGhpcy5fcHJldmlvdXNBY3RpdmVUYWIgPSBlLnJlbGF0ZWRUYXJnZXQgPyAkKGUucmVsYXRlZFRhcmdldCkuYXR0cignaHJlZicpLnN1YnN0cmluZygxKSA6ICcnO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0aWYodGhpcy5fY250KysgPT09IDAgfHwgYWN0aXZlKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0dGhpcy5fZ2V0TGlua0VsKHRhYklkKS50YWIoJ3Nob3cnKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRjb25zdCBlbHMgPSAkKHRoaXMuX3NlbGVjdG9yICsgJyA+ICcgKyB0YWJTZWxlY3Rvcik7XG5cblx0XHRcdFx0aWYoZWxzLmxlbmd0aCA9PT0gMSAmJiBmaXJzdFZpc2libGUgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0ZWxzLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRlbHMuc2hvdygpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHJlc3VsdC5yZXNvbHZlV2l0aChjb250ZXh0LCBbJyMnICsgdGFiSWRdKTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0cmV0dXJuIHJlc3VsdC5wcm9taXNlKCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHJlbW92ZVRhYjogZnVuY3Rpb24odGFiSWQpXG5cdHtcblx0XHR0aGlzLl9nZXRUYWJFbCh0YWJJZCkucmVtb3ZlKCk7XG5cblx0XHR0aGlzLl9nZXRQYW5lRWwodGFiSWQpLnJlbW92ZSgpO1xuXG5cdFx0aWYodGhpcy5fcHJldmlvdXNBY3RpdmVUYWIpXG5cdFx0e1xuXHRcdFx0dGhpcy5fZ2V0TGlua0VsKHRoaXMuX3ByZXZpb3VzQWN0aXZlVGFiKS50YWIoJ3Nob3cnKTtcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdCQodGhpcy5fc2VsZWN0b3IgKyAnIC5uYXYtbGluazpmaXJzdCcpLnRhYignc2hvdycpO1xuXHRcdH1cblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0cmVtb3ZlVGFiczogZnVuY3Rpb24oKVxuXHR7XG5cdFx0JCh0aGlzLl9zZWxlY3RvciArICcgLm5hdi10YWJzJykuZW1wdHkoKTtcblxuXHRcdCQodGhpcy5fc2VsZWN0b3IgKyAnIC50YWItY29udGVudCcpLmVtcHR5KCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGlzRW1wdHk6IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiAkKHRoaXMuX3NlbGVjdG9yICsgJyAubmF2LXRhYnMnKS5pcygnOmVtcHR5Jylcblx0XHQgICAgICAgfHxcblx0XHQgICAgICAgJCh0aGlzLl9zZWxlY3RvciArICcgLm5hdi1jb250ZW50JykuaXMoJzplbXB0eScpXG5cdFx0O1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbn0pO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuIl19
