/*!
 * AMI Web Framework
 *
 * Copyright (c) 2014-XXXX The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 */$AMIClass("TabCtrl",{$extends:ami.Control,$init:function $init(parent,owner){this.$super.$init(parent,owner);this._previousActiveTab="";this._cnt=0},onReady:function onReady(){var _this=this;return amiWebApp.loadResources([amiWebApp.originURL+"/controls/Tab/twig/TabCtrl.twig",amiWebApp.originURL+"/controls/Tab/twig/nav_item.twig",amiWebApp.originURL+"/controls/Tab/twig/tab_pane.twig"]).done(function(data){_this.fragmentTabCtrl=data[0];_this.fragmentNavItem=data[1];_this.fragmentTabPane=data[2]})},render:function render(selector,settings){var _this2=this;var result=$.Deferred();var _amiWebApp$setup=amiWebApp.setup(["context","card","closable","firstVisible"],[result,true,true,true],settings);this._context=_amiWebApp$setup[0];this._card=_amiWebApp$setup[1];this._closable=_amiWebApp$setup[2];this._firstVisible=_amiWebApp$setup[3];var dict={"card":this._card};this.replaceHTML(this.setSelector(selector),this.fragmentTabCtrl,{dict:dict}).done(function(){result.resolveWith(_this2._context)});return result.promise()},_getTabEl:function _getTabEl(tabId){return $(this.getSelector()+" .nav-link[href=\"#"+tabId+"\"]:parent")},_getLinkEl:function _getLinkEl(tabId){return $(this.getSelector()+" .nav-link[href=\"#"+tabId+"\"]")},_getPaneEl:function _getPaneEl(tabId){return $(this.getSelector()+" #"+tabId)},prependItem:function prependItem(title,settings){var _this3=this;var result=$.Deferred();var _amiWebApp$setup2=amiWebApp.setup(["context","height","active","closable","firstVisible"],[result,"auto",true,this._closable,this._firstVisible],settings),context=_amiWebApp$setup2[0],height=_amiWebApp$setup2[1],active=_amiWebApp$setup2[2],closable=_amiWebApp$setup2[3],firstVisible=_amiWebApp$setup2[4];var tabId=this.patchId("F3EF6D3D_723B_F5FB_F299_E0AA9CA0914D")+"_"+this._cnt;var dict={id:tabId,title:title,height:height,closable:closable};var tabSelector=this._card?".card > .card-header > .nav-tabs":".nav-tabs";var contentSelector=this._card?".card > .card-body > .tab-content":".tab-content";this.prependHTML(this.getSelector()+" > "+tabSelector,this.fragmentNavItem,{dict:dict}).done(function(){_this3.prependHTML(_this3.getSelector()+" > "+contentSelector,_this3.fragmentTabPane,{dict:dict}).done(function(){_this3._getTabEl(tabId).find(".fa-times").click(function(e){_this3.removeTab(tabId);e.preventDefault()});_this3._getLinkEl(tabId).on("show.bs.tab",function(e){_this3._previousActiveTab=e.relatedTarget?$(e.relatedTarget).attr("href").substring(1):""});if(_this3._cnt++===0||active){_this3._getLinkEl(tabId).tab("show")}var els=$(_this3.getSelector()+" > "+tabSelector);if(els.length===1&&firstVisible===false){els.hide()}else{els.show()}result.resolveWith(context,["#"+tabId])})});return result.promise()},appendItem:function appendItem(title,settings){var _this4=this;var result=$.Deferred();var _amiWebApp$setup3=amiWebApp.setup(["context","height","active","closable","firstVisible"],[result,"auto",true,this._closable,this._firstVisible],settings),context=_amiWebApp$setup3[0],height=_amiWebApp$setup3[1],active=_amiWebApp$setup3[2],closable=_amiWebApp$setup3[3],firstVisible=_amiWebApp$setup3[4];var tabId=this.patchId("F3EF6D3D_723B_F5FB_F299_E0AA9CA0914D")+"_"+this._cnt;var dict={id:tabId,title:title,height:height,closable:closable};var tabSelector=this._card?".card > .card-header > .nav-tabs":".nav-tabs";var contentSelector=this._card?".card > .card-body > .tab-content":".tab-content";this.appendHTML(this.getSelector()+" > "+tabSelector,this.fragmentNavItem,{dict:dict}).done(function(){_this4.appendHTML(_this4.getSelector()+" > "+contentSelector,_this4.fragmentTabPane,{dict:dict}).done(function(){_this4._getTabEl(tabId).find(".fa-times").click(function(e){_this4.removeTab(tabId);e.preventDefault()});_this4._getLinkEl(tabId).on("show.bs.tab",function(e){_this4._previousActiveTab=e.relatedTarget?$(e.relatedTarget).attr("href").substring(1):""});if(_this4._cnt++===0||active){_this4._getLinkEl(tabId).tab("show")}var els=$(_this4.getSelector()+" > "+tabSelector);if(els.length===1&&firstVisible===false){els.hide()}else{els.show()}result.resolveWith(context,["#"+tabId])})});return result.promise()},removeTab:function removeTab(tabId){this._getTabEl(tabId).remove();this._getPaneEl(tabId).remove();if(this._previousActiveTab){this._getLinkEl(this._previousActiveTab).tab("show")}else{$(this.getSelector()+" .nav-link:first").tab("show")}},removeTabs:function removeTabs(){$(this.getSelector()+" .nav-tabs").empty();$(this.getSelector()+" .tab-content").empty()},isEmpty:function isEmpty(){return $(this.getSelector()+" .nav-tabs").is(":empty")||$(this.getSelector()+" .nav-content").is(":empty")}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlRhYkN0cmwuZXM2LmpzIl0sIm5hbWVzIjpbIiRBTUlDbGFzcyIsIiRleHRlbmRzIiwiYW1pIiwiQ29udHJvbCIsIiRpbml0IiwicGFyZW50Iiwib3duZXIiLCIkc3VwZXIiLCJfcHJldmlvdXNBY3RpdmVUYWIiLCJfY250Iiwib25SZWFkeSIsImFtaVdlYkFwcCIsImxvYWRSZXNvdXJjZXMiLCJvcmlnaW5VUkwiLCJkb25lIiwiZGF0YSIsImZyYWdtZW50VGFiQ3RybCIsImZyYWdtZW50TmF2SXRlbSIsImZyYWdtZW50VGFiUGFuZSIsInJlbmRlciIsInNlbGVjdG9yIiwic2V0dGluZ3MiLCJyZXN1bHQiLCIkIiwiRGVmZXJyZWQiLCJzZXR1cCIsIl9jb250ZXh0IiwiX2NhcmQiLCJfY2xvc2FibGUiLCJfZmlyc3RWaXNpYmxlIiwiZGljdCIsInJlcGxhY2VIVE1MIiwic2V0U2VsZWN0b3IiLCJyZXNvbHZlV2l0aCIsInByb21pc2UiLCJfZ2V0VGFiRWwiLCJ0YWJJZCIsImdldFNlbGVjdG9yIiwiX2dldExpbmtFbCIsIl9nZXRQYW5lRWwiLCJwcmVwZW5kSXRlbSIsInRpdGxlIiwiY29udGV4dCIsImhlaWdodCIsImFjdGl2ZSIsImNsb3NhYmxlIiwiZmlyc3RWaXNpYmxlIiwicGF0Y2hJZCIsImlkIiwidGFiU2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJwcmVwZW5kSFRNTCIsImZpbmQiLCJjbGljayIsImUiLCJyZW1vdmVUYWIiLCJwcmV2ZW50RGVmYXVsdCIsIm9uIiwicmVsYXRlZFRhcmdldCIsImF0dHIiLCJzdWJzdHJpbmciLCJ0YWIiLCJlbHMiLCJsZW5ndGgiLCJoaWRlIiwic2hvdyIsImFwcGVuZEl0ZW0iLCJhcHBlbmRIVE1MIiwicmVtb3ZlIiwicmVtb3ZlVGFicyIsImVtcHR5IiwiaXNFbXB0eSIsImlzIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7O0dBYUFBLFNBQVMsQ0FBQyxTQUFELENBQVksQ0FHcEJDLFFBQVEsQ0FBRUMs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S0EsQ0FDQ3RDLENBQUMsQ0FBQyxLQUFLYyxXQUFMLEdBQXFCLGtCQUF0QixDQUFELENBQTJDd0IsR0FBM0MsQ0FBK0MsTUFBL0MsQ0FDQSxDQUNELENBNVNtQixDQWdUcEJRLFVBQVUsQ0FBRSxxQkFDWixDQUNDOUMsQ0FBQyxDQUFDLEtBQUtjLFdBQUwsR0FBcUIsWUFBdEIsQ0FBRCxDQUFxQ2lDLEtBQXJDLEdBRUEvQyxDQUFDLENBQUMsS0FBS2MsV0FBTCxHQUFxQixlQUF0QixDQUFELENBQXdDaUMsS0FBeEMsRUFDQSxDQXJUbUIsQ0F5VHBCQyxPQUFPLENBQUUsa0JBQ1QsQ0FDQyxNQUFPaEQsQ0FBQUEsQ0FBQyxDQUFDLEtBQUtjLFdBQUwsR0FBcUIsWUFBdEIsQ0FBRCxDQUFxQ21DLEVBQXJDLENBQXdDLFFBQXhDLEdBRUFqRCxDQUFDLENBQUMsS0FBS2MsV0FBTCxHQUFxQixlQUF0QixDQUFELENBQXdDbUMsRUFBeEMsQ0FBMkMsUUFBM0MsQ0FFUCxDQS9UbUIsQ0FBWixDQUFUIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBTUkgV2ViIEZyYW1ld29ya1xuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC1YWFhYIFRoZSBBTUkgVGVhbSAvIExQU0MgLyBJTjJQM1xuICpcbiAqIFRoaXMgZmlsZSBtdXN0IGJlIHVzZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBDZUNJTEwtQzpcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1lbi5odG1sXG4gKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZnIuaHRtbFxuICpcbiAqL1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuJEFNSUNsYXNzKCdUYWJDdHJsJywge1xuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdCRleHRlbmRzOiBhbWkuQ29udHJvbCxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdCRpbml0OiBmdW5jdGlvbihwYXJlbnQsIG93bmVyKVxuXHR7XG5cdFx0dGhpcy4kc3VwZXIuJGluaXQocGFyZW50LCBvd25lcik7XG5cblx0XHR0aGlzLl9wcmV2aW91c0FjdGl2ZVRhYiA9ICcnO1xuXG5cdFx0dGhpcy5fY250ID0gMDtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdG9uUmVhZHk6IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiBhbWlXZWJBcHAubG9hZFJlc291cmNlcyhbXG5cdFx0XHRhbWlXZWJBcHAub3JpZ2luVVJMICsgJy9jb250cm9scy9UYWIvdHdpZy9UYWJDdHJsLnR3aWcnLFxuXHRcdFx0YW1pV2ViQXBwLm9yaWdpblVSTCArICcvY29udHJvbHMvVGFiL3R3aWcvbmF2X2l0ZW0udHdpZycsXG5cdFx0XHRhbWlXZWJBcHAub3JpZ2luVVJMICsgJy9jb250cm9scy9UYWIvdHdpZy90YWJfcGFuZS50d2lnJyxcblx0XHRdKS5kb25lKChkYXRhKSA9PiB7XG5cblx0XHRcdHRoaXMuZnJhZ21lbnRUYWJDdHJsID0gZGF0YVswXTtcblx0XHRcdHRoaXMuZnJhZ21lbnROYXZJdGVtID0gZGF0YVsxXTtcblx0XHRcdHRoaXMuZnJhZ21lbnRUYWJQYW5lID0gZGF0YVsyXTtcblx0XHR9KTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHJlbmRlcjogZnVuY3Rpb24oc2VsZWN0b3IsIHNldHRpbmdzKVxuXHR7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0W1xuXHRcdFx0dGhpcy5fY29udGV4dCxcblx0XHRcdHRoaXMuX2NhcmQsXG5cdFx0XHR0aGlzLl9jbG9zYWJsZSxcblx0XHRcdHRoaXMuX2ZpcnN0VmlzaWJsZSxcblx0XHRdID0gYW1pV2ViQXBwLnNldHVwKFxuXHRcdFx0W1xuXHRcdFx0XHQnY29udGV4dCcsXG5cdFx0XHRcdCdjYXJkJyxcblx0XHRcdFx0J2Nsb3NhYmxlJyxcblx0XHRcdFx0J2ZpcnN0VmlzaWJsZScsXG5cdFx0XHRdLFxuXHRcdFx0W1xuXHRcdFx0XHRyZXN1bHQsXG5cdFx0XHRcdHRydWUsXG5cdFx0XHRcdHRydWUsXG5cdFx0XHRcdHRydWUsXG5cdFx0XHRdLFxuXHRcdFx0c2V0dGluZ3Ncblx0XHQpO1xuXG5cdFx0Y29uc3QgZGljdCA9IHtcblx0XHRcdCdjYXJkJzogdGhpcy5fY2FyZFxuXHRcdH07XG5cblx0XHR0aGlzLnJlcGxhY2VIVE1MKHRoaXMuc2V0U2VsZWN0b3Ioc2VsZWN0b3IpLCB0aGlzLmZyYWdtZW50VGFiQ3RybCwge2RpY3Q6IGRpY3R9KS5kb25lKCgpID0+IHtcblxuXHRcdFx0cmVzdWx0LnJlc29sdmVXaXRoKHRoaXMuX2NvbnRleHQpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdC5wcm9taXNlKCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRfZ2V0VGFiRWw6IGZ1bmN0aW9uKHRhYklkKVxuXHR7XG5cdFx0cmV0dXJuICQodGhpcy5nZXRTZWxlY3RvcigpICsgJyAubmF2LWxpbmtbaHJlZj1cIiMnICsgdGFiSWQgKyAnXCJdOnBhcmVudCcpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0X2dldExpbmtFbDogZnVuY3Rpb24odGFiSWQpXG5cdHtcblx0XHRyZXR1cm4gJCh0aGlzLmdldFNlbGVjdG9yKCkgKyAnIC5uYXYtbGlua1tocmVmPVwiIycgKyB0YWJJZCArICdcIl0nKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdF9nZXRQYW5lRWw6IGZ1bmN0aW9uKHRhYklkKVxuXHR7XG5cdFx0cmV0dXJuICQodGhpcy5nZXRTZWxlY3RvcigpICsgJyAjJyArIHRhYklkKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHByZXBlbmRJdGVtOiBmdW5jdGlvbih0aXRsZSwgc2V0dGluZ3MpXG5cdHtcblx0XHRjb25zdCByZXN1bHQgPSAkLkRlZmVycmVkKCk7XG5cblx0XHRjb25zdCBbXG5cdFx0XHRjb250ZXh0LFxuXHRcdFx0aGVpZ2h0LFxuXHRcdFx0YWN0aXZlLFxuXHRcdFx0Y2xvc2FibGUsXG5cdFx0XHRmaXJzdFZpc2libGVcblx0XHRdID0gYW1pV2ViQXBwLnNldHVwKFxuXHRcdFx0W1xuXHRcdFx0XHQnY29udGV4dCcsXG5cdFx0XHRcdCdoZWlnaHQnLFxuXHRcdFx0XHQnYWN0aXZlJyxcblx0XHRcdFx0J2Nsb3NhYmxlJyxcblx0XHRcdFx0J2ZpcnN0VmlzaWJsZScsXG5cdFx0XHRdLFxuXHRcdFx0W1xuXHRcdFx0XHRyZXN1bHQsXG5cdFx0XHRcdCdhdXRvJyxcblx0XHRcdFx0dHJ1ZSxcblx0XHRcdFx0dGhpcy5fY2xvc2FibGUsXG5cdFx0XHRcdHRoaXMuX2ZpcnN0VmlzaWJsZSxcblx0XHRcdF0sXG5cdFx0XHRzZXR0aW5nc1xuXHRcdCk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRjb25zdCB0YWJJZCA9IHRoaXMucGF0Y2hJZCgnRjNFRjZEM0RfNzIzQl9GNUZCX0YyOTlfRTBBQTlDQTA5MTREJykgKyAnXycgKyB0aGlzLl9jbnQ7XG5cblx0XHRjb25zdCBkaWN0ID0ge1xuXHRcdFx0aWQ6IHRhYklkLFxuXHRcdFx0dGl0bGU6IHRpdGxlLFxuXHRcdFx0aGVpZ2h0OiBoZWlnaHQsXG5cdFx0XHRjbG9zYWJsZTogY2xvc2FibGUsXG5cdFx0fTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGNvbnN0IHRhYlNlbGVjdG9yID0gdGhpcy5fY2FyZCA/ICcuY2FyZCA+IC5jYXJkLWhlYWRlciA+IC5uYXYtdGFicycgOiAnLm5hdi10YWJzJztcblx0XHRjb25zdCBjb250ZW50U2VsZWN0b3IgPSB0aGlzLl9jYXJkID8gJy5jYXJkID4gLmNhcmQtYm9keSA+IC50YWItY29udGVudCcgOiAnLnRhYi1jb250ZW50JztcblxuXHRcdHRoaXMucHJlcGVuZEhUTUwodGhpcy5nZXRTZWxlY3RvcigpICsgJyA+ICcgKyB0YWJTZWxlY3RvciwgdGhpcy5mcmFnbWVudE5hdkl0ZW0sIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cdFx0XHR0aGlzLnByZXBlbmRIVE1MKHRoaXMuZ2V0U2VsZWN0b3IoKSArICcgPiAnICsgY29udGVudFNlbGVjdG9yLCB0aGlzLmZyYWdtZW50VGFiUGFuZSwge2RpY3Q6IGRpY3R9KS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHRoaXMuX2dldFRhYkVsKHRhYklkKS5maW5kKCcuZmEtdGltZXMnKS5jbGljaygoZSkgPT4ge1xuXG5cdFx0XHRcdFx0dGhpcy5yZW1vdmVUYWIodGFiSWQpO1xuXG5cdFx0XHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHRoaXMuX2dldExpbmtFbCh0YWJJZCkub24oJ3Nob3cuYnMudGFiJywgKGUpID0+IHtcblxuXHRcdFx0XHRcdHRoaXMuX3ByZXZpb3VzQWN0aXZlVGFiID0gZS5yZWxhdGVkVGFyZ2V0ID8gJChlLnJlbGF0ZWRUYXJnZXQpLmF0dHIoJ2hyZWYnKS5zdWJzdHJpbmcoMSkgOiAnJztcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRpZih0aGlzLl9jbnQrKyA9PT0gMCB8fCBhY3RpdmUpXG5cdFx0XHRcdHtcblx0XHRcdFx0XHR0aGlzLl9nZXRMaW5rRWwodGFiSWQpLnRhYignc2hvdycpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRjb25zdCBlbHMgPSAkKHRoaXMuZ2V0U2VsZWN0b3IoKSArICcgPiAnICsgdGFiU2VsZWN0b3IpO1xuXG5cdFx0XHRcdGlmKGVscy5sZW5ndGggPT09IDEgJiYgZmlyc3RWaXNpYmxlID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdGVscy5oaWRlKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0ZWxzLnNob3coKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0cmVzdWx0LnJlc29sdmVXaXRoKGNvbnRleHQsIFsnIycgKyB0YWJJZF0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdHJldHVybiByZXN1bHQucHJvbWlzZSgpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0YXBwZW5kSXRlbTogZnVuY3Rpb24odGl0bGUsIHNldHRpbmdzKVxuXHR7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0Y29uc3QgW1xuXHRcdFx0Y29udGV4dCxcblx0XHRcdGhlaWdodCxcblx0XHRcdGFjdGl2ZSxcblx0XHRcdGNsb3NhYmxlLFxuXHRcdFx0Zmlyc3RWaXNpYmxlXG5cdFx0XSA9IGFtaVdlYkFwcC5zZXR1cChcblx0XHRcdFtcblx0XHRcdFx0J2NvbnRleHQnLFxuXHRcdFx0XHQnaGVpZ2h0Jyxcblx0XHRcdFx0J2FjdGl2ZScsXG5cdFx0XHRcdCdjbG9zYWJsZScsXG5cdFx0XHRcdCdmaXJzdFZpc2libGUnLFxuXHRcdFx0XSxcblx0XHRcdFtcblx0XHRcdFx0cmVzdWx0LFxuXHRcdFx0XHQnYXV0bycsXG5cdFx0XHRcdHRydWUsXG5cdFx0XHRcdHRoaXMuX2Nsb3NhYmxlLFxuXHRcdFx0XHR0aGlzLl9maXJzdFZpc2libGUsXG5cdFx0XHRdLFxuXHRcdFx0c2V0dGluZ3Ncblx0XHQpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29uc3QgdGFiSWQgPSB0aGlzLnBhdGNoSWQoJ0YzRUY2RDNEXzcyM0JfRjVGQl9GMjk5X0UwQUE5Q0EwOTE0RCcpICsgJ18nICsgdGhpcy5fY250O1xuXG5cdFx0Y29uc3QgZGljdCA9IHtcblx0XHRcdGlkOiB0YWJJZCxcblx0XHRcdHRpdGxlOiB0aXRsZSxcblx0XHRcdGhlaWdodDogaGVpZ2h0LFxuXHRcdFx0Y2xvc2FibGU6IGNsb3NhYmxlLFxuXHRcdH07XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRjb25zdCB0YWJTZWxlY3RvciA9IHRoaXMuX2NhcmQgPyAnLmNhcmQgPiAuY2FyZC1oZWFkZXIgPiAubmF2LXRhYnMnIDogJy5uYXYtdGFicyc7XG5cdFx0Y29uc3QgY29udGVudFNlbGVjdG9yID0gdGhpcy5fY2FyZCA/ICcuY2FyZCA+IC5jYXJkLWJvZHkgPiAudGFiLWNvbnRlbnQnIDogJy50YWItY29udGVudCc7XG5cblx0XHR0aGlzLmFwcGVuZEhUTUwodGhpcy5nZXRTZWxlY3RvcigpICsgJyA+ICcgKyB0YWJTZWxlY3RvciwgdGhpcy5mcmFnbWVudE5hdkl0ZW0sIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cdFx0XHR0aGlzLmFwcGVuZEhUTUwodGhpcy5nZXRTZWxlY3RvcigpICsgJyA+ICcgKyBjb250ZW50U2VsZWN0b3IsIHRoaXMuZnJhZ21lbnRUYWJQYW5lLCB7ZGljdDogZGljdH0pLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0dGhpcy5fZ2V0VGFiRWwodGFiSWQpLmZpbmQoJy5mYS10aW1lcycpLmNsaWNrKChlKSA9PiB7XG5cblx0XHRcdFx0XHR0aGlzLnJlbW92ZVRhYih0YWJJZCk7XG5cblx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0dGhpcy5fZ2V0TGlua0VsKHRhYklkKS5vbignc2hvdy5icy50YWInLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0dGhpcy5fcHJldmlvdXNBY3RpdmVUYWIgPSBlLnJlbGF0ZWRUYXJnZXQgPyAkKGUucmVsYXRlZFRhcmdldCkuYXR0cignaHJlZicpLnN1YnN0cmluZygxKSA6ICcnO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdGlmKHRoaXMuX2NudCsrID09PSAwIHx8IGFjdGl2ZSlcblx0XHRcdFx0e1xuXHRcdFx0XHRcdHRoaXMuX2dldExpbmtFbCh0YWJJZCkudGFiKCdzaG93Jyk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdGNvbnN0IGVscyA9ICQodGhpcy5nZXRTZWxlY3RvcigpICsgJyA+ICcgKyB0YWJTZWxlY3Rvcik7XG5cblx0XHRcdFx0aWYoZWxzLmxlbmd0aCA9PT0gMSAmJiBmaXJzdFZpc2libGUgPT09IGZhbHNlKSB7XG5cdFx0XHRcdFx0ZWxzLmhpZGUoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRlbHMuc2hvdygpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRyZXN1bHQucmVzb2x2ZVdpdGgoY29udGV4dCwgWycjJyArIHRhYklkXSk7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0cmV0dXJuIHJlc3VsdC5wcm9taXNlKCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRyZW1vdmVUYWI6IGZ1bmN0aW9uKHRhYklkKVxuXHR7XG5cdFx0dGhpcy5fZ2V0VGFiRWwodGFiSWQpLnJlbW92ZSgpO1xuXG5cdFx0dGhpcy5fZ2V0UGFuZUVsKHRhYklkKS5yZW1vdmUoKTtcblxuXHRcdGlmKHRoaXMuX3ByZXZpb3VzQWN0aXZlVGFiKVxuXHRcdHtcblx0XHRcdHRoaXMuX2dldExpbmtFbCh0aGlzLl9wcmV2aW91c0FjdGl2ZVRhYikudGFiKCdzaG93Jyk7XG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0XHQkKHRoaXMuZ2V0U2VsZWN0b3IoKSArICcgLm5hdi1saW5rOmZpcnN0JykudGFiKCdzaG93Jyk7XG5cdFx0fVxuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0cmVtb3ZlVGFiczogZnVuY3Rpb24oKVxuXHR7XG5cdFx0JCh0aGlzLmdldFNlbGVjdG9yKCkgKyAnIC5uYXYtdGFicycpLmVtcHR5KCk7XG5cblx0XHQkKHRoaXMuZ2V0U2VsZWN0b3IoKSArICcgLnRhYi1jb250ZW50JykuZW1wdHkoKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGlzRW1wdHk6IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiAkKHRoaXMuZ2V0U2VsZWN0b3IoKSArICcgLm5hdi10YWJzJykuaXMoJzplbXB0eScpXG5cdFx0ICAgICAgIHx8XG5cdFx0ICAgICAgICQodGhpcy5nZXRTZWxlY3RvcigpICsgJyAubmF2LWNvbnRlbnQnKS5pcygnOmVtcHR5Jylcblx0XHQ7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbn0pO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiJdfQ==
