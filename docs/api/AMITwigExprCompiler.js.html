<link rel="stylesheet" type="text/css" href="docs/api/css/AMI-template.css"></link>

<div class="row">

  <nav class="col-md-3">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">AMI Web framework API</h3>
      </div>
      <div class="panel-body jsdoc-menu">
        <h4><a href="index.html">Home</a></h4><h4>Classes</h4><ul><li><a href="?subapp=amiDocument&userdata=api/AMITwigExprCompiler.html">AMITwigExprCompiler</a></li></ul><h4>Events</h4><ul><li><a href="?subapp=amiDocument&userdata=api/amiWebApp.html#event:onStart">onStart</a></li><li><a href="?subapp=amiDocument&userdata=api/amiWebApp.html#event:onToolbarUpdateNeeded">onToolbarUpdateNeeded</a></li></ul><h4>Namespaces</h4><ul><li><a href="?subapp=amiDocument&userdata=api/amiCommand.html">amiCommand</a></li><li><a href="?subapp=amiDocument&userdata=api/amiLogin.html">amiLogin</a></li><li><a href="?subapp=amiDocument&userdata=api/amiTokenizer.html">amiTokenizer</a></li><li><a href="?subapp=amiDocument&userdata=api/amiTwigExprInterpreter.html">amiTwigExprInterpreter</a></li><li><a href="?subapp=amiDocument&userdata=api/amiWebApp.html">amiWebApp</a></li></ul><h4>Interfaces</h4><ul><li><a href="?subapp=amiDocument&userdata=api/AMISubApp.html">AMISubApp</a></li></ul><h4>Global</h4><ul><li><a href="?subapp=amiDocument&userdata=api/global.html#amiRegisterSubApp">amiRegisterSubApp</a></li></ul>
      </div>
    </div>
  </nav>

  <div class="col-md-9 jsdoc-content">
    <h1>Source: AMITwigExprCompiler.js</h1>
    



    
<section>
  <article>
    <pre class="ami-code"><code><i class="line-number"></i>/*!
<i class="line-number"></i> * AMI Web Framework
<i class="line-number"></i> *
<i class="line-number"></i> * Copyright (c) 2014-2015 The AMI Team
<i class="line-number"></i> * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
<i class="line-number"></i> *
<i class="line-number"></i> */
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>/* INTERNAL VARIABLES                                                      */
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>var _ami_internal_numRegex = /^[0-9]+$/;
<i class="line-number"></i>var _ami_internal_sidRegex = /^[a-zA-Z_][a-zA-Z0-9_]*$/;
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>/* INTERNAL FUNCTIONS                                                      */
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>function _ami_internal_isNum(s)
<i class="line-number"></i>{
<i class="line-number"></i>	return s.match(_ami_internal_numRegex) !== null;
<i class="line-number"></i>}
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>function _ami_internal_isStr(s)
<i class="line-number"></i>{
<i class="line-number"></i>	var length = s.length;
<i class="line-number"></i>
<i class="line-number"></i>	return length >= 2
<i class="line-number"></i>	       &amp;&amp;
<i class="line-number"></i>	       (
<i class="line-number"></i>	           (s[0] === '\'' &amp;&amp; s[length - 1] === '\'')
<i class="line-number"></i>	           ||
<i class="line-number"></i>	           (s[0] === '\"' &amp;&amp; s[length - 1] === '\"')
<i class="line-number"></i>	       )
<i class="line-number"></i>	;
<i class="line-number"></i>}
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>function _ami_internal_isSId(s)
<i class="line-number"></i>{
<i class="line-number"></i>	return s.match(_ami_internal_sidRegex) !== null;
<i class="line-number"></i>}
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>/* amiTwigTokens                                                           */
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>$AMINamespace('amiTwigTokens', {
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	$init: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		this.types = {
<i class="line-number"></i>			'or': this.LOGICAL_OR,
<i class="line-number"></i>			'and': this.LOGICAL_AND,
<i class="line-number"></i>			'b-or': this.BITWISE_OR,
<i class="line-number"></i>			'b-xor': this.BITWISE_XOR,
<i class="line-number"></i>			'b-and': this.BITWISE_AND,
<i class="line-number"></i>			'===': this.STRICT_EQ,
<i class="line-number"></i>			'==': this.LOOSE_EQ,
<i class="line-number"></i>			'!==': this.STRICT_NE,
<i class="line-number"></i>			'!=': this.LOOSE_NE,
<i class="line-number"></i>			'&lt;=': this.GTE,
<i class="line-number"></i>			'>=': this.LTE,
<i class="line-number"></i>			'&lt;': this.GT,
<i class="line-number"></i>			'>': this.LT,
<i class="line-number"></i>			'is': this.IS,
<i class="line-number"></i>			'defined': this.DEFINED,
<i class="line-number"></i>			'null': this.NULL,
<i class="line-number"></i>			'empty': this.EMPTY,
<i class="line-number"></i>			'iterable': this.ITERABLE,
<i class="line-number"></i>			'even': this.EVEN,
<i class="line-number"></i>			'odd': this.ODD,
<i class="line-number"></i>			'starts': this.STARTS,
<i class="line-number"></i>			'ends': this.ENDS,
<i class="line-number"></i>			'with': this.WITH,
<i class="line-number"></i>			'matches': this.MATCHES,
<i class="line-number"></i>			'in': this.IN,
<i class="line-number"></i>			'..': this.RANGE,
<i class="line-number"></i>			'+': this.PLUS,
<i class="line-number"></i>			'-': this.MINUS,
<i class="line-number"></i>			'**': this.POWER,
<i class="line-number"></i>			'*': this.MUL,
<i class="line-number"></i>			'//': this.DIV,
<i class="line-number"></i>			'/': this.DIV,
<i class="line-number"></i>			'%': this.MOD,
<i class="line-number"></i>			'not': this.NOT,
<i class="line-number"></i>			'.': this.DOT,
<i class="line-number"></i>
<i class="line-number"></i>			'(': this.LP,
<i class="line-number"></i>			')': this.RP,
<i class="line-number"></i>		};
<i class="line-number"></i>
<i class="line-number"></i>		this.EQ_NE_GTE_LTE_GT_LT = [
<i class="line-number"></i>			this.STRICT_EQ,
<i class="line-number"></i>			this.LOOSE_EQ,
<i class="line-number"></i>			this.STRICT_NE,
<i class="line-number"></i>			this.LOOSE_NE,
<i class="line-number"></i>			this.GTE,
<i class="line-number"></i>			this.LTE,
<i class="line-number"></i>			this.GT,
<i class="line-number"></i>			this.LT,
<i class="line-number"></i>		];
<i class="line-number"></i>
<i class="line-number"></i>		this.IS_XXX = [
<i class="line-number"></i>			this.DEFINED,
<i class="line-number"></i>			this.NULL,
<i class="line-number"></i>			this.EMPTY,
<i class="line-number"></i>			this.ITERABLE,
<i class="line-number"></i>			this.EVEN,
<i class="line-number"></i>			this.ODD
<i class="line-number"></i>		];
<i class="line-number"></i>
<i class="line-number"></i>		this.XXX_WITH = [
<i class="line-number"></i>			this.STARTS,
<i class="line-number"></i>			this.ENDS,
<i class="line-number"></i>		];
<i class="line-number"></i>
<i class="line-number"></i>		this.PLUS_MINUS = [
<i class="line-number"></i>			this.PLUS,
<i class="line-number"></i>			this.MINUS,
<i class="line-number"></i>		];
<i class="line-number"></i>
<i class="line-number"></i>		this.MUL_DIV_MOD = [
<i class="line-number"></i>			this.MUL,
<i class="line-number"></i>			this.FLOORDIV,
<i class="line-number"></i>			this.DIV,
<i class="line-number"></i>			this.MOD,
<i class="line-number"></i>		];
<i class="line-number"></i>
<i class="line-number"></i>		this.NOT_PLUS_MINUS = [
<i class="line-number"></i>			this.NOT,
<i class="line-number"></i>			this.PLUS,
<i class="line-number"></i>			this.MINUS,
<i class="line-number"></i>		];
<i class="line-number"></i>
<i class="line-number"></i>		this.TERMINAL = [
<i class="line-number"></i>			this.NUM,
<i class="line-number"></i>			this.STR,
<i class="line-number"></i>		];
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	LOGICAL_OR: 100,
<i class="line-number"></i>	LOGICAL_AND: 101,
<i class="line-number"></i>	BITWISE_OR: 102,
<i class="line-number"></i>	BITWISE_XOR: 103,
<i class="line-number"></i>	BITWISE_AND: 104,
<i class="line-number"></i>	STRICT_EQ: 105,
<i class="line-number"></i>	LOOSE_EQ: 106,
<i class="line-number"></i>	STRICT_NE: 107,
<i class="line-number"></i>	LOOSE_NE: 108,
<i class="line-number"></i>	GTE: 109,
<i class="line-number"></i>	LTE: 110,
<i class="line-number"></i>	GT: 111,
<i class="line-number"></i>	LT: 112,
<i class="line-number"></i>	IS: 113,
<i class="line-number"></i>	DEFINED: 114,
<i class="line-number"></i>	NULL: 115,
<i class="line-number"></i>	EMPTY: 116,
<i class="line-number"></i>	ITERABLE: 117,
<i class="line-number"></i>	EVEN: 118,
<i class="line-number"></i>	ODD: 119,
<i class="line-number"></i>	STARTS: 120,
<i class="line-number"></i>	ENDS: 121,
<i class="line-number"></i>	WITH: 122,
<i class="line-number"></i>	MATCHES: 123,
<i class="line-number"></i>	IN: 124,
<i class="line-number"></i>	RANGE: 125,
<i class="line-number"></i>	PLUS: 126,
<i class="line-number"></i>	MINUS: 127,
<i class="line-number"></i>	POWER: 128,
<i class="line-number"></i>	MUL: 129,
<i class="line-number"></i>	FLOORDIV: 130,
<i class="line-number"></i>	DIV: 131,
<i class="line-number"></i>	MOD: 132,
<i class="line-number"></i>	NOT: 133,
<i class="line-number"></i>	DOT: 134,
<i class="line-number"></i>	
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	LP: 200,
<i class="line-number"></i>	RP: 201,
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	SID: 300,
<i class="line-number"></i>	FUN: 301,
<i class="line-number"></i>	NUM: 302,
<i class="line-number"></i>	STR: 303,
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>});
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>/* AMITwigExprTokenizer                                                    */
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>$AMIClass('AMITwigExprTokenizer', {
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	$init: function(code, line)
<i class="line-number"></i>	{
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		this.tokens = amiTokenizer.tokenize(
<i class="line-number"></i>			code,
<i class="line-number"></i>			line,
<i class="line-number"></i>			[' ', '\t', '\n'],
<i class="line-number"></i>			['b-or', 'b-xor', 'b-and', '===', '==', '!==', '!=', '=', '&lt;=', '>=', '&lt;', '>', '+', '-', '**', '*', '//', '/', '..', '.', '(', ')'],
<i class="line-number"></i>			['\'', '\"'],
<i class="line-number"></i>			'\\'
<i class="line-number"></i>		);
<i class="line-number"></i>
<i class="line-number"></i>		this.types = [];
<i class="line-number"></i>
<i class="line-number"></i>		this.i = 0;
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		var token;
<i class="line-number"></i>		var type;
<i class="line-number"></i>
<i class="line-number"></i>		for(var index in this.tokens)
<i class="line-number"></i>		{
<i class="line-number"></i>			token = this.tokens[index];
<i class="line-number"></i>			type = amiTwigTokens.types[token];
<i class="line-number"></i>
<i class="line-number"></i>			if(type) {
<i class="line-number"></i>				this.types.push(type);
<i class="line-number"></i>			} else if(_ami_internal_isNum(token)) {
<i class="line-number"></i>				this.types.push(amiTwigTokens.NUM);
<i class="line-number"></i>			} else if(_ami_internal_isStr(token)) {
<i class="line-number"></i>				this.types.push(amiTwigTokens.STR);
<i class="line-number"></i>			} else if(_ami_internal_isSId(token)) {
<i class="line-number"></i>				this.types.push(amiTwigTokens.SID);
<i class="line-number"></i>			} else {
<i class="line-number"></i>				throw 'syntax error, line `' + line + '`, unknown token `' + token + '`';
<i class="line-number"></i>			}
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	next: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		this.i++;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	isEmpty: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		return this.i >= this.tokens.length;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	peekToken: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		return this.tokens[this.i];
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	peekType: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		return this.types[this.i];
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	checkType: function(type)
<i class="line-number"></i>	{
<i class="line-number"></i>		if(this.i &lt; this.tokens.length)
<i class="line-number"></i>		{
<i class="line-number"></i>			var TYPE = this.types[this.i];
<i class="line-number"></i>
<i class="line-number"></i>			return (type instanceof Array) ? (type.indexOf(TYPE) >= 0) : (type === TYPE);
<i class="line-number"></i>		}
<i class="line-number"></i>		
<i class="line-number"></i>		return false;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>});
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>/* AMITwigExprCompiler                                                     */
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>/**
<i class="line-number"></i> * The AMI TWIG expression compiler
<i class="line-number"></i> * @see An online &lt;a href="http://cern.ch/ami/twig/" target="_blank">demo&lt;/a>.
<i class="line-number"></i> * @class AMITwigExprCompiler
<i class="line-number"></i> * @param {String} code the code
<i class="line-number"></i> * @param {Number} line the line
<i class="line-number"></i> * @throws {String} The error description
<i class="line-number"></i> */
<i class="line-number"></i>
<i class="line-number"></i>$AMIClass('AMITwigExprCompiler', /** @lends AMITwigExprCompiler# */ {
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	$init: function(code, line)
<i class="line-number"></i>	{
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		this.tokenizer = new AMITwigExprTokenizer(
<i class="line-number"></i>			this.code = code,
<i class="line-number"></i>			this.line = line
<i class="line-number"></i>		);
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		this.rootNode = this.parseLogicalOr();
<i class="line-number"></i>
<i class="line-number"></i>		if(!this.tokenizer.isEmpty())
<i class="line-number"></i>		{
<i class="line-number"></i>			throw 'syntax error, line `' + this.line + '`, unexpected token `' + this.tokenizer.peekToken() + '`';
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	/**
<i class="line-number"></i>	  * Dump the abstract abstract syntax tree to a dot diagram
<i class="line-number"></i>	  * @returns {String} The dot diagram
<i class="line-number"></i>	  */
<i class="line-number"></i>
<i class="line-number"></i>	dump: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		return this.rootNode.dump();
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseLogicalOr: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parseLogicalAnd();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* LogicalOr : LogicalAnd ('or' LogicalAnd)*               */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.LOGICAL_OR))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseLogicalOr();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseLogicalAnd: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parseBitwiseOr();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* LogicalAnd : BitwiseOr ('and' BitwiseOr)*               */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.LOGICAL_AND))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseLogicalAnd();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseBitwiseOr: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parseBitwiseXor();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* BitwiseOr : BitwiseXor ('b-or' BitwiseXor)*             */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.BITWISE_OR))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseBitwiseOr();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseBitwiseXor: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parseBitwiseAnd();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* BitwiseXor : BitwiseAnd ('b-xor' BitwiseAnd)*           */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.BITWISE_XOR))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseBitwiseXor();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseBitwiseAnd: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parseComp();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* BitwiseAnd : Comp ('b-and' Comp)*                       */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.BITWISE_AND))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseBitwiseAnd();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseComp: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parseAddSub();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Comp : AddSub (('===' | '==' | ...) AddSub)?            */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		/**/ if(this.tokenizer.checkType(amiTwigTokens.EQ_NE_GTE_LTE_GT_LT))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseAddSub();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Comp : AddSub ('is' 'not'? ('defined' | 'empty' | ...))?*/
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		else if(this.tokenizer.checkType(amiTwigTokens.IS))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			/* swap */
<i class="line-number"></i>			var swap = node;
<i class="line-number"></i>			/* swap */
<i class="line-number"></i>
<i class="line-number"></i>			if(this.tokenizer.checkType(amiTwigTokens.NOT))
<i class="line-number"></i>			{
<i class="line-number"></i>				node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>				this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>				node.nodeLeft = swap;
<i class="line-number"></i>				node.nodeRight = null;
<i class="line-number"></i>			}
<i class="line-number"></i>
<i class="line-number"></i>			if(this.tokenizer.checkType(amiTwigTokens.IS_XXX))
<i class="line-number"></i>			{
<i class="line-number"></i>				var right = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>				this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>				swap.nodeLeft = left;
<i class="line-number"></i>				swap.nodeRight = right;
<i class="line-number"></i>			}
<i class="line-number"></i>			else
<i class="line-number"></i>			{
<i class="line-number"></i>				throw 'syntax error, line `' + this.line + '`, `defined`, `null`, `iterable`, `empty`, `even` or `odd` expected';
<i class="line-number"></i>			}
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Comp : AddSub (('starts' | 'ends') `with` AddSub)?      */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		else if(this.tokenizer.checkType(amiTwigTokens.XXX_WITH))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken() + 'with');
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			if(this.tokenizer.checkType(amiTwigTokens.WITH))
<i class="line-number"></i>			{
<i class="line-number"></i>				this.tokenizer.next();
<i class="line-number"></i>			}
<i class="line-number"></i>			else
<i class="line-number"></i>			{
<i class="line-number"></i>				throw 'syntax error, line `' + this.line + '`, `with` expected';
<i class="line-number"></i>			}
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseAddSub();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Comp : AddSub ('matches' AddSub)?                       */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		else if(this.tokenizer.checkType(amiTwigTokens.MATCHES))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseAddSub();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Comp : AddSub ('in' Range)?                             */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		else if(this.tokenizer.checkType(amiTwigTokens.IN))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseRange();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseAddSub: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parseMulDiv();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* AddSub : MulDiv (('+' | '-') MulDiv)*                   */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.PLUS_MINUS))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseAddSub();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseMulDiv: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parsePower();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* MulDiv : Power (('*' | '//' | '/' | '%') Power)*        */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.MUL_DIV_MOD))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parseMulDiv();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parsePower: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var left = this.parseNotPlusMinus();
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Power : NotPlusMinus ('**' NotPlusMinus)*               */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.POWER))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var right = this.parsePower();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>			left = node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return left;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseNotPlusMinus: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* NotPlusMinus : ('!' | '-' | '+')? X                     */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.NOT_PLUS_MINUS))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var left = this.parseX();
<i class="line-number"></i>
<i class="line-number"></i>			node.nodeLeft = left;
<i class="line-number"></i>			node.nodeRight = null;
<i class="line-number"></i>
<i class="line-number"></i>			return node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return this.parseX();
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseX: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* X : Group | QId | Terminal                              */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		var node;
<i class="line-number"></i>
<i class="line-number"></i>		if((node = this.parseGroup())) {
<i class="line-number"></i>			return node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		if((node = this.parseQIdFun())) {
<i class="line-number"></i>			return node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		if((node = this.parseTerminal())) {
<i class="line-number"></i>			return node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		throw 'syntax error, line `' + this.line + '`, syntax error or tuncated expression';
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseGroup: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Group : '(' LogicalOr ')'                               */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.LP))
<i class="line-number"></i>		{
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			var node = this.parseLogicalOr();
<i class="line-number"></i>
<i class="line-number"></i>			if(this.tokenizer.checkType(amiTwigTokens.RP))
<i class="line-number"></i>			{
<i class="line-number"></i>				this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>				return node;
<i class="line-number"></i>			}
<i class="line-number"></i>			else
<i class="line-number"></i>			{
<i class="line-number"></i>				throw 'syntax error, line `' + this.line + '`, `)` expected';
<i class="line-number"></i>			}
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return null;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseQIdFun: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* QIdFun : SID('.' SID)*                                  */
<i class="line-number"></i>		/*        | SID('.' SID)* '(' ')'                          */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		var qid = '_.';
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.SID))
<i class="line-number"></i>		{
<i class="line-number"></i>			qid += this.tokenizer.peekToken();
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			while(this.tokenizer.checkType(amiTwigTokens.DOT))
<i class="line-number"></i>			{
<i class="line-number"></i>				qid += this.tokenizer.peekToken();
<i class="line-number"></i>				this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>				if(this.tokenizer.checkType(amiTwigTokens.SID))
<i class="line-number"></i>				{
<i class="line-number"></i>					qid += this.tokenizer.peekToken();
<i class="line-number"></i>					this.tokenizer.next();
<i class="line-number"></i>				}
<i class="line-number"></i>				else
<i class="line-number"></i>				{
<i class="line-number"></i>					throw 'syntax error, line `' + this.line + '`, id expected';
<i class="line-number"></i>				}
<i class="line-number"></i>			}
<i class="line-number"></i>
<i class="line-number"></i>			if(this.tokenizer.checkType(amiTwigTokens.LP))
<i class="line-number"></i>			{
<i class="line-number"></i>				this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>				if(this.tokenizer.checkType(amiTwigTokens.RP))
<i class="line-number"></i>				{
<i class="line-number"></i>					this.tokenizer.next();
<i class="line-number"></i>				}
<i class="line-number"></i>				else
<i class="line-number"></i>				{
<i class="line-number"></i>					throw 'syntax error, line `' + this.line + '`, `)` expected';
<i class="line-number"></i>				}
<i class="line-number"></i>
<i class="line-number"></i>				return new AMITwigExprNode(amiTwigTokens.FUN, qid);
<i class="line-number"></i>			}
<i class="line-number"></i>			else
<i class="line-number"></i>			{
<i class="line-number"></i>				return new AMITwigExprNode(amiTwigTokens.SID, qid);
<i class="line-number"></i>			}
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return null;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseTerminal: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Terminal : NUM | STR                                    */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.TERMINAL))
<i class="line-number"></i>		{
<i class="line-number"></i>			var node = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			return node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		return null;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	parseRange: function(e)
<i class="line-number"></i>	{
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Range : QIdFun                                          */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		var node = this.parseQIdFun();
<i class="line-number"></i>
<i class="line-number"></i>		if(node != null)
<i class="line-number"></i>		{
<i class="line-number"></i>			return node;
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>		/* Range : Terminal '..' Terminal                          */
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		if(this.tokenizer.checkType(amiTwigTokens.TERMINAL))
<i class="line-number"></i>		{
<i class="line-number"></i>			var left = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>			this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>			if(this.tokenizer.checkType(amiTwigTokens.RANGE))
<i class="line-number"></i>			{
<i class="line-number"></i>				var node = new AMITwigExprNode(((amiTwigTokens.RANGE)), this.tokenizer.peekToken());
<i class="line-number"></i>				this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>				if(this.tokenizer.checkType(amiTwigTokens.TERMINAL))
<i class="line-number"></i>				{
<i class="line-number"></i>					var right = new AMITwigExprNode(this.tokenizer.peekType(), this.tokenizer.peekToken());
<i class="line-number"></i>					this.tokenizer.next();
<i class="line-number"></i>
<i class="line-number"></i>					node.nodeLeft = left;
<i class="line-number"></i>					node.nodeRight = right;
<i class="line-number"></i>
<i class="line-number"></i>					return node;
<i class="line-number"></i>				}
<i class="line-number"></i>			}
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>		throw 'syntax error, line `' + this.line + '`, invalid range';
<i class="line-number"></i>
<i class="line-number"></i>		/*---------------------------------------------------------*/
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>});
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>/* AMITwigExprNode                                                         */
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>$AMIClass('AMITwigExprNode', {
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	$init: function(nodeType, nodeValue)
<i class="line-number"></i>	{
<i class="line-number"></i>		this.nodeType = nodeType
<i class="line-number"></i>		this.nodeValue = nodeValue
<i class="line-number"></i>		this.nodeLeft = null;
<i class="line-number"></i>		this.nodeRight = null;
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	_dump: function(nodes, edges, pCnt)
<i class="line-number"></i>	{
<i class="line-number"></i>		var cnt = pCnt[0];
<i class="line-number"></i>
<i class="line-number"></i>		nodes.push('\tnode' + cnt + ' [label="' + this.nodeValue.replace('"', '\\"') + '"];');
<i class="line-number"></i>
<i class="line-number"></i>		if(this.nodeLeft)
<i class="line-number"></i>		{
<i class="line-number"></i>			var CNT = ++pCnt[0];
<i class="line-number"></i>			edges.push('\tnode' + cnt + ' -> node' + CNT + ';');
<i class="line-number"></i>			this.nodeLeft._dump(nodes, edges, pCnt);
<i class="line-number"></i>		}
<i class="line-number"></i>
<i class="line-number"></i>		if(this.nodeRight)
<i class="line-number"></i>		{
<i class="line-number"></i>			var CNT = ++pCnt[0];
<i class="line-number"></i>			edges.push('\tnode' + cnt + ' -> node' + CNT + ';');
<i class="line-number"></i>			this.nodeRight._dump(nodes, edges, pCnt);
<i class="line-number"></i>		}
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>
<i class="line-number"></i>	dump: function()
<i class="line-number"></i>	{
<i class="line-number"></i>		var nodes = [];
<i class="line-number"></i>		var edges = [];
<i class="line-number"></i>
<i class="line-number"></i>		this._dump(nodes, edges, [0]);
<i class="line-number"></i>
<i class="line-number"></i>		return 'digraph ast {\n\trankdir=TB;\n' + nodes.join('\n') + '\n' + edges.join('\n') + '\n}';
<i class="line-number"></i>	},
<i class="line-number"></i>
<i class="line-number"></i>	/*-----------------------------------------------------------------*/
<i class="line-number"></i>});
<i class="line-number"></i>
<i class="line-number"></i>/*-------------------------------------------------------------------------*/
<i class="line-number"></i></code></pre>
  </article>
</section>




  </div>

</div>