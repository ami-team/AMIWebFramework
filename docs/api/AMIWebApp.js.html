<link rel="stylesheet" type="text/css" href="docs/api/css/AMI-template.css"></link>

<div class="row">

  <nav class="col-md-3">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">AMI Web framework API</h3>
      </div>
      <div class="panel-body jsdoc-menu">
        <h5><a href="?subapp=amiDocument&userdata=api/index.html"><i class="fa fa-home"></i> Home</a></h5><h5><a href="#ami_doc_memu_Global" data-toggle="collapse"><i class="fa fa-book"></i> Global</a></h5><ul class="collapse" id="ami_doc_memu_Global"><li><a href="?subapp=amiDocument&userdata=api/global.html#amiRegisterSubApp">amiRegisterSubApp</a></li></ul><h5><a href="#ami_doc_memu_Namespaces" data-toggle="collapse"><i class="fa fa-book"></i> Namespaces</a></h5><ul class="collapse" id="ami_doc_memu_Namespaces"><li><a href="?subapp=amiDocument&userdata=api/amiCommand.html">amiCommand</a></li><li><a href="?subapp=amiDocument&userdata=api/amiLogin.html">amiLogin</a></li><li><a href="?subapp=amiDocument&userdata=api/amiTokenizer.html">amiTokenizer</a></li><li><a href="?subapp=amiDocument&userdata=api/amiTwigExprInterpreter.html">amiTwigExprInterpreter</a></li><li><a href="?subapp=amiDocument&userdata=api/amiWebApp.html">amiWebApp</a></li></ul><h5><a href="#ami_doc_memu_Interfaces" data-toggle="collapse"><i class="fa fa-book"></i> Interfaces</a></h5><ul class="collapse" id="ami_doc_memu_Interfaces"><li><a href="?subapp=amiDocument&userdata=api/AMISubApp.html">AMISubApp</a></li></ul><h5><a href="#ami_doc_memu_Classes" data-toggle="collapse"><i class="fa fa-book"></i> Classes</a></h5><ul class="collapse" id="ami_doc_memu_Classes"><li><a href="?subapp=amiDocument&userdata=api/AMITwigExprCompiler.html">AMITwigExprCompiler</a></li></ul><h5><a href="#ami_doc_memu_Events" data-toggle="collapse"><i class="fa fa-book"></i> Events</a></h5><ul class="collapse" id="ami_doc_memu_Events"><li><a href="?subapp=amiDocument&userdata=api/amiWebApp.html#event:onStart">onStart</a></li><li><a href="?subapp=amiDocument&userdata=api/amiWebApp.html#event:onToolbarUpdateNeeded">onToolbarUpdateNeeded</a></li></ul>
      </div>
    </div>
  </nav>

  <div class="col-md-9 jsdoc-content">
    <h1>Source: AMIWebApp.js</h1>
    



    
<section>
  <article>
    <pre class="ami-code"><code><i class="line-number" id="line1"></i>/*!
<i class="line-number" id="line2"></i> * AMI Web Framework
<i class="line-number" id="line3"></i> *
<i class="line-number" id="line4"></i> * Copyright (c) 2014-2015 The AMI Team
<i class="line-number" id="line5"></i> * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
<i class="line-number" id="line6"></i> *
<i class="line-number" id="line7"></i> */
<i class="line-number" id="line8"></i>
<i class="line-number" id="line9"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line10"></i>/* INTERNAL VARIABLES                                                      */
<i class="line-number" id="line11"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line12"></i>
<i class="line-number" id="line13"></i>var _ami_internal_nonce = jQuery.now();
<i class="line-number" id="line14"></i>
<i class="line-number" id="line15"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line16"></i>
<i class="line-number" id="line17"></i>var _ami_internal_subAppDict = {};
<i class="line-number" id="line18"></i>
<i class="line-number" id="line19"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line20"></i>
<i class="line-number" id="line21"></i>var _ami_internal_scripts = [];
<i class="line-number" id="line22"></i>var _ami_internal_sheets = [];
<i class="line-number" id="line23"></i>
<i class="line-number" id="line24"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line25"></i>/* INTERNAL FUNCTIONS                                                      */
<i class="line-number" id="line26"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line27"></i>
<i class="line-number" id="line28"></i>function _ami_internal_always(deferred, func)
<i class="line-number" id="line29"></i>{
<i class="line-number" id="line30"></i>	if(deferred &amp;&amp; deferred.always)
<i class="line-number" id="line31"></i>	{
<i class="line-number" id="line32"></i>		deferred.always(function() {
<i class="line-number" id="line33"></i>
<i class="line-number" id="line34"></i>			func();
<i class="line-number" id="line35"></i>		});
<i class="line-number" id="line36"></i>	}
<i class="line-number" id="line37"></i>	else
<i class="line-number" id="line38"></i>	{
<i class="line-number" id="line39"></i>		func();
<i class="line-number" id="line40"></i>	}
<i class="line-number" id="line41"></i>}
<i class="line-number" id="line42"></i>
<i class="line-number" id="line43"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line44"></i>/* GLOBAL FUNCTIONS                                                        */
<i class="line-number" id="line45"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line46"></i>
<i class="line-number" id="line47"></i>/**
<i class="line-number" id="line48"></i>  * Register a sub-application
<i class="line-number" id="line49"></i>  * @param {String} subAppName the sub-application name
<i class="line-number" id="line50"></i>  * @param {?} subAppInstance the sub-application instance
<i class="line-number" id="line51"></i>  */
<i class="line-number" id="line52"></i>
<i class="line-number" id="line53"></i>function amiRegisterSubApp(subAppName, subAppInstance)
<i class="line-number" id="line54"></i>{
<i class="line-number" id="line55"></i>	_ami_internal_subAppDict[subAppName.toLowerCase()] = subAppInstance;
<i class="line-number" id="line56"></i>}
<i class="line-number" id="line57"></i>
<i class="line-number" id="line58"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line59"></i>/* amiWebApp                                                               */
<i class="line-number" id="line60"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line61"></i>
<i class="line-number" id="line62"></i>/**
<i class="line-number" id="line63"></i> * The AMI webapp subsystem
<i class="line-number" id="line64"></i> * @namespace amiWebApp
<i class="line-number" id="line65"></i> */
<i class="line-number" id="line66"></i>
<i class="line-number" id="line67"></i>var amiWebApp = {
<i class="line-number" id="line68"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line69"></i>	/* CONSTRUCTOR                                                     */
<i class="line-number" id="line70"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line71"></i>
<i class="line-number" id="line72"></i>	init: function()
<i class="line-number" id="line73"></i>	{
<i class="line-number" id="line74"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line75"></i>		/* DEFAULT SHEETS                                          */
<i class="line-number" id="line76"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line77"></i>
<i class="line-number" id="line78"></i>		this.loadSheets([
<i class="line-number" id="line79"></i>			/* Third-party */
<i class="line-number" id="line80"></i>			'css/bootstrap.min.css',
<i class="line-number" id="line81"></i>			'css/bootstrap.vertical-tabs.min.css',
<i class="line-number" id="line82"></i>			'css/font-awesome.min.css',
<i class="line-number" id="line83"></i>			/* AMI */
<i class="line-number" id="line84"></i>			'css/AMI/AMIWebApp.min.css',
<i class="line-number" id="line85"></i>		]).fail(function(data) {
<i class="line-number" id="line86"></i>
<i class="line-number" id="line87"></i>			alert('Service temporarily unavailable, please try reloading the page...');
<i class="line-number" id="line88"></i>
<i class="line-number" id="line89"></i>			console.error(data);
<i class="line-number" id="line90"></i>		});
<i class="line-number" id="line91"></i>
<i class="line-number" id="line92"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line93"></i>		/* DEFAULT SCRIPTS                                         */
<i class="line-number" id="line94"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line95"></i>
<i class="line-number" id="line96"></i>		this.loadScripts([
<i class="line-number" id="line97"></i>			/* Third-party */
<i class="line-number" id="line98"></i>			'js/jspath.min.js',
<i class="line-number" id="line99"></i>			'js/bootstrap.min.js',
<i class="line-number" id="line100"></i>			/* AMI */
<i class="line-number" id="line101"></i>			'js/AMI/AMIObjects.min.js',
<i class="line-number" id="line102"></i>			'js/AMI/AMICommand.min.js',
<i class="line-number" id="line103"></i>			'js/AMI/AMILogin.min.js',
<i class="line-number" id="line104"></i>			'js/AMI/AMITokenizer.min.js',
<i class="line-number" id="line105"></i>			'js/AMI/AMITwigExprCompiler.min.js',
<i class="line-number" id="line106"></i>			'js/AMI/AMITwigExprInterpreter.min.js',
<i class="line-number" id="line107"></i>			'js/AMI/AMITwig.min.js',
<i class="line-number" id="line108"></i>		]).fail(function(data) {
<i class="line-number" id="line109"></i>
<i class="line-number" id="line110"></i>			alert('Service temporarily unavailable, please try reloading the page...');
<i class="line-number" id="line111"></i>
<i class="line-number" id="line112"></i>			console.error(data);
<i class="line-number" id="line113"></i>		});
<i class="line-number" id="line114"></i>
<i class="line-number" id="line115"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line116"></i>		/* DEFAULT FRAGMENTS                                       */
<i class="line-number" id="line117"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line118"></i>
<i class="line-number" id="line119"></i>		this.loadHTMLs([
<i class="line-number" id="line120"></i>			'html/AMI/Fragment/alert_success.html',
<i class="line-number" id="line121"></i>			'html/AMI/Fragment/alert_info.html',
<i class="line-number" id="line122"></i>			'html/AMI/Fragment/alert_warning.html',
<i class="line-number" id="line123"></i>			'html/AMI/Fragment/alert_error.html',
<i class="line-number" id="line124"></i>		], {context: this}).done(function(data) {
<i class="line-number" id="line125"></i>			this.fragmentSuccess = data[0];
<i class="line-number" id="line126"></i>			this.fragmentInfo = data[1];
<i class="line-number" id="line127"></i>			this.fragmentWarning = data[2];
<i class="line-number" id="line128"></i>			this.fragmentError = data[3];
<i class="line-number" id="line129"></i>		}).fail(function(data) {
<i class="line-number" id="line130"></i>
<i class="line-number" id="line131"></i>			alert('Service temporarily unavailable, please try reloading the page...');
<i class="line-number" id="line132"></i>
<i class="line-number" id="line133"></i>			console.error(data);
<i class="line-number" id="line134"></i>		});
<i class="line-number" id="line135"></i>
<i class="line-number" id="line136"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line137"></i>		/* AVAILABILITY                                            */
<i class="line-number" id="line138"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line139"></i>
<i class="line-number" id="line140"></i>		setTimeout(function() {
<i class="line-number" id="line141"></i>
<i class="line-number" id="line142"></i>			if($('#ami_main_content').is(':empty'))
<i class="line-number" id="line143"></i>			{
<i class="line-number" id="line144"></i>				$('#ami_main_content').html('Service temporarily unavailable, please try reloading the page...');
<i class="line-number" id="line145"></i>			}
<i class="line-number" id="line146"></i>
<i class="line-number" id="line147"></i>		}, 8000);
<i class="line-number" id="line148"></i>
<i class="line-number" id="line149"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line150"></i>		/* URLs                                                    */
<i class="line-number" id="line151"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line152"></i>
<i class="line-number" id="line153"></i>		var url = document.location.href;
<i class="line-number" id="line154"></i>
<i class="line-number" id="line155"></i>		var index1 = url./**/indexOf('?');
<i class="line-number" id="line156"></i>		if(index1 >= 0) url = url.substring(0, index1);
<i class="line-number" id="line157"></i>		var index2 = url.lastIndexOf('/');
<i class="line-number" id="line158"></i>
<i class="line-number" id="line159"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line160"></i>
<i class="line-number" id="line161"></i>		/**
<i class="line-number" id="line162"></i>		  * {String} WebApp URL
<i class="line-number" id="line163"></i>		  * @type {String}
<i class="line-number" id="line164"></i>		  */
<i class="line-number" id="line165"></i>
<i class="line-number" id="line166"></i>		this.webAppURL = url;
<i class="line-number" id="line167"></i>
<i class="line-number" id="line168"></i>		while(this.webAppURL[this.webAppURL.length - 1] === '/')
<i class="line-number" id="line169"></i>		{
<i class="line-number" id="line170"></i>			this.webAppURL = this.webAppURL.substring(0, this.webAppURL.length - 1);
<i class="line-number" id="line171"></i>		}
<i class="line-number" id="line172"></i>
<i class="line-number" id="line173"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line174"></i>
<i class="line-number" id="line175"></i>		/**
<i class="line-number" id="line176"></i>		  * Origin URL
<i class="line-number" id="line177"></i>		  * @type {String}
<i class="line-number" id="line178"></i>		  */
<i class="line-number" id="line179"></i>
<i class="line-number" id="line180"></i>		this.originURL = url.substring(0, index2);
<i class="line-number" id="line181"></i>
<i class="line-number" id="line182"></i>		while(this.originURL[this.originURL.length - 1] === '/')
<i class="line-number" id="line183"></i>		{
<i class="line-number" id="line184"></i>			this.originURL = this.originURL.substring(0, this.originURL.length - 1);
<i class="line-number" id="line185"></i>		}
<i class="line-number" id="line186"></i>
<i class="line-number" id="line187"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line188"></i>		/* ARGs                                                    */
<i class="line-number" id="line189"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line190"></i>
<i class="line-number" id="line191"></i>		/**
<i class="line-number" id="line192"></i>		  * URL arguments
<i class="line-number" id="line193"></i>		  * @type {Array&lt;String>}
<i class="line-number" id="line194"></i>		  */
<i class="line-number" id="line195"></i>
<i class="line-number" id="line196"></i>		this.args = {};
<i class="line-number" id="line197"></i>
<i class="line-number" id="line198"></i>		if(window.location.search)
<i class="line-number" id="line199"></i>		{
<i class="line-number" id="line200"></i>			var prarams = window.location.search.substring(1).split('&amp;');
<i class="line-number" id="line201"></i>
<i class="line-number" id="line202"></i>			for(var i in prarams)
<i class="line-number" id="line203"></i>			{
<i class="line-number" id="line204"></i>				var pair = prarams[i].split('=');
<i class="line-number" id="line205"></i>
<i class="line-number" id="line206"></i>				this.args[pair[0]] = decodeURIComponent(pair[1]);
<i class="line-number" id="line207"></i>			}
<i class="line-number" id="line208"></i>		}
<i class="line-number" id="line209"></i>
<i class="line-number" id="line210"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line211"></i>	},
<i class="line-number" id="line212"></i>
<i class="line-number" id="line213"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line214"></i>	/* TOOLS                                                           */
<i class="line-number" id="line215"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line216"></i>
<i class="line-number" id="line217"></i>	/**
<i class="line-number" id="line218"></i>	  * Check whether the WebApp is executed locally (file://, localhost or 127.0.0.1) or not
<i class="line-number" id="line219"></i>	  * @returns {Boolean} True or False
<i class="line-number" id="line220"></i>	  */
<i class="line-number" id="line221"></i>
<i class="line-number" id="line222"></i>	isLocal: function()
<i class="line-number" id="line223"></i>	{
<i class="line-number" id="line224"></i>		return document.location.protocol === (('file:'))
<i class="line-number" id="line225"></i>		       ||
<i class="line-number" id="line226"></i>		       document.location.hostname === 'localhost'
<i class="line-number" id="line227"></i>		       ||
<i class="line-number" id="line228"></i>		       document.location.hostname === '127.0.0.1'
<i class="line-number" id="line229"></i>		;
<i class="line-number" id="line230"></i>	},
<i class="line-number" id="line231"></i>
<i class="line-number" id="line232"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line233"></i>
<i class="line-number" id="line234"></i>	/**
<i class="line-number" id="line235"></i>	  * Escapes the given string from text to HTML
<i class="line-number" id="line236"></i>	  * @param {String} string the unescaped string
<i class="line-number" id="line237"></i>	  * @returns {String} The escaped string
<i class="line-number" id="line238"></i>	  */
<i class="line-number" id="line239"></i>
<i class="line-number" id="line240"></i>	textToHtml: function(s)
<i class="line-number" id="line241"></i>	{
<i class="line-number" id="line242"></i>		return s.replace(/"/g, '&amp;quot;').replace(/&lt;/g, '&amp;lt;').replace(/>/g, '&amp;gt;');
<i class="line-number" id="line243"></i>	},
<i class="line-number" id="line244"></i>
<i class="line-number" id="line245"></i>	/**
<i class="line-number" id="line246"></i>	  * Unescapes the given string from HTML to text
<i class="line-number" id="line247"></i>	  * @param {String} string the escaped string
<i class="line-number" id="line248"></i>	  * @returns {String} The unescaped string
<i class="line-number" id="line249"></i>	  */
<i class="line-number" id="line250"></i>
<i class="line-number" id="line251"></i>	htmlToText: function(s)
<i class="line-number" id="line252"></i>	{
<i class="line-number" id="line253"></i>		return s.replace(/&amp;gt;/g, '>').replace(/&amp;lt;/g, '&lt;').replace(/&amp;quot;/g, '"');
<i class="line-number" id="line254"></i>	},
<i class="line-number" id="line255"></i>
<i class="line-number" id="line256"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line257"></i>
<i class="line-number" id="line258"></i>	/**
<i class="line-number" id="line259"></i>	  * Escapes the given string from text to JavaScript string
<i class="line-number" id="line260"></i>	  * @param {String} string the unescaped string
<i class="line-number" id="line261"></i>	  * @returns {String} The escaped string
<i class="line-number" id="line262"></i>	  */
<i class="line-number" id="line263"></i>
<i class="line-number" id="line264"></i>	textToString: function(s)
<i class="line-number" id="line265"></i>	{
<i class="line-number" id="line266"></i>		return s.replace(/\\/g, '\\\\').replace(/"/g, '\\\"').replace(/'/g, '\\\'');
<i class="line-number" id="line267"></i>	},
<i class="line-number" id="line268"></i>
<i class="line-number" id="line269"></i>	/**
<i class="line-number" id="line270"></i>	  * Unescapes the given string from JavaScript string to text
<i class="line-number" id="line271"></i>	  * @param {String} string the escaped string
<i class="line-number" id="line272"></i>	  * @returns {String} The unescaped string
<i class="line-number" id="line273"></i>	  */
<i class="line-number" id="line274"></i>
<i class="line-number" id="line275"></i>	stringToText: function(s)
<i class="line-number" id="line276"></i>	{
<i class="line-number" id="line277"></i>		return s.replace(/\\'/g, '\'').replace(/\\"/g, '\"').replace(/\\\\/g, '\\');
<i class="line-number" id="line278"></i>	},
<i class="line-number" id="line279"></i>
<i class="line-number" id="line280"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line281"></i>
<i class="line-number" id="line282"></i>	/**
<i class="line-number" id="line283"></i>	  * Escapes the given string from HTML to JavaScript string
<i class="line-number" id="line284"></i>	  * @param {String} string the unescaped string
<i class="line-number" id="line285"></i>	  * @returns {String} The escaped string
<i class="line-number" id="line286"></i>	  */
<i class="line-number" id="line287"></i>
<i class="line-number" id="line288"></i>	htmlToString: function(s)
<i class="line-number" id="line289"></i>	{
<i class="line-number" id="line290"></i>		return s.replace(/\\/g, '\\\\').replace(/&amp;quot;/g, '\\&amp;quot;').replace(/'/g, '\\\'');
<i class="line-number" id="line291"></i>	},
<i class="line-number" id="line292"></i>
<i class="line-number" id="line293"></i>	/**
<i class="line-number" id="line294"></i>	  * Unescapes the given string from JavaScript string to HTML
<i class="line-number" id="line295"></i>	  * @param {String} string the escaped string
<i class="line-number" id="line296"></i>	  * @returns {String} The unescaped string
<i class="line-number" id="line297"></i>	  */
<i class="line-number" id="line298"></i>
<i class="line-number" id="line299"></i>	stringToHtml: function(s)
<i class="line-number" id="line300"></i>	{
<i class="line-number" id="line301"></i>		return s.replace(/\\'/g, '\'').replace(/\\&amp;quot;/g, '&amp;quot;').replace(/\\\\/g, '\\');
<i class="line-number" id="line302"></i>	},
<i class="line-number" id="line303"></i>
<i class="line-number" id="line304"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line305"></i>	/* DYNAMIC SHEET LOADING                                           */
<i class="line-number" id="line306"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line307"></i>
<i class="line-number" id="line308"></i>	/**
<i class="line-number" id="line309"></i>	  * Loads CSS sheets asynchronously
<i class="line-number" id="line310"></i>	  * @param {(Array|String)} sheets the array of sheets
<i class="line-number" id="line311"></i>	  * @param {Object} [settings] dictionary of settings (context)
<i class="line-number" id="line312"></i>	  * @returns {$.Deferred} A JQuery deferred object
<i class="line-number" id="line313"></i>	  */
<i class="line-number" id="line314"></i>
<i class="line-number" id="line315"></i>	loadSheets: function(sheets, settings)
<i class="line-number" id="line316"></i>	{
<i class="line-number" id="line317"></i>		var context = null;
<i class="line-number" id="line318"></i>
<i class="line-number" id="line319"></i>		if(settings &amp;&amp; 'context' in settings)
<i class="line-number" id="line320"></i>		{
<i class="line-number" id="line321"></i>			context = settings['context'];
<i class="line-number" id="line322"></i>		}
<i class="line-number" id="line323"></i>
<i class="line-number" id="line324"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line325"></i>
<i class="line-number" id="line326"></i>		if(!(sheets instanceof Array))
<i class="line-number" id="line327"></i>		{
<i class="line-number" id="line328"></i>			sheets = [sheets];
<i class="line-number" id="line329"></i>		}
<i class="line-number" id="line330"></i>
<i class="line-number" id="line331"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line332"></i>
<i class="line-number" id="line333"></i>		var html = '';
<i class="line-number" id="line334"></i>
<i class="line-number" id="line335"></i>		for(var i in sheets)
<i class="line-number" id="line336"></i>		{
<i class="line-number" id="line337"></i>			if(_ami_internal_sheets.indexOf(sheets[i]) &lt; 0)
<i class="line-number" id="line338"></i>			{
<i class="line-number" id="line339"></i>				_ami_internal_sheets.push(sheets[i]);
<i class="line-number" id="line340"></i>
<i class="line-number" id="line341"></i>				html += '&lt;link rel="stylesheet" type="text/css" href="' + sheets[i] + '?_=' + _ami_internal_nonce++ + '">&lt;/link>';
<i class="line-number" id="line342"></i>			}
<i class="line-number" id="line343"></i>		}
<i class="line-number" id="line344"></i>
<i class="line-number" id="line345"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line346"></i>
<i class="line-number" id="line347"></i>		var result = $.Deferred();
<i class="line-number" id="line348"></i>
<i class="line-number" id="line349"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line350"></i>
<i class="line-number" id="line351"></i>		$('head').append(html).promise().done(function() {
<i class="line-number" id="line352"></i>
<i class="line-number" id="line353"></i>			if(context) {
<i class="line-number" id="line354"></i>				result.resolveWith(context);
<i class="line-number" id="line355"></i>			} else {
<i class="line-number" id="line356"></i>				result.resolve();
<i class="line-number" id="line357"></i>			}
<i class="line-number" id="line358"></i>		});
<i class="line-number" id="line359"></i>
<i class="line-number" id="line360"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line361"></i>
<i class="line-number" id="line362"></i>		return result.promise();
<i class="line-number" id="line363"></i>	},
<i class="line-number" id="line364"></i>
<i class="line-number" id="line365"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line366"></i>	/* DYNAMIC SCRIPT LOADING                                          */
<i class="line-number" id="line367"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line368"></i>
<i class="line-number" id="line369"></i>	/**
<i class="line-number" id="line370"></i>	  * Loads JavaScript scripts asynchronously
<i class="line-number" id="line371"></i>	  * @param {(Array|String)} scripts the array of scripts
<i class="line-number" id="line372"></i>	  * @param {Object} [settings] dictionary of settings (context)
<i class="line-number" id="line373"></i>	  * @returns {$.Deferred} A JQuery deferred object
<i class="line-number" id="line374"></i>	  */
<i class="line-number" id="line375"></i>
<i class="line-number" id="line376"></i>	loadScripts: function(scripts, settings)
<i class="line-number" id="line377"></i>	{
<i class="line-number" id="line378"></i>		var context = null;
<i class="line-number" id="line379"></i>
<i class="line-number" id="line380"></i>		if(settings &amp;&amp; 'context' in settings)
<i class="line-number" id="line381"></i>		{
<i class="line-number" id="line382"></i>			context = settings['context'];
<i class="line-number" id="line383"></i>		}
<i class="line-number" id="line384"></i>
<i class="line-number" id="line385"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line386"></i>
<i class="line-number" id="line387"></i>		if(!(scripts instanceof Array))
<i class="line-number" id="line388"></i>		{
<i class="line-number" id="line389"></i>			scripts = [scripts];
<i class="line-number" id="line390"></i>		}
<i class="line-number" id="line391"></i>
<i class="line-number" id="line392"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line393"></i>
<i class="line-number" id="line394"></i>		var html = '';
<i class="line-number" id="line395"></i>
<i class="line-number" id="line396"></i>		for(var i in scripts)
<i class="line-number" id="line397"></i>		{
<i class="line-number" id="line398"></i>			if(_ami_internal_scripts.indexOf(scripts[i]) &lt; 0)
<i class="line-number" id="line399"></i>			{
<i class="line-number" id="line400"></i>				_ami_internal_scripts.push(scripts[i]);
<i class="line-number" id="line401"></i>
<i class="line-number" id="line402"></i>				html += '&lt;script type="text/javascript" src="' + scripts[i] + '?_=' + _ami_internal_nonce++ + '">&lt;/script>';
<i class="line-number" id="line403"></i>			}
<i class="line-number" id="line404"></i>		}
<i class="line-number" id="line405"></i>
<i class="line-number" id="line406"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line407"></i>
<i class="line-number" id="line408"></i>		var result = $.Deferred();
<i class="line-number" id="line409"></i>
<i class="line-number" id="line410"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line411"></i>
<i class="line-number" id="line412"></i>		$('head').append(html).promise().done(function() {
<i class="line-number" id="line413"></i>
<i class="line-number" id="line414"></i>			if(context) {
<i class="line-number" id="line415"></i>				result.resolveWith(context);
<i class="line-number" id="line416"></i>			} else {
<i class="line-number" id="line417"></i>				result.resolve();
<i class="line-number" id="line418"></i>			}
<i class="line-number" id="line419"></i>		});
<i class="line-number" id="line420"></i>
<i class="line-number" id="line421"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line422"></i>
<i class="line-number" id="line423"></i>		return result.promise();
<i class="line-number" id="line424"></i>	},
<i class="line-number" id="line425"></i>
<i class="line-number" id="line426"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line427"></i>	/* DYNAMIC HTML LOADING                                            */
<i class="line-number" id="line428"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line429"></i>
<i class="line-number" id="line430"></i>	_loadHTMLs: function(deferred, array, fragments, context)
<i class="line-number" id="line431"></i>	{
<i class="line-number" id="line432"></i>		if(fragments.length > 0)
<i class="line-number" id="line433"></i>		{
<i class="line-number" id="line434"></i>			var url = fragments.shift();
<i class="line-number" id="line435"></i>
<i class="line-number" id="line436"></i>			$.ajax({
<i class="line-number" id="line437"></i>				url: url,
<i class="line-number" id="line438"></i>				cache: false,
<i class="line-number" id="line439"></i>				dataType: 'html',
<i class="line-number" id="line440"></i>				context: this,
<i class="line-number" id="line441"></i>			}).done(function(data) {
<i class="line-number" id="line442"></i>
<i class="line-number" id="line443"></i>				array.push(data);
<i class="line-number" id="line444"></i>
<i class="line-number" id="line445"></i>				this._loadHTMLs(deferred, array, fragments, context);
<i class="line-number" id="line446"></i>
<i class="line-number" id="line447"></i>			}).fail(function() {
<i class="line-number" id="line448"></i>
<i class="line-number" id="line449"></i>				if(context) {
<i class="line-number" id="line450"></i>					deferred.rejectWith(context, ['could not load `' + url + '`']);
<i class="line-number" id="line451"></i>				} else {
<i class="line-number" id="line452"></i>					deferred.reject('could not load `' + url + '`');
<i class="line-number" id="line453"></i>				}
<i class="line-number" id="line454"></i>			});
<i class="line-number" id="line455"></i>		}
<i class="line-number" id="line456"></i>		else
<i class="line-number" id="line457"></i>		{
<i class="line-number" id="line458"></i>			if(context) {
<i class="line-number" id="line459"></i>				deferred.resolveWith(context, [array]);
<i class="line-number" id="line460"></i>			} else {
<i class="line-number" id="line461"></i>				deferred.resolve(array);
<i class="line-number" id="line462"></i>			}
<i class="line-number" id="line463"></i>		}
<i class="line-number" id="line464"></i>	},
<i class="line-number" id="line465"></i>
<i class="line-number" id="line466"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line467"></i>
<i class="line-number" id="line468"></i>	/**
<i class="line-number" id="line469"></i>	  * Loads HTML fragments asynchronously
<i class="line-number" id="line470"></i>	  * @param {(Array|String)} fragments the array of fragments
<i class="line-number" id="line471"></i>	  * @param {Object} [settings] dictionary of settings (context)
<i class="line-number" id="line472"></i>	  * @returns {$.Deferred} A JQuery deferred object
<i class="line-number" id="line473"></i>	  */
<i class="line-number" id="line474"></i>
<i class="line-number" id="line475"></i>	loadHTMLs: function(fragments, settings) {
<i class="line-number" id="line476"></i>
<i class="line-number" id="line477"></i>		var context = null;
<i class="line-number" id="line478"></i>
<i class="line-number" id="line479"></i>		if(settings &amp;&amp; 'context' in settings)
<i class="line-number" id="line480"></i>		{
<i class="line-number" id="line481"></i>			context = settings['context'];
<i class="line-number" id="line482"></i>		}
<i class="line-number" id="line483"></i>
<i class="line-number" id="line484"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line485"></i>
<i class="line-number" id="line486"></i>		if(!(fragments instanceof Array))
<i class="line-number" id="line487"></i>		{
<i class="line-number" id="line488"></i>			fragments = [fragments];
<i class="line-number" id="line489"></i>		}
<i class="line-number" id="line490"></i>
<i class="line-number" id="line491"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line492"></i>
<i class="line-number" id="line493"></i>		var result = $.Deferred();
<i class="line-number" id="line494"></i>
<i class="line-number" id="line495"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line496"></i>
<i class="line-number" id="line497"></i>		this._loadHTMLs(result, [], fragments, context);
<i class="line-number" id="line498"></i>
<i class="line-number" id="line499"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line500"></i>
<i class="line-number" id="line501"></i>		return result.promise();
<i class="line-number" id="line502"></i>	},
<i class="line-number" id="line503"></i>
<i class="line-number" id="line504"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line505"></i>	/* HTML CONTENT                                                    */
<i class="line-number" id="line506"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line507"></i>
<i class="line-number" id="line508"></i>	webappRegExp: /%%\s*WEBAPP_URL\s*%%/g,
<i class="line-number" id="line509"></i>	originRegExp: /%%\s*ORIGIN_URL\s*%%/g,
<i class="line-number" id="line510"></i>
<i class="line-number" id="line511"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line512"></i>
<i class="line-number" id="line513"></i>	/**
<i class="line-number" id="line514"></i>	  * Replace the HTML content of the given target
<i class="line-number" id="line515"></i>	  * @param {String} path the target path
<i class="line-number" id="line516"></i>	  * @param {String} html the HTML fragment
<i class="line-number" id="line517"></i>	  * @param {Object} [settings] dictionary of settings (context, dict)
<i class="line-number" id="line518"></i>	  * @returns {$.Deferred} A JQuery deferred object
<i class="line-number" id="line519"></i>	  */
<i class="line-number" id="line520"></i>
<i class="line-number" id="line521"></i>	replaceHTML: function(selector, html, settings)
<i class="line-number" id="line522"></i>	{
<i class="line-number" id="line523"></i>		html = html.replace(this.webappRegExp, this.webAppURL);
<i class="line-number" id="line524"></i>		html = html.replace(this.originRegExp, this.originURL);
<i class="line-number" id="line525"></i>
<i class="line-number" id="line526"></i>		var context = null;
<i class="line-number" id="line527"></i>		var dict = null;
<i class="line-number" id="line528"></i>
<i class="line-number" id="line529"></i>		if(settings)
<i class="line-number" id="line530"></i>		{
<i class="line-number" id="line531"></i>			if('context' in settings) {
<i class="line-number" id="line532"></i>				context = settings['context'];
<i class="line-number" id="line533"></i>			}
<i class="line-number" id="line534"></i>
<i class="line-number" id="line535"></i>			if('dict' in settings) {
<i class="line-number" id="line536"></i>				dict = settings['dict'];
<i class="line-number" id="line537"></i>			}
<i class="line-number" id="line538"></i>		}
<i class="line-number" id="line539"></i>
<i class="line-number" id="line540"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line541"></i>
<i class="line-number" id="line542"></i>		html = this.formatHTML(html, dict);
<i class="line-number" id="line543"></i>
<i class="line-number" id="line544"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line545"></i>
<i class="line-number" id="line546"></i>		var result = $.Deferred();
<i class="line-number" id="line547"></i>
<i class="line-number" id="line548"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line549"></i>
<i class="line-number" id="line550"></i>		var target = $(selector);
<i class="line-number" id="line551"></i>
<i class="line-number" id="line552"></i>		target.html(html).promise().done(function() {
<i class="line-number" id="line553"></i>
<i class="line-number" id="line554"></i>			target.find('.amitt').tooltip({delay: {show: 500, hide: 100}});
<i class="line-number" id="line555"></i>			target.find('.amipo[tabindex="0"]').popover({html: true, trigger: 'focus'});
<i class="line-number" id="line556"></i>			target.find('.amipo[tabindex!="0"]').popover({html: true, trigger: 'click'});
<i class="line-number" id="line557"></i>
<i class="line-number" id="line558"></i>			target.find('.ami-select').each(function() {
<i class="line-number" id="line559"></i>				$(this).wrap('&lt;div class="ami-select-wrapper">&lt;/div>');
<i class="line-number" id="line560"></i>			});
<i class="line-number" id="line561"></i>
<i class="line-number" id="line562"></i>			if(context) {
<i class="line-number" id="line563"></i>				result.resolveWith(context);
<i class="line-number" id="line564"></i>			} else {
<i class="line-number" id="line565"></i>				result.resolve();
<i class="line-number" id="line566"></i>			}
<i class="line-number" id="line567"></i>		});
<i class="line-number" id="line568"></i>
<i class="line-number" id="line569"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line570"></i>
<i class="line-number" id="line571"></i>		return result.promise();
<i class="line-number" id="line572"></i>	},
<i class="line-number" id="line573"></i>
<i class="line-number" id="line574"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line575"></i>
<i class="line-number" id="line576"></i>	/**
<i class="line-number" id="line577"></i>	  * Prepends a HTML fragment to the given target content
<i class="line-number" id="line578"></i>	  * @param {String} path the target path
<i class="line-number" id="line579"></i>	  * @param {String} html the HTML fragment
<i class="line-number" id="line580"></i>	  * @param {Object} [settings] dictionary of settings (context, dict)
<i class="line-number" id="line581"></i>	  * @returns {$.Deferred} A JQuery deferred object
<i class="line-number" id="line582"></i>	  */
<i class="line-number" id="line583"></i>
<i class="line-number" id="line584"></i>	prependHTML: function(selector, html, settings)
<i class="line-number" id="line585"></i>	{
<i class="line-number" id="line586"></i>		html = html.replace(this.webappRegExp, this.webAppURL);
<i class="line-number" id="line587"></i>		html = html.replace(this.originRegExp, this.originURL);
<i class="line-number" id="line588"></i>
<i class="line-number" id="line589"></i>		var context = null;
<i class="line-number" id="line590"></i>		var dict = null;
<i class="line-number" id="line591"></i>
<i class="line-number" id="line592"></i>		if(settings)
<i class="line-number" id="line593"></i>		{
<i class="line-number" id="line594"></i>			if('context' in settings) {
<i class="line-number" id="line595"></i>				context = settings['context'];
<i class="line-number" id="line596"></i>			}
<i class="line-number" id="line597"></i>
<i class="line-number" id="line598"></i>			if('dict' in settings) {
<i class="line-number" id="line599"></i>				dict = settings['dict'];
<i class="line-number" id="line600"></i>			}
<i class="line-number" id="line601"></i>		}
<i class="line-number" id="line602"></i>
<i class="line-number" id="line603"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line604"></i>
<i class="line-number" id="line605"></i>		html = this.formatHTML(html, dict);
<i class="line-number" id="line606"></i>
<i class="line-number" id="line607"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line608"></i>
<i class="line-number" id="line609"></i>		var result = $.Deferred();
<i class="line-number" id="line610"></i>
<i class="line-number" id="line611"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line612"></i>
<i class="line-number" id="line613"></i>		var target = $(selector);
<i class="line-number" id="line614"></i>
<i class="line-number" id="line615"></i>		target.prepend(html).promise().done(function() {
<i class="line-number" id="line616"></i>
<i class="line-number" id="line617"></i>			target.find('.amitt').tooltip({delay: {show: 500, hide: 100}});
<i class="line-number" id="line618"></i>			target.find('.amipo[tabindex="0"]').popover({html: true, trigger: 'focus'});
<i class="line-number" id="line619"></i>			target.find('.amipo[tabindex!="0"]').popover({html: true, trigger: 'click'});
<i class="line-number" id="line620"></i>
<i class="line-number" id="line621"></i>			target.find('.ami-select').each(function() {
<i class="line-number" id="line622"></i>				$(this).wrap('&lt;div class="ami-select-wrapper">&lt;/div>');
<i class="line-number" id="line623"></i>			});
<i class="line-number" id="line624"></i>
<i class="line-number" id="line625"></i>			if(context) {
<i class="line-number" id="line626"></i>				result.resolveWith(context);
<i class="line-number" id="line627"></i>			} else {
<i class="line-number" id="line628"></i>				result.resolve();
<i class="line-number" id="line629"></i>			}
<i class="line-number" id="line630"></i>		});
<i class="line-number" id="line631"></i>
<i class="line-number" id="line632"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line633"></i>
<i class="line-number" id="line634"></i>		return result.promise();
<i class="line-number" id="line635"></i>	},
<i class="line-number" id="line636"></i>
<i class="line-number" id="line637"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line638"></i>
<i class="line-number" id="line639"></i>	/**
<i class="line-number" id="line640"></i>	  * Appends a HTML fragment to the given target content
<i class="line-number" id="line641"></i>	  * @param {String} path the target path
<i class="line-number" id="line642"></i>	  * @param {String} html the HTML fragment
<i class="line-number" id="line643"></i>	  * @param {Object} [settings] dictionary of settings (context, dict)
<i class="line-number" id="line644"></i>	  * @returns {$.Deferred} A JQuery deferred object
<i class="line-number" id="line645"></i>	  */
<i class="line-number" id="line646"></i>
<i class="line-number" id="line647"></i>	appendHTML: function(selector, html, settings)
<i class="line-number" id="line648"></i>	{
<i class="line-number" id="line649"></i>		html = html.replace(this.webappRegExp, this.webAppURL);
<i class="line-number" id="line650"></i>		html = html.replace(this.originRegExp, this.originURL);
<i class="line-number" id="line651"></i>
<i class="line-number" id="line652"></i>		var context = null;
<i class="line-number" id="line653"></i>		var dict = null;
<i class="line-number" id="line654"></i>
<i class="line-number" id="line655"></i>		if(settings)
<i class="line-number" id="line656"></i>		{
<i class="line-number" id="line657"></i>			if('context' in settings) {
<i class="line-number" id="line658"></i>				context = settings['context'];
<i class="line-number" id="line659"></i>			}
<i class="line-number" id="line660"></i>
<i class="line-number" id="line661"></i>			if('dict' in settings) {
<i class="line-number" id="line662"></i>				dict = settings['dict'];
<i class="line-number" id="line663"></i>			}
<i class="line-number" id="line664"></i>		}
<i class="line-number" id="line665"></i>
<i class="line-number" id="line666"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line667"></i>
<i class="line-number" id="line668"></i>		html = this.formatHTML(html, dict);
<i class="line-number" id="line669"></i>
<i class="line-number" id="line670"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line671"></i>
<i class="line-number" id="line672"></i>		var result = $.Deferred();
<i class="line-number" id="line673"></i>
<i class="line-number" id="line674"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line675"></i>
<i class="line-number" id="line676"></i>		var target = $(selector);
<i class="line-number" id="line677"></i>
<i class="line-number" id="line678"></i>		target.append(html).promise().done(function() {
<i class="line-number" id="line679"></i>
<i class="line-number" id="line680"></i>			target.find('.amitt').tooltip({delay: {show: 500, hide: 100}});
<i class="line-number" id="line681"></i>			target.find('.amipo[tabindex="0"]').popover({html: true, trigger: 'focus'});
<i class="line-number" id="line682"></i>			target.find('.amipo[tabindex!="0"]').popover({html: true, trigger: 'click'});
<i class="line-number" id="line683"></i>
<i class="line-number" id="line684"></i>			target.find('.ami-select').each(function() {
<i class="line-number" id="line685"></i>				$(this).wrap('&lt;div class="ami-select-wrapper">&lt;/div>');
<i class="line-number" id="line686"></i>			});
<i class="line-number" id="line687"></i>
<i class="line-number" id="line688"></i>			if(context) {
<i class="line-number" id="line689"></i>				result.resolveWith(context);
<i class="line-number" id="line690"></i>			} else {
<i class="line-number" id="line691"></i>				result.resolve();
<i class="line-number" id="line692"></i>			}
<i class="line-number" id="line693"></i>		});
<i class="line-number" id="line694"></i>
<i class="line-number" id="line695"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line696"></i>
<i class="line-number" id="line697"></i>		return result.promise();
<i class="line-number" id="line698"></i>	},
<i class="line-number" id="line699"></i>
<i class="line-number" id="line700"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line701"></i>
<i class="line-number" id="line702"></i>	/**
<i class="line-number" id="line703"></i>	  * Format the given HTML fragment using TWIG, see: {@link http://twig.sensiolabs.org/documentation}
<i class="line-number" id="line704"></i>	  * @param {String} html the HTML fragment
<i class="line-number" id="line705"></i>	  * @param {Object} [dict] the dictionary
<i class="line-number" id="line706"></i>	  * @returns {String} The formated HTML fragment
<i class="line-number" id="line707"></i>	  */
<i class="line-number" id="line708"></i>
<i class="line-number" id="line709"></i>	formatHTML: function(html, dict)
<i class="line-number" id="line710"></i>	{
<i class="line-number" id="line711"></i>		if(dict instanceof Array)
<i class="line-number" id="line712"></i>		{
<i class="line-number" id="line713"></i>			var result = '';
<i class="line-number" id="line714"></i>
<i class="line-number" id="line715"></i>			for(var i in dict)
<i class="line-number" id="line716"></i>			{
<i class="line-number" id="line717"></i>				result += amiTwig.render(html, dict[i]);
<i class="line-number" id="line718"></i>			}
<i class="line-number" id="line719"></i>
<i class="line-number" id="line720"></i>			return result;
<i class="line-number" id="line721"></i>		}
<i class="line-number" id="line722"></i>		else
<i class="line-number" id="line723"></i>		{
<i class="line-number" id="line724"></i>			return amiTwig.render(html, dict);
<i class="line-number" id="line725"></i>		}
<i class="line-number" id="line726"></i>	},
<i class="line-number" id="line727"></i>
<i class="line-number" id="line728"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line729"></i>	/* JSPATH                                                          */
<i class="line-number" id="line730"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line731"></i>
<i class="line-number" id="line732"></i>	/**
<i class="line-number" id="line733"></i>	  * Finds data within the given JSON, see: {@link https://github.com/dfilatov/jspath}
<i class="line-number" id="line734"></i>	  * @param {String} path the path
<i class="line-number" id="line735"></i>	  * @param {Object} json the JSON
<i class="line-number" id="line736"></i>	  * @returns {Array} The resulting array
<i class="line-number" id="line737"></i>	  */
<i class="line-number" id="line738"></i>
<i class="line-number" id="line739"></i>	jspath: function(path, json)
<i class="line-number" id="line740"></i>	{
<i class="line-number" id="line741"></i>		return JSPath.apply(path, json);
<i class="line-number" id="line742"></i>	},
<i class="line-number" id="line743"></i>
<i class="line-number" id="line744"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line745"></i>	/* LOCK                                                            */
<i class="line-number" id="line746"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line747"></i>
<i class="line-number" id="line748"></i>	/**
<i class="line-number" id="line749"></i>	  * Locks the web application
<i class="line-number" id="line750"></i>	  */
<i class="line-number" id="line751"></i>
<i class="line-number" id="line752"></i>	lock: function()
<i class="line-number" id="line753"></i>	{
<i class="line-number" id="line754"></i>		$('#ami_locker').css('display', 'block');
<i class="line-number" id="line755"></i>	},
<i class="line-number" id="line756"></i>
<i class="line-number" id="line757"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line758"></i>
<i class="line-number" id="line759"></i>	/**
<i class="line-number" id="line760"></i>	  * Unlocks the web application
<i class="line-number" id="line761"></i>	  */
<i class="line-number" id="line762"></i>
<i class="line-number" id="line763"></i>	unlock: function()
<i class="line-number" id="line764"></i>	{
<i class="line-number" id="line765"></i>		$('#ami_locker').css('display', 'none');
<i class="line-number" id="line766"></i>	},
<i class="line-number" id="line767"></i>
<i class="line-number" id="line768"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line769"></i>	/* MESSAGES                                                        */
<i class="line-number" id="line770"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line771"></i>
<i class="line-number" id="line772"></i>	/**
<i class="line-number" id="line773"></i>	  * Show a 'success' message
<i class="line-number" id="line774"></i>	  * @param {String} message the message
<i class="line-number" id="line775"></i>	  * @param {Boolean} [fadeOut=false] if True, the message disappears after 60s
<i class="line-number" id="line776"></i>	  */
<i class="line-number" id="line777"></i>
<i class="line-number" id="line778"></i>	success: function(message, fadeOut)
<i class="line-number" id="line779"></i>	{
<i class="line-number" id="line780"></i>		this.replaceHTML('#ami_status_content', this.fragmentSuccess, {dict: {MESSAGE: message}});
<i class="line-number" id="line781"></i>		this.unlock();
<i class="line-number" id="line782"></i>
<i class="line-number" id="line783"></i>		$(document).scrollTop(0);
<i class="line-number" id="line784"></i>
<i class="line-number" id="line785"></i>		if(fadeOut)
<i class="line-number" id="line786"></i>		{
<i class="line-number" id="line787"></i>			$('#ami_status_content .alert').fadeOut(60000);
<i class="line-number" id="line788"></i>		}
<i class="line-number" id="line789"></i>	},
<i class="line-number" id="line790"></i>
<i class="line-number" id="line791"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line792"></i>
<i class="line-number" id="line793"></i>	/**
<i class="line-number" id="line794"></i>	  * Show an 'info' message
<i class="line-number" id="line795"></i>	  * @param {String} message the message
<i class="line-number" id="line796"></i>	  * @param {Boolean} [fadeOut=false] if True, the message disappears after 60s
<i class="line-number" id="line797"></i>	  */
<i class="line-number" id="line798"></i>
<i class="line-number" id="line799"></i>	info: function(message, fadeOut)
<i class="line-number" id="line800"></i>	{
<i class="line-number" id="line801"></i>		this.replaceHTML('#ami_status_content', this.fragmentInfo, {dict: {MESSAGE: message}});
<i class="line-number" id="line802"></i>		this.unlock();
<i class="line-number" id="line803"></i>
<i class="line-number" id="line804"></i>		$(document).scrollTop(0);
<i class="line-number" id="line805"></i>
<i class="line-number" id="line806"></i>		if(fadeOut)
<i class="line-number" id="line807"></i>		{
<i class="line-number" id="line808"></i>			$('#ami_status_content .alert').fadeOut(60000);
<i class="line-number" id="line809"></i>		}
<i class="line-number" id="line810"></i>	},
<i class="line-number" id="line811"></i>
<i class="line-number" id="line812"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line813"></i>
<i class="line-number" id="line814"></i>	/**
<i class="line-number" id="line815"></i>	  * Show a 'warning' message
<i class="line-number" id="line816"></i>	  * @param {String} message the message
<i class="line-number" id="line817"></i>	  * @param {Boolean} [fadeOut=false] if True, the message disappears after 60s
<i class="line-number" id="line818"></i>	  */
<i class="line-number" id="line819"></i>
<i class="line-number" id="line820"></i>	warning: function(message, fadeOut)
<i class="line-number" id="line821"></i>	{
<i class="line-number" id="line822"></i>		this.replaceHTML('#ami_status_content', this.fragmentWarning, {dict: {MESSAGE: message}});
<i class="line-number" id="line823"></i>		this.unlock();
<i class="line-number" id="line824"></i>
<i class="line-number" id="line825"></i>		$(document).scrollTop(0);
<i class="line-number" id="line826"></i>
<i class="line-number" id="line827"></i>		if(fadeOut)
<i class="line-number" id="line828"></i>		{
<i class="line-number" id="line829"></i>			$('#ami_status_content .alert').fadeOut(60000);
<i class="line-number" id="line830"></i>		}
<i class="line-number" id="line831"></i>	},
<i class="line-number" id="line832"></i>
<i class="line-number" id="line833"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line834"></i>
<i class="line-number" id="line835"></i>	/**
<i class="line-number" id="line836"></i>	  * Show an 'error' message
<i class="line-number" id="line837"></i>	  * @param {String} message the message
<i class="line-number" id="line838"></i>	  * @param {Boolean} [fadeOut=false] if True, the message disappears after 60s
<i class="line-number" id="line839"></i>	  */
<i class="line-number" id="line840"></i>
<i class="line-number" id="line841"></i>	error: function(message, fadeOut)
<i class="line-number" id="line842"></i>	{
<i class="line-number" id="line843"></i>		this.replaceHTML('#ami_status_content', this.fragmentError, {dict: {MESSAGE: message}});
<i class="line-number" id="line844"></i>		this.unlock();
<i class="line-number" id="line845"></i>
<i class="line-number" id="line846"></i>		$(document).scrollTop(0);
<i class="line-number" id="line847"></i>
<i class="line-number" id="line848"></i>		if(fadeOut)
<i class="line-number" id="line849"></i>		{
<i class="line-number" id="line850"></i>			$('#ami_status_content .alert').fadeOut(60000);
<i class="line-number" id="line851"></i>		}
<i class="line-number" id="line852"></i>	},
<i class="line-number" id="line853"></i>
<i class="line-number" id="line854"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line855"></i>
<i class="line-number" id="line856"></i>	/**
<i class="line-number" id="line857"></i>	  * Flush messages
<i class="line-number" id="line858"></i>	  */
<i class="line-number" id="line859"></i>
<i class="line-number" id="line860"></i>	flush: function()
<i class="line-number" id="line861"></i>	{
<i class="line-number" id="line862"></i>		$('#ami_status_content').empty();
<i class="line-number" id="line863"></i>	},
<i class="line-number" id="line864"></i>
<i class="line-number" id="line865"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line866"></i>	/* WEB APPLICATION                                                 */
<i class="line-number" id="line867"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line868"></i>
<i class="line-number" id="line869"></i>	/**
<i class="line-number" id="line870"></i>	  * This method must be overloaded and is called when the web application starts
<i class="line-number" id="line871"></i>	  * @event amiWebApp#onStart
<i class="line-number" id="line872"></i>	  */
<i class="line-number" id="line873"></i>
<i class="line-number" id="line874"></i>	onStart: function()
<i class="line-number" id="line875"></i>	{
<i class="line-number" id="line876"></i>		alert('error: `this.onStart()` must be overloaded!');
<i class="line-number" id="line877"></i>	},
<i class="line-number" id="line878"></i>
<i class="line-number" id="line879"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line880"></i>
<i class="line-number" id="line881"></i>	/**
<i class="line-number" id="line882"></i>	  * This method must be overloaded and is called when the toolbar needs to be updated
<i class="line-number" id="line883"></i>	  * @event amiWebApp#onToolbarUpdateNeeded
<i class="line-number" id="line884"></i>	  */
<i class="line-number" id="line885"></i>
<i class="line-number" id="line886"></i>	onToolbarUpdateNeeded: function()
<i class="line-number" id="line887"></i>	{
<i class="line-number" id="line888"></i>		alert('error: `this.onToolbarUpdateNeeded()` must be overloaded!');
<i class="line-number" id="line889"></i> 	},
<i class="line-number" id="line890"></i>
<i class="line-number" id="line891"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line892"></i>
<i class="line-number" id="line893"></i>	/**
<i class="line-number" id="line894"></i>	  * Starts the web application
<i class="line-number" id="line895"></i>	  * @param {Object} [settings] dictionary of settings (logo_url, home_url, contact_email, template_filename, locker_filename)
<i class="line-number" id="line896"></i>	  */
<i class="line-number" id="line897"></i>
<i class="line-number" id="line898"></i>	start: function(settings)
<i class="line-number" id="line899"></i>	{
<i class="line-number" id="line900"></i>		var logo_url = 'images/logo.png';
<i class="line-number" id="line901"></i>		var home_url = 'http://ami.in2p3.fr';
<i class="line-number" id="line902"></i>		var contact_email = 'ami@lpsc.in2p3.fr';
<i class="line-number" id="line903"></i>		var template_filename = 'html/AMI/AMIWebApp_default.html';
<i class="line-number" id="line904"></i>		var locker_filename = 'html/AMI/Fragment/locker.html';
<i class="line-number" id="line905"></i>
<i class="line-number" id="line906"></i>		if(settings)
<i class="line-number" id="line907"></i>		{
<i class="line-number" id="line908"></i>			if('logo_url' in settings) {
<i class="line-number" id="line909"></i>				logo_url = settings['logo_url'];
<i class="line-number" id="line910"></i>			}
<i class="line-number" id="line911"></i>
<i class="line-number" id="line912"></i>			if('home_url' in settings) {
<i class="line-number" id="line913"></i>				home_url = settings['home_url'];
<i class="line-number" id="line914"></i>			}
<i class="line-number" id="line915"></i>
<i class="line-number" id="line916"></i>			if('contact_email' in settings) {
<i class="line-number" id="line917"></i>				contact_email = settings['contact_email'];
<i class="line-number" id="line918"></i>			}
<i class="line-number" id="line919"></i>
<i class="line-number" id="line920"></i>			if('template_filename' in settings) {
<i class="line-number" id="line921"></i>				template_filename = settings['template_filename'];
<i class="line-number" id="line922"></i>			}
<i class="line-number" id="line923"></i>
<i class="line-number" id="line924"></i>			if('locker_filename' in settings) {
<i class="line-number" id="line925"></i>				locker_filename = settings['locker_filename'];
<i class="line-number" id="line926"></i>			}
<i class="line-number" id="line927"></i>		}
<i class="line-number" id="line928"></i>
<i class="line-number" id="line929"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line930"></i>
<i class="line-number" id="line931"></i>		var dict = {
<i class="line-number" id="line932"></i>			LOGO_URL: logo_url,
<i class="line-number" id="line933"></i>			HOME_URL: home_url,
<i class="line-number" id="line934"></i>			CONTACT_EMAIL: contact_email,
<i class="line-number" id="line935"></i>		};
<i class="line-number" id="line936"></i>
<i class="line-number" id="line937"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line938"></i>
<i class="line-number" id="line939"></i>		$.ajax({url: template_filename, cache: false, dataType: 'html'}).done(function(data1) {
<i class="line-number" id="line940"></i>
<i class="line-number" id="line941"></i>			$.ajax({url: locker_filename, cache: false, dataType: 'html'}).done(function(data2) {
<i class="line-number" id="line942"></i>
<i class="line-number" id="line943"></i>				$('body').append(amiWebApp.formatHTML(data1, dict) + data2).promise().done(function() {
<i class="line-number" id="line944"></i>
<i class="line-number" id="line945"></i>					amiLogin._init().done(function() {
<i class="line-number" id="line946"></i>
<i class="line-number" id="line947"></i>						amiWebApp.onStart();
<i class="line-number" id="line948"></i>					});
<i class="line-number" id="line949"></i>				});
<i class="line-number" id="line950"></i>
<i class="line-number" id="line951"></i>			}).fail(function() {
<i class="line-number" id="line952"></i>
<i class="line-number" id="line953"></i>				alert('Service temporarily unavailable, please try reloading the page...');
<i class="line-number" id="line954"></i>
<i class="line-number" id="line955"></i>				console.error('could not load `' + locker_filename + '`');
<i class="line-number" id="line956"></i>			});
<i class="line-number" id="line957"></i>		}).fail(function() {
<i class="line-number" id="line958"></i>
<i class="line-number" id="line959"></i>			alert('Service temporarily unavailable, please try reloading the page...');
<i class="line-number" id="line960"></i>
<i class="line-number" id="line961"></i>			console.error('could not load `' + template_filename + '`');
<i class="line-number" id="line962"></i>		});
<i class="line-number" id="line963"></i>
<i class="line-number" id="line964"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line965"></i>	},
<i class="line-number" id="line966"></i>
<i class="line-number" id="line967"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line968"></i>	/* SUB-APPLICATIONS                                                */
<i class="line-number" id="line969"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line970"></i>
<i class="line-number" id="line971"></i>	onReady: function(userdata)
<i class="line-number" id="line972"></i>	{
<i class="line-number" id="line973"></i>		return this._currentSubAppInstance.onReady(userdata);
<i class="line-number" id="line974"></i>	},
<i class="line-number" id="line975"></i>
<i class="line-number" id="line976"></i>	onExit: function(userdata)
<i class="line-number" id="line977"></i>	{
<i class="line-number" id="line978"></i>		return this._currentSubAppInstance.onExit(userdata);
<i class="line-number" id="line979"></i>	},
<i class="line-number" id="line980"></i>
<i class="line-number" id="line981"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line982"></i>
<i class="line-number" id="line983"></i>	onLogin: function()
<i class="line-number" id="line984"></i>	{
<i class="line-number" id="line985"></i>		var result = this._currentSubAppInstance.onLogin();
<i class="line-number" id="line986"></i>		this.onToolbarUpdateNeeded();
<i class="line-number" id="line987"></i>		return result;
<i class="line-number" id="line988"></i>	},
<i class="line-number" id="line989"></i>
<i class="line-number" id="line990"></i>	onLogout: function()
<i class="line-number" id="line991"></i>	{
<i class="line-number" id="line992"></i>		var result = this._currentSubAppInstance.onLogout();
<i class="line-number" id="line993"></i>		this.onToolbarUpdateNeeded();
<i class="line-number" id="line994"></i>		return result;
<i class="line-number" id="line995"></i>	},
<i class="line-number" id="line996"></i>
<i class="line-number" id="line997"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line998"></i>
<i class="line-number" id="line999"></i>	/**
<i class="line-number" id="line1000"></i>	  * Get the current sub-application instance
<i class="line-number" id="line1001"></i>	  * @return {?} The current sub-application instance
<i class="line-number" id="line1002"></i>	  */
<i class="line-number" id="line1003"></i>
<i class="line-number" id="line1004"></i>	getCurrentSubAppInstance: function()
<i class="line-number" id="line1005"></i>	{
<i class="line-number" id="line1006"></i>		return this._currentSubAppInstance;
<i class="line-number" id="line1007"></i>	},
<i class="line-number" id="line1008"></i>
<i class="line-number" id="line1009"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line1010"></i>
<i class="line-number" id="line1011"></i>	/**
<i class="line-number" id="line1012"></i>	  * Set the current sub-application instance
<i class="line-number" id="line1013"></i>	  * @param {?} subAppInstance the application instance
<i class="line-number" id="line1014"></i>	  * @param {?} [userdata] userdata
<i class="line-number" id="line1015"></i>	  */
<i class="line-number" id="line1016"></i>
<i class="line-number" id="line1017"></i>	setCurrentSubAppInstance: function(subAppInstance, userdata)
<i class="line-number" id="line1018"></i>	{
<i class="line-number" id="line1019"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line1020"></i>		/* CHECK SUB-APPLICATION                                   */
<i class="line-number" id="line1021"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line1022"></i>
<i class="line-number" id="line1023"></i>		if(!subAppInstance.onReady) {
<i class="line-number" id="line1024"></i>			alert('error: `&lt;subapp>.onReady()` must be implemented!');
<i class="line-number" id="line1025"></i>			return;
<i class="line-number" id="line1026"></i>		}
<i class="line-number" id="line1027"></i>
<i class="line-number" id="line1028"></i>		if(!subAppInstance.onExit) {
<i class="line-number" id="line1029"></i>			alert('error: `&lt;subapp>.onExit()` must be implemented!');
<i class="line-number" id="line1030"></i>			return;
<i class="line-number" id="line1031"></i>		}
<i class="line-number" id="line1032"></i>
<i class="line-number" id="line1033"></i>		if(!subAppInstance.onLogin) {
<i class="line-number" id="line1034"></i>			alert('error: `&lt;subapp>.onLogin()` must be implemented!');
<i class="line-number" id="line1035"></i>			return;
<i class="line-number" id="line1036"></i>		}
<i class="line-number" id="line1037"></i>
<i class="line-number" id="line1038"></i>		if(!subAppInstance.onLogout) {
<i class="line-number" id="line1039"></i>			alert('error: `&lt;subapp>.onLogout()` must be implemented!');
<i class="line-number" id="line1040"></i>			return;
<i class="line-number" id="line1041"></i>		}
<i class="line-number" id="line1042"></i>
<i class="line-number" id="line1043"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line1044"></i>		/* SWITCH SUB-APPLICATION                                  */
<i class="line-number" id="line1045"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line1046"></i>
<i class="line-number" id="line1047"></i>		if(this._currentSubAppInstance.onExit() === false)
<i class="line-number" id="line1048"></i>		{
<i class="line-number" id="line1049"></i>			return;
<i class="line-number" id="line1050"></i>		}
<i class="line-number" id="line1051"></i>
<i class="line-number" id="line1052"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line1053"></i>
<i class="line-number" id="line1054"></i>		this._currentSubAppInstance = subAppInstance;
<i class="line-number" id="line1055"></i>
<i class="line-number" id="line1056"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line1057"></i>
<i class="line-number" id="line1058"></i>		amiWebApp.lock();
<i class="line-number" id="line1059"></i>
<i class="line-number" id="line1060"></i>		_ami_internal_always(
<i class="line-number" id="line1061"></i>			amiWebApp.onReady(userdata),
<i class="line-number" id="line1062"></i>			function() {
<i class="line-number" id="line1063"></i>				_ami_internal_always(
<i class="line-number" id="line1064"></i>					amiWebApp.onLogin(),
<i class="line-number" id="line1065"></i>					function() {
<i class="line-number" id="line1066"></i>						amiWebApp.unlock();
<i class="line-number" id="line1067"></i>					}
<i class="line-number" id="line1068"></i>				);
<i class="line-number" id="line1069"></i>			}
<i class="line-number" id="line1070"></i>		);
<i class="line-number" id="line1071"></i>
<i class="line-number" id="line1072"></i>		/*---------------------------------------------------------*/
<i class="line-number" id="line1073"></i>	},
<i class="line-number" id="line1074"></i>
<i class="line-number" id="line1075"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line1076"></i>
<i class="line-number" id="line1077"></i>	/**
<i class="line-number" id="line1078"></i>	  * Runs a sub-application according to the URL (parameters 'subapp' and 'userdata')
<i class="line-number" id="line1079"></i>	  * @param {String} home the name of the home sub-application
<i class="line-number" id="line1080"></i>	  */
<i class="line-number" id="line1081"></i>
<i class="line-number" id="line1082"></i>	autoRunSubApp: function(home)
<i class="line-number" id="line1083"></i>	{
<i class="line-number" id="line1084"></i>		var subapp = this.args['subapp'] || home;
<i class="line-number" id="line1085"></i>		var userdata = this.args['userdata'] || null;
<i class="line-number" id="line1086"></i>
<i class="line-number" id="line1087"></i>		if(subapp)
<i class="line-number" id="line1088"></i>		{
<i class="line-number" id="line1089"></i>			subapp = subapp.toLowerCase();
<i class="line-number" id="line1090"></i>
<i class="line-number" id="line1091"></i>			if(subapp in _ami_internal_subAppDict)
<i class="line-number" id="line1092"></i>			{
<i class="line-number" id="line1093"></i>				this.setCurrentSubAppInstance(_ami_internal_subAppDict[subapp], userdata);
<i class="line-number" id="line1094"></i>			}
<i class="line-number" id="line1095"></i>		}
<i class="line-number" id="line1096"></i>	},
<i class="line-number" id="line1097"></i>
<i class="line-number" id="line1098"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line1099"></i>};
<i class="line-number" id="line1100"></i>
<i class="line-number" id="line1101"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1102"></i>/* CONSTRUCTOR                                                             */
<i class="line-number" id="line1103"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1104"></i>
<i class="line-number" id="line1105"></i>amiWebApp.init();
<i class="line-number" id="line1106"></i>
<i class="line-number" id="line1107"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1108"></i>/* AMISubApp                                                               */
<i class="line-number" id="line1109"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1110"></i>
<i class="line-number" id="line1111"></i>/**
<i class="line-number" id="line1112"></i> * The AMI sub-application interface
<i class="line-number" id="line1113"></i> * @interface AMISubApp
<i class="line-number" id="line1114"></i> */
<i class="line-number" id="line1115"></i>
<i class="line-number" id="line1116"></i>$AMIInterface('AMISubApp', /** @lends AMISubApp# */ {
<i class="line-number" id="line1117"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line1118"></i>
<i class="line-number" id="line1119"></i>	/**
<i class="line-number" id="line1120"></i>	  * Called when the sub-application is ready to run
<i class="line-number" id="line1121"></i>	  * @param {?} userdata userdata
<i class="line-number" id="line1122"></i>	  */
<i class="line-number" id="line1123"></i>
<i class="line-number" id="line1124"></i>	onReady: function(userdata) {},
<i class="line-number" id="line1125"></i>
<i class="line-number" id="line1126"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line1127"></i>
<i class="line-number" id="line1128"></i>	/**
<i class="line-number" id="line1129"></i>	  * Called when the sub-application is about to exit
<i class="line-number" id="line1130"></i>	  */
<i class="line-number" id="line1131"></i>
<i class="line-number" id="line1132"></i>	onExit: function() {},
<i class="line-number" id="line1133"></i>
<i class="line-number" id="line1134"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line1135"></i>
<i class="line-number" id="line1136"></i>	/**
<i class="line-number" id="line1137"></i>	  * Called when log in
<i class="line-number" id="line1138"></i>	  */
<i class="line-number" id="line1139"></i>
<i class="line-number" id="line1140"></i>	onLogin: function() {},
<i class="line-number" id="line1141"></i>
<i class="line-number" id="line1142"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line1143"></i>
<i class="line-number" id="line1144"></i>	/**
<i class="line-number" id="line1145"></i>	  * Called when log out
<i class="line-number" id="line1146"></i>	  */
<i class="line-number" id="line1147"></i>
<i class="line-number" id="line1148"></i>	onLogout: function() {},
<i class="line-number" id="line1149"></i>
<i class="line-number" id="line1150"></i>	/*-----------------------------------------------------------------*/
<i class="line-number" id="line1151"></i>});
<i class="line-number" id="line1152"></i>
<i class="line-number" id="line1153"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1154"></i>/* AMIFooApp                                                               */
<i class="line-number" id="line1155"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1156"></i>
<i class="line-number" id="line1157"></i>$AMIClass('AMIFooApp', {
<i class="line-number" id="line1158"></i>	$implements: [AMISubApp],
<i class="line-number" id="line1159"></i>	onReady: function() {},
<i class="line-number" id="line1160"></i>	onExit: function() {},
<i class="line-number" id="line1161"></i>	onLogin: function() {},
<i class="line-number" id="line1162"></i>	onLogout: function() {},
<i class="line-number" id="line1163"></i>});
<i class="line-number" id="line1164"></i>
<i class="line-number" id="line1165"></i>amiWebApp._currentSubAppInstance = new AMIFooApp();
<i class="line-number" id="line1166"></i>
<i class="line-number" id="line1167"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1168"></i>/* JQUERY EXTENSION                                                        */
<i class="line-number" id="line1169"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1170"></i>
<i class="line-number" id="line1171"></i>jQuery.foreach = function(elements, callback, context)
<i class="line-number" id="line1172"></i>{
<i class="line-number" id="line1173"></i>	if(context)
<i class="line-number" id="line1174"></i>	{
<i class="line-number" id="line1175"></i>		jQuery.each(elements, function(index, element) {
<i class="line-number" id="line1176"></i>
<i class="line-number" id="line1177"></i>			callback.apply(context, [index, element]);
<i class="line-number" id="line1178"></i>		});
<i class="line-number" id="line1179"></i>	}
<i class="line-number" id="line1180"></i>	else
<i class="line-number" id="line1181"></i>	{
<i class="line-number" id="line1182"></i>		jQuery.each(elements, function(index, element) {
<i class="line-number" id="line1183"></i>
<i class="line-number" id="line1184"></i>			callback.apply(element, [index, element]);
<i class="line-number" id="line1185"></i>		});
<i class="line-number" id="line1186"></i>	}
<i class="line-number" id="line1187"></i>
<i class="line-number" id="line1188"></i>	return elements;
<i class="line-number" id="line1189"></i>};
<i class="line-number" id="line1190"></i>
<i class="line-number" id="line1191"></i>/*-------------------------------------------------------------------------*/
<i class="line-number" id="line1192"></i></code></pre>
  </article>
</section>




  </div>

</div>