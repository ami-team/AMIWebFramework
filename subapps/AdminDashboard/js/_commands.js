/*!
 * AMI Twig Engine
 *
 * Copyright (c) 2014-2019 The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global adminDashboardApp
 *
 */$AMIClass("AdminDashboardCommands",{_init:function _init(){var _this=this;var result=$.Deferred();amiWebApp.loadResources(["subapps/AdminDashboard/twig/commands/commands.twig","subapps/AdminDashboard/twig/commands/extra_menu.twig","subapps/AdminDashboard/twig/commands/table.twig"]).done(function(data){amiWebApp.replaceHTML("#CB6036B7_5971_41C2_1194_F5A051B21EA0",data[0]).done(function(){amiWebApp.replaceHTML("#C54485C3_44F8_CE8E_0F54_BF847CEECE11",data[1]).done(function(){_this.fragmentTable=data[2];$("#FA9E8ABC_2469_C3CA_67F9_8DC2FEE6B32D").keypress(function(e){if(e.keyCode==13){adminDashboardApp.subsubapp.find($("#FA9E8ABC_2469_C3CA_67F9_8DC2FEE6B32D").val())}});$("#CD24BC02_C39F_AE0C_A83F_85B6458421B6").click(function(){adminDashboardApp.subsubapp.find($("#FA9E8ABC_2469_C3CA_67F9_8DC2FEE6B32D").val())});result.resolve()})})}).fail(function(){result.reject()});return result},onLogin:function onLogin(){var _this2=this;return amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_role\" -mql=\"SELECT `router_role`.`role`\"").done(function(data){_this2.roles=amiWebApp.jspath("..field{.@name===\"role\"}.$",data);if("filter"in amiWebApp.args){$("#FA9E8ABC_2469_C3CA_67F9_8DC2FEE6B32D").val(amiWebApp.args["filter"]);adminDashboardApp.subsubapp.find(amiWebApp.args["filter"])}}).fail(function(data,message){amiWebApp.error(message,true)})},find:function find(filter){var _this3=this;amiWebApp.lock();filter=filter.trim();amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_command\" -mql=\"SELECT `router_command`.`id`, `router_role`.`role` WHERE `router_command`.`command` LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%'\"").done(function(data2){amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_command\" -mql=\"SELECT `id`, `command`, `class`, `visible`, `secured`, `roleValidatorClass` WHERE `command` LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' ORDER BY `command` LIMIT 50\"").done(function(data1){var rows1=amiWebApp.jspath("..rowset.row",data1);var rows2=amiWebApp.jspath("..rowset.row",data2);var ids=[];var commands={};rows1.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var command=amiWebApp.jspath("..field{.@name===\"command\"}.$",row)[0]||"";var clazz=amiWebApp.jspath("..field{.@name===\"class\"}.$",row)[0]||"";var visible=amiWebApp.jspath("..field{.@name===\"visible\"}.$",row)[0]||"";var secured=amiWebApp.jspath("..field{.@name===\"secured\"}.$",row)[0]||"";var roleValidatorClazz=amiWebApp.jspath("..field{.@name===\"roleValidatorClass\"}.$",row)[0]||"";ids.push(id);commands[id]={command:command,clazz:clazz,visible:visible,secured:secured,roleValidatorClazz:roleValidatorClazz,roles:[]}});rows2.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var role=amiWebApp.jspath("..field{.@name===\"self.router_role.role\"}.$",row)[0]||"";if(id in commands){commands[id].roles.push(role)}});var dict={ids:ids,roles:_this3.roles,commands:commands};amiWebApp.replaceHTML("#F989424E_06B3_365D_0CAD_9F223EC8DA01",_this3.fragmentTable,{dict:dict}).done(function(){var el1=$("#F989424E_06B3_365D_0CAD_9F223EC8DA01 [data-change-visible]");var el2=$("#F989424E_06B3_365D_0CAD_9F223EC8DA01 [data-change-secured]");var el3=$("#F989424E_06B3_365D_0CAD_9F223EC8DA01 [data-delete-command");var el4=$("#F989424E_06B3_365D_0CAD_9F223EC8DA01 [data-change-role]");var el5=$("#F989424E_06B3_365D_0CAD_9F223EC8DA01 [data-change-command-class]");var el6=$("#F989424E_06B3_365D_0CAD_9F223EC8DA01 [data-change-role-validator-class]");el4.select2({placeholder:"Select a role"});el1.change(function(e){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_command\" -separator=\"|\" -fields=\"visible\" -values=\""+($(e.currentTarget).prop("checked")?1:0)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-visible"))+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el2.change(function(e){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_command\" -separator=\"|\" -fields=\"secured\" -values=\""+($(e.currentTarget).prop("checked")?1:0)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-secured"))+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.click(function(e){e.preventDefault();if(!confirm("Please confirm...")){return}amiWebApp.lock();amiCommand.execute("RemoveElements -catalog=\"self\" -entity=\"router_command\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-delete-command"))+"\"").done(function(){$("#F989424E_06B3_365D_0CAD_9F223EC8DA01 tr[data-id=\""+$(e.currentTarget).attr("data-delete-command")+"\"]").remove();amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el4.on("select2:select",function(e){amiWebApp.lock();amiCommand.execute("AddCommandRole -command=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el4.on("select2:unselect",function(e){amiWebApp.lock();amiCommand.execute("RemoveCommandRole -command=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el5.on("click",function(e){var clazz=prompt("New Java command class",$(e.currentTarget).find(".value").text());if(clazz!==null){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_command\" -separator=\"|\" -fields=\"class\" -values=\""+amiWebApp.textToString(clazz)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-command-class"))+"\"").done(function(){$(_this3).find(".value").text(clazz);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});el6.on("click",function(e){var clazz=prompt("New Java role validator class",$(e.currentTarget).find(".value").text());if(clazz!==null){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_command\" -separator=\"|\" -fields=\"roleValidatorClass\" -values=\""+amiWebApp.textToString(clazz)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role-validator-class"))+"\"").done(function(){$(_this3).find(".value").text(clazz);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});amiWebApp.unlock()})}).fail(function(data,message){amiWebApp.error(message,true)})}).fail(function(data,message){amiWebApp.error(message,true)})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl9jb21tYW5kcy5lczYuanMiXSwibmFtZXMiOlsiJEFNSUNsYXNzIiwiX2luaXQiLCJyZXN1bHQiLCIkIiwiRGVmZXJyZWQiLCJhbWlXZWJBcHAiLCJsb2FkUmVzb3VyY2VzIiwiZG9uZSIsImRhdGEiLCJyZXBsYWNlSFRNTCIsImZyYWdtZW50VGFibGUiLCJrZXlwcmVzcyIsImUiLCJrZXlDb2RlIiwiYWRtaW5EYXNoYm9hcmRBcHAiLCJzdWJzdWJhcHAiLCJmaW5kIiwidmFsIiwiY2xpY2siLCJyZXNvbHZlIiwiZmFpbCIsInJlamVjdCIsIm9uTG9naW4iLCJhbWlDb21tYW5kIiwiZXhlY3V0ZSIsInJvbGVzIiwianNwYXRoIiwiYXJncyIsIm1lc3NhZ2UiLCJlcnJvciIsImZpbHRlciIsImxvY2siLCJ0cmltIiwidGV4dFRvU3RyaW5nIiwidGV4dFRvU1FMIiwiZGF0YTIiLCJkYXRhMSIsInJvd3MxIiwicm93czIiLCJpZHMiLCJjb21tYW5kcyIsImZvckVhY2giLCJyb3ciLCJpZCIsImNvbW1hbmQiLCJjbGF6eiIsInZpc2libGUiLCJzZWN1cmVkIiwicm9sZVZhbGlkYXRvckNsYXp6IiwicHVzaCIsInJvbGUiLCJkaWN0IiwiZWwxIiwiZWwyIiwiZWwzIiwiZWw0IiwiZWw1IiwiZWw2Iiwic2VsZWN0MiIsInBsYWNlaG9sZGVyIiwiY2hhbmdlIiwiY3VycmVudFRhcmdldCIsInByb3AiLCJhdHRyIiwidW5sb2NrIiwicHJldmVudERlZmF1bHQiLCJjb25maXJtIiwicmVtb3ZlIiwib24iLCJwYXJhbXMiLCJ0ZXh0IiwicHJvbXB0Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7R0FpQkFBLFNBQVMsQ0FBQyx3QkFBRCxDQUEyQixDQUduQ0MsS0FBSyxDQUFFLGdCQUNQLGdCQUNDLEdBQU1DLENBQUFBLE1BQU0sQ0FBR0MsQ0FBQyxDQUFDQyxRQUFGLEVBQWYsQ0FFQUMsU0FBUyxDQUFDQyxhQUFWLENBQXdCLENBQ3ZCLG9EQUR1QixDQUV2Qixz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SyxHQUFLLElBQWIsQ0FDQSxDQUNDeEMsU0FBUyxDQUFDMEIsSUFBVixHQUVBUixVQUFVLENBQUNDLE9BQVgsQ0FBbUIseUhBQWtIbkIsU0FBUyxDQUFDNEIsWUFBVixDQUF1QlksS0FBdkIsQ0FBbEgsQ0FBa0osb0NBQWxKLENBQXFMeEMsU0FBUyxDQUFDNEIsWUFBVixDQUF1QjlCLENBQUMsQ0FBQ1MsQ0FBQyxDQUFDaUQsYUFBSCxDQUFELENBQW1CRSxJQUFuQixDQUF3QixrQ0FBeEIsQ0FBdkIsQ0FBckwsQ0FBMlEsSUFBOVIsRUFBbVN4RCxJQUFuUyxDQUF3UyxVQUFNLENBRTdTSixDQUFDLENBQUMsTUFBRCxDQUFELENBQVFhLElBQVIsQ0FBYSxRQUFiLEVBQXVCc0QsSUFBdkIsQ0FBNEJ6QixLQUE1QixFQUVBeEMsU0FBUyxDQUFDMkQsTUFBVixFQUVBLENBTkQsRUFNRzVDLElBTkgsQ0FNUSxTQUFDWixJQUFELENBQU9vQixPQUFQLENBQW1CLENBRTFCdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQVRELENBVUEsQ0FDRCxDQW5CRCxFQXVCQXZCLFNBQVMsQ0FBQzJELE1BQVYsRUFHQSxDQWhLRCxDQWtLQSxDQWpORCxFQWlORzVDLElBak5ILENBaU5RLFNBQUNaLElBQUQsQ0FBT29CLE9BQVAsQ0FBbUIsQ0FFMUJ2QixTQUFTLENBQUN3QixLQUFWLENBQWdCRCxPQUFoQixDQUF5QixJQUF6QixDQUNBLENBcE5ELENBc05BLENBeE5ELEVBd05HUixJQXhOSCxDQXdOUSxTQUFDWixJQUFELENBQU9vQixPQUFQLENBQW1CLENBRTFCdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQTNORCxDQTROQSxDQXhTa0MsQ0FBM0IsQ0FBVCIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQU1JIFR3aWcgRW5naW5lXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTkgVGhlIEFNSSBUZWFtIC8gTFBTQyAvIElOMlAzXG4gKlxuICogVGhpcyBmaWxlIG11c3QgYmUgdXNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIENlQ0lMTC1DOlxuICogaHR0cDovL3d3dy5jZWNpbGwuaW5mby9saWNlbmNlcy9MaWNlbmNlX0NlQ0lMTC1DX1YxLWVuLmh0bWxcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1mci5odG1sXG4gKlxuICogQGdsb2JhbCBhZG1pbkRhc2hib2FyZEFwcFxuICpcbiAqL1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qIEFkbWluRGFzaGJvYXJkQ29tbWFuZHMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiRBTUlDbGFzcygnQWRtaW5EYXNoYm9hcmRDb21tYW5kcycsIHtcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRfaW5pdDogZnVuY3Rpb24oKVxuXHR7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0YW1pV2ViQXBwLmxvYWRSZXNvdXJjZXMoW1xuXHRcdFx0J3N1YmFwcHMvQWRtaW5EYXNoYm9hcmQvdHdpZy9jb21tYW5kcy9jb21tYW5kcy50d2lnJyxcblx0XHRcdCdzdWJhcHBzL0FkbWluRGFzaGJvYXJkL3R3aWcvY29tbWFuZHMvZXh0cmFfbWVudS50d2lnJyxcblx0XHRcdCdzdWJhcHBzL0FkbWluRGFzaGJvYXJkL3R3aWcvY29tbWFuZHMvdGFibGUudHdpZycsXG5cdFx0XSkuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHRhbWlXZWJBcHAucmVwbGFjZUhUTUwoJyNDQjYwMzZCN181OTcxXzQxQzJfMTE5NF9GNUEwNTFCMjFFQTAnLCBkYXRhWzBdKS5kb25lKCgpID0+IHtcblx0XHRcdFx0YW1pV2ViQXBwLnJlcGxhY2VIVE1MKCcjQzU0NDg1QzNfNDRGOF9DRThFXzBGNTRfQkY4NDdDRUVDRTExJywgZGF0YVsxXSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHR0aGlzLmZyYWdtZW50VGFibGUgPSBkYXRhWzJdO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0JCgnI0ZBOUU4QUJDXzI0NjlfQzNDQV82N0Y5XzhEQzJGRUU2QjMyRCcpLmtleXByZXNzKChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGlmKGUua2V5Q29kZSA9PSAxMylcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0YWRtaW5EYXNoYm9hcmRBcHAuc3Vic3ViYXBwLmZpbmQoJCgnI0ZBOUU4QUJDXzI0NjlfQzNDQV82N0Y5XzhEQzJGRUU2QjMyRCcpLnZhbCgpKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdCQoJyNDRDI0QkMwMl9DMzlGX0FFMENfQTgzRl84NUI2NDU4NDIxQjYnKS5jbGljaygoKSA9PiB7XG5cblx0XHRcdFx0XHRcdGFkbWluRGFzaGJvYXJkQXBwLnN1YnN1YmFwcC5maW5kKCQoJyNGQTlFOEFCQ18yNDY5X0MzQ0FfNjdGOV84REMyRkVFNkIzMkQnKS52YWwoKSk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRyZXN1bHQucmVzb2x2ZSgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0fSkuZmFpbCgoKSA9PiB7XG5cblx0XHRcdHJlc3VsdC5yZWplY3QoKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRvbkxvZ2luOiBmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gYW1pQ29tbWFuZC5leGVjdXRlKCdTZWFyY2hRdWVyeSAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3JvbGVcIiAtbXFsPVwiU0VMRUNUIGByb3V0ZXJfcm9sZWAuYHJvbGVgXCInKS5kb25lKChkYXRhKSA9PiB7XG5cblx0XHRcdHRoaXMucm9sZXMgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwicm9sZVwifS4kJywgZGF0YSk7XG5cblx0XHRcdGlmKCdmaWx0ZXInIGluIGFtaVdlYkFwcC5hcmdzKVxuXHRcdFx0e1xuXHRcdFx0XHQkKCcjRkE5RThBQkNfMjQ2OV9DM0NBXzY3RjlfOERDMkZFRTZCMzJEJykudmFsKGFtaVdlYkFwcC5hcmdzWydmaWx0ZXInXSk7XG5cblx0XHRcdFx0YWRtaW5EYXNoYm9hcmRBcHAuc3Vic3ViYXBwLmZpbmQoYW1pV2ViQXBwLmFyZ3NbJ2ZpbHRlciddKTtcblx0XHRcdH1cblxuXHRcdH0pLmZhaWwoKGRhdGEsIG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdH0pO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0ZmluZDogZnVuY3Rpb24oZmlsdGVyKVxuXHR7XG5cdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdGZpbHRlciA9IGZpbHRlci50cmltKCk7XG5cblx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1NlYXJjaFF1ZXJ5IC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfY29tbWFuZFwiIC1tcWw9XCJTRUxFQ1QgYHJvdXRlcl9jb21tYW5kYC5gaWRgLCBgcm91dGVyX3JvbGVgLmByb2xlYCBXSEVSRSBgcm91dGVyX2NvbW1hbmRgLmBjb21tYW5kYCBMSUtFIFxcJyUnICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhhbWlXZWJBcHAudGV4dFRvU1FMKGZpbHRlcikpICsgJyVcXCdcIicpLmRvbmUoKGRhdGEyKSA9PiB7XG5cblx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnU2VhcmNoUXVlcnkgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl9jb21tYW5kXCIgLW1xbD1cIlNFTEVDVCBgaWRgLCBgY29tbWFuZGAsIGBjbGFzc2AsIGB2aXNpYmxlYCwgYHNlY3VyZWRgLCBgcm9sZVZhbGlkYXRvckNsYXNzYCBXSEVSRSBgY29tbWFuZGAgTElLRSBcXCclJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoYW1pV2ViQXBwLnRleHRUb1NRTChmaWx0ZXIpKSArICclXFwnIE9SREVSIEJZIGBjb21tYW5kYCBMSU1JVCA1MFwiJykuZG9uZSgoZGF0YTEpID0+IHtcblxuXHRcdFx0XHRjb25zdCByb3dzMSA9IGFtaVdlYkFwcC5qc3BhdGgoJy4ucm93c2V0LnJvdycsIGRhdGExKTtcblx0XHRcdFx0Y29uc3Qgcm93czIgPSBhbWlXZWJBcHAuanNwYXRoKCcuLnJvd3NldC5yb3cnLCBkYXRhMik7XG5cblx0XHRcdFx0Y29uc3QgaWRzID0gW107XG5cblx0XHRcdFx0Y29uc3QgY29tbWFuZHMgPSB7fTtcblxuXHRcdFx0XHRyb3dzMS5mb3JFYWNoKChyb3cpID0+IHtcblxuXHRcdFx0XHRcdGNvbnN0IGlkID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImlkXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGNvbW1hbmQgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiY29tbWFuZFwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCBjbGF6eiA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJjbGFzc1wifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCB2aXNpYmxlID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cInZpc2libGVcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3Qgc2VjdXJlZCA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJzZWN1cmVkXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IHJvbGVWYWxpZGF0b3JDbGF6eiA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJyb2xlVmFsaWRhdG9yQ2xhc3NcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cblx0XHRcdFx0XHRpZHMucHVzaChpZCk7XG5cblx0XHRcdFx0XHRjb21tYW5kc1tpZF0gPSB7XG5cdFx0XHRcdFx0XHRjb21tYW5kOiBjb21tYW5kLFxuXHRcdFx0XHRcdFx0Y2xheno6IGNsYXp6LFxuXHRcdFx0XHRcdFx0dmlzaWJsZTogdmlzaWJsZSxcblx0XHRcdFx0XHRcdHNlY3VyZWQ6IHNlY3VyZWQsXG5cdFx0XHRcdFx0XHRyb2xlVmFsaWRhdG9yQ2xheno6IHJvbGVWYWxpZGF0b3JDbGF6eixcblx0XHRcdFx0XHRcdHJvbGVzOiBbXSxcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRyb3dzMi5mb3JFYWNoKChyb3cpID0+IHtcblxuXHRcdFx0XHRcdGNvbnN0IGlkID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImlkXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IHJvbGUgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwic2VsZi5yb3V0ZXJfcm9sZS5yb2xlXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXG5cdFx0XHRcdFx0aWYoaWQgaW4gY29tbWFuZHMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0Y29tbWFuZHNbaWRdLnJvbGVzLnB1c2gocm9sZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRjb25zdCBkaWN0ID0ge1xuXHRcdFx0XHRcdGlkczogaWRzLFxuXHRcdFx0XHRcdHJvbGVzOiB0aGlzLnJvbGVzLFxuXHRcdFx0XHRcdGNvbW1hbmRzOiBjb21tYW5kcyxcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRhbWlXZWJBcHAucmVwbGFjZUhUTUwoJyNGOTg5NDI0RV8wNkIzXzM2NURfMENBRF85RjIyM0VDOERBMDEnLCB0aGlzLmZyYWdtZW50VGFibGUsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRjb25zdCBlbDEgPSAkKCcjRjk4OTQyNEVfMDZCM18zNjVEXzBDQURfOUYyMjNFQzhEQTAxIFtkYXRhLWNoYW5nZS12aXNpYmxlXScpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZWwyID0gJCgnI0Y5ODk0MjRFXzA2QjNfMzY1RF8wQ0FEXzlGMjIzRUM4REEwMSBbZGF0YS1jaGFuZ2Utc2VjdXJlZF0nKTtcblxuXHRcdFx0XHRcdGNvbnN0IGVsMyA9ICQoJyNGOTg5NDI0RV8wNkIzXzM2NURfMENBRF85RjIyM0VDOERBMDEgW2RhdGEtZGVsZXRlLWNvbW1hbmQnKTtcblxuXHRcdFx0XHRcdGNvbnN0IGVsNCA9ICQoJyNGOTg5NDI0RV8wNkIzXzM2NURfMENBRF85RjIyM0VDOERBMDEgW2RhdGEtY2hhbmdlLXJvbGVdJyk7XG5cblx0XHRcdFx0XHRjb25zdCBlbDUgPSAkKCcjRjk4OTQyNEVfMDZCM18zNjVEXzBDQURfOUYyMjNFQzhEQTAxIFtkYXRhLWNoYW5nZS1jb21tYW5kLWNsYXNzXScpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZWw2ID0gJCgnI0Y5ODk0MjRFXzA2QjNfMzY1RF8wQ0FEXzlGMjIzRUM4REEwMSBbZGF0YS1jaGFuZ2Utcm9sZS12YWxpZGF0b3ItY2xhc3NdJyk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDQuc2VsZWN0Mih7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBhIHJvbGUnLFxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwxLmNoYW5nZSgoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1VwZGF0ZUVsZW1lbnRzIC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfY29tbWFuZFwiIC1zZXBhcmF0b3I9XCJ8XCIgLWZpZWxkcz1cInZpc2libGVcIiAtdmFsdWVzPVwiJyArICgkKGUuY3VycmVudFRhcmdldCkucHJvcCgnY2hlY2tlZCcpID8gMSA6IDApICsgJ1wiIC1rZXlGaWVsZHM9XCJpZFwiIC1rZXlWYWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2UtdmlzaWJsZScpKSArICdcIicpLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC51bmxvY2soKTtcblxuXHRcdFx0XHRcdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwyLmNoYW5nZSgoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1VwZGF0ZUVsZW1lbnRzIC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfY29tbWFuZFwiIC1zZXBhcmF0b3I9XCJ8XCIgLWZpZWxkcz1cInNlY3VyZWRcIiAtdmFsdWVzPVwiJyArICgkKGUuY3VycmVudFRhcmdldCkucHJvcCgnY2hlY2tlZCcpID8gMSA6IDApICsgJ1wiIC1rZXlGaWVsZHM9XCJpZFwiIC1rZXlWYWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2Utc2VjdXJlZCcpKSArICdcIicpLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC51bmxvY2soKTtcblxuXHRcdFx0XHRcdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwzLmNsaWNrKChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdFx0aWYoIWNvbmZpcm0oJ1BsZWFzZSBjb25maXJtLi4uJykpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdFx0XHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdSZW1vdmVFbGVtZW50cyAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX2NvbW1hbmRcIiAta2V5RmllbGRzPVwiaWRcIiAta2V5VmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtZGVsZXRlLWNvbW1hbmQnKSkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHQkKCcjRjk4OTQyNEVfMDZCM18zNjVEXzBDQURfOUYyMjNFQzhEQTAxIHRyW2RhdGEtaWQ9XCInICsgJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtZGVsZXRlLWNvbW1hbmQnKSArICdcIl0nKS5yZW1vdmUoKTtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoKGRhdGEsIG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsNC5vbignc2VsZWN0MjpzZWxlY3QnLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ0FkZENvbW1hbmRSb2xlIC1jb21tYW5kPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLXJvbGUnKSkgKyAnXCIgLXJvbGU9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhlLnBhcmFtcy5kYXRhLnRleHQpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDQub24oJ3NlbGVjdDI6dW5zZWxlY3QnLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1JlbW92ZUNvbW1hbmRSb2xlIC1jb21tYW5kPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLXJvbGUnKSkgKyAnXCIgLXJvbGU9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhlLnBhcmFtcy5kYXRhLnRleHQpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDUub24oJ2NsaWNrJywgKGUpID0+IHtcblxuXHRcdFx0XHRcdFx0Y29uc3QgY2xhenogPSBwcm9tcHQoJ05ldyBKYXZhIGNvbW1hbmQgY2xhc3MnLCAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnLnZhbHVlJykudGV4dCgpKTtcblxuXHRcdFx0XHRcdFx0aWYoY2xhenogIT09IG51bGwpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdVcGRhdGVFbGVtZW50cyAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX2NvbW1hbmRcIiAtc2VwYXJhdG9yPVwifFwiIC1maWVsZHM9XCJjbGFzc1wiIC12YWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhjbGF6eikgKyAnXCIgLWtleUZpZWxkcz1cImlkXCIgLWtleVZhbHVlcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWNoYW5nZS1jb21tYW5kLWNsYXNzJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy52YWx1ZScpLnRleHQoY2xhenopO1xuXG5cdFx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdH0pLmZhaWwoKGRhdGEsIG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDYub24oJ2NsaWNrJywgKGUpID0+IHtcblxuXHRcdFx0XHRcdFx0Y29uc3QgY2xhenogPSBwcm9tcHQoJ05ldyBKYXZhIHJvbGUgdmFsaWRhdG9yIGNsYXNzJywgJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJy52YWx1ZScpLnRleHQoKSk7XG5cblx0XHRcdFx0XHRcdGlmKGNsYXp6ICE9PSBudWxsKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnVXBkYXRlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl9jb21tYW5kXCIgLXNlcGFyYXRvcj1cInxcIiAtZmllbGRzPVwicm9sZVZhbGlkYXRvckNsYXNzXCIgLXZhbHVlcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGNsYXp6KSArICdcIiAta2V5RmllbGRzPVwiaWRcIiAta2V5VmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLXJvbGUtdmFsaWRhdG9yLWNsYXNzJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy52YWx1ZScpLnRleHQoY2xhenopO1xuXG5cdFx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdH0pLmZhaWwoKGRhdGEsIG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0fSk7XG5cblx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHR9KTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuIl19
