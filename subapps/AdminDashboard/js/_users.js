/*!
 * AMI Twig Engine
 *
 * Copyright (c) 2014-2019 The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global adminDashboardApp
 *
 */$AMIClass("AdminDashboardUsers",{_init:function _init(){var _this=this;var result=$.Deferred();amiWebApp.loadResources(["subapps/AdminDashboard/twig/users/users.twig","subapps/AdminDashboard/twig/users/table.twig"]).done(function(data){amiWebApp.replaceHTML("#CB6036B7_5971_41C2_1194_F5A051B21EA0",data[0]).done(function(){_this.fragmentTable=data[1];$("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").keypress(function(e){if(e.keyCode==13){adminDashboardApp.subsubapp.find($("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val())}});$("#CD24BC02_C39F_AE0C_A83F_85B6458421B6").click(function(){adminDashboardApp.subsubapp.find($("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val())});result.resolve()})}).fail(function(e){result.reject(e)});return result},onLogin:function onLogin(){var _this2=this;return amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_role\" -mql=\"SELECT `router_role`.`role`\"").done(function(data){_this2.roles=amiWebApp.jspath("..field{.@name===\"role\"}.$",data);if("filter"in amiWebApp.args){$("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val(amiWebApp.args["filter"]);adminDashboardApp.subsubapp.find(amiWebApp.args["filter"])}}).fail(function(data,message){amiWebApp.error(message,true)})},find:function find(filter){var _this3=this;amiWebApp.lock();filter=filter.trim().toLowerCase();amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_user\" -mql=\"SELECT `router_user`.`id`, `router_role`.`role` WHERE LOWER(`router_user`.`AMIUser`) LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' OR LOWER(`router_user`.`email`) LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%'\"").done(function(data2){amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_user\" -mql=\"SELECT `id`, `AMIUser`, `clientDN`, `issuerDN`, `firstName`, `lastName`, `email`, `valid` WHERE LOWER(`router_user`.`AMIUser`) LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' OR LOWER(`router_user`.`email`) LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' ORDER BY `AMIUser` LIMIT 50\"").done(function(data1){var rows1=amiWebApp.jspath("..rowset.row",data1);var rows2=amiWebApp.jspath("..rowset.row",data2);var ids=[];var users={};rows1.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var AMIUser=amiWebApp.jspath("..field{.@name===\"AMIUser\"}.$",row)[0]||"";var clientDN=amiWebApp.jspath("..field{.@name===\"clientDN\"}.$",row)[0]||"";var issuerDN=amiWebApp.jspath("..field{.@name===\"issuerDN\"}.$",row)[0]||"";var firstname=amiWebApp.jspath("..field{.@name===\"firstName\"}.$",row)[0]||"";var lastname=amiWebApp.jspath("..field{.@name===\"lastName\"}.$",row)[0]||"";var email=amiWebApp.jspath("..field{.@name===\"email\"}.$",row)[0]||"";var valid=amiWebApp.jspath("..field{.@name===\"valid\"}.$",row)[0]||"";ids.push(id);users[id]={AMIUser:AMIUser,clientDN:clientDN,issuerDN:issuerDN,firstname:firstname,lastname:lastname,email:email,valid:valid,roles:[]}});rows2.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var role=amiWebApp.jspath("..field{.@name===\"self.router_role.role\"}.$",row)[0]||"";if(id in users){users[id].roles.push(role)}});var dict={ids:ids,users:users,roles:_this3.roles};amiWebApp.replaceHTML("#FCBD6DFC_2061_8CC3_652C_77671A179AAC",_this3.fragmentTable,{dict:dict}).done(function(){var el1=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-valid]");var el2=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-delete-user]");var el3=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-role]");var el4=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-client-dn");var el5=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-issuer-dn");el3.select2({placeholder:"Select a role"});el1.change(function(e){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"valid\" -values=\""+($(e.currentTarget).prop("checked")?1:0)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-valid"))+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el2.click(function(e){e.preventDefault();if(!confirm("Please confirm...")){return}amiWebApp.lock();amiCommand.execute("RemoveElements -catalog=\"self\" -entity=\"router_user\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-delete-user"))+"\"").done(function(){$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC tr[data-id=\""+$(e.currentTarget).attr("data-delete-user")+"\"]").remove();amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.on("select2:select",function(e){amiWebApp.lock();amiCommand.execute("AddUserRole -user=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.on("select2:unselect",function(e){amiWebApp.lock();amiCommand.execute("RemoveUserRole -user=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el4.on("click",function(e){var clientDN=prompt("New client DN",$(e.currentTarget).find(".value").text());if(clientDN){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"clientDN\" -values=\""+amiWebApp.textToString(clientDN)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-client-dn"))+"\"").done(function(){$(_this3).find(".value").text(clientDN);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});el5.on("click",function(e){var issuerDN=prompt("New issuer DN",$(e.currentTarget).find(".value").text());if(issuerDN){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"issuerDN\" -values=\""+amiWebApp.textToString(issuerDN)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-issuer-dn"))+"\"").done(function(){$(_this3).find(".value").text(issuerDN);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});amiWebApp.unlock()})}).fail(function(data,message){amiWebApp.error(message,true)})}).fail(function(data,message){amiWebApp.error(message,true)})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl91c2Vycy5lczYuanMiXSwibmFtZXMiOlsiJEFNSUNsYXNzIiwiX2luaXQiLCJyZXN1bHQiLCIkIiwiRGVmZXJyZWQiLCJhbWlXZWJBcHAiLCJsb2FkUmVzb3VyY2VzIiwiZG9uZSIsImRhdGEiLCJyZXBsYWNlSFRNTCIsImZyYWdtZW50VGFibGUiLCJrZXlwcmVzcyIsImUiLCJrZXlDb2RlIiwiYWRtaW5EYXNoYm9hcmRBcHAiLCJzdWJzdWJhcHAiLCJmaW5kIiwidmFsIiwiY2xpY2siLCJyZXNvbHZlIiwiZmFpbCIsInJlamVjdCIsIm9uTG9naW4iLCJhbWlDb21tYW5kIiwiZXhlY3V0ZSIsInJvbGVzIiwianNwYXRoIiwiYXJncyIsIm1lc3NhZ2UiLCJlcnJvciIsImZpbHRlciIsImxvY2siLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJ0ZXh0VG9TdHJpbmciLCJ0ZXh0VG9TUUwiLCJkYXRhMiIsImRhdGExIiwicm93czEiLCJyb3dzMiIsImlkcyIsInVzZXJzIiwiZm9yRWFjaCIsInJvdyIsImlkIiwiQU1JVXNlciIsImNsaWVudEROIiwiaXNzdWVyRE4iLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsImVtYWlsIiwidmFsaWQiLCJwdXNoIiwicm9sZSIsImRpY3QiLCJlbDEiLCJlbDIiLCJlbDMiLCJlbDQiLCJlbDUiLCJzZWxlY3QyIiwicGxhY2Vob2xkZXIiLCJjaGFuZ2UiLCJjdXJyZW50VGFyZ2V0IiwicHJvcCIsImF0dHIiLCJ1bmxvY2siLCJwcmV2ZW50RGVmYXVsdCIsImNvbmZpcm0iLCJyZW1vdmUiLCJvbiIsInBhcmFtcyIsInRleHQiLCJwcm9tcHQiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztHQWlCQUEsU0FBUyxDQUFDLHFCQUFELENBQXdCLENBR2hDQyxLQUFLLENBQUUsZ0JBQ1AsZ0JBQ0MsR0FBTUMsQ0FBQUEsTUFBTSxDQUFHQyxDQUFDLENBQUNDLFFBQUYsRUFBZixDQUVBQyxTQUFTLENBQUNDLGFBQVYsQ0FBd0IsQ0FDdkIs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Q0FBM0ssQ0FBc1AsSUFBelEsRUFBOFExRCxJQUE5USxDQUFtUixVQUFNLENBRXhSSixDQUFDLENBQUMsTUFBRCxDQUFELENBQVFhLElBQVIsQ0FBYSxRQUFiLEVBQXVCd0QsSUFBdkIsQ0FBNEJ6QixRQUE1QixFQUVBMUMsU0FBUyxDQUFDNkQsTUFBVixFQUVBLENBTkQsRUFNRzlDLElBTkgsQ0FNUSxTQUFDWixJQUFELENBQU9vQixPQUFQLENBQW1CLENBRTFCdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQVRELENBVUEsQ0FDRCxDQW5CRCxFQXVCQXZCLFNBQVMsQ0FBQzZELE1BQVYsRUFHQSxDQTlJRCxDQWdKQSxDQW5NRCxFQW1NRzlDLElBbk1ILENBbU1RLFNBQUNaLElBQUQsQ0FBT29CLE9BQVAsQ0FBbUIsQ0FFMUJ2QixTQUFTLENBQUN3QixLQUFWLENBQWdCRCxPQUFoQixDQUF5QixJQUF6QixDQUNBLENBdE1ELENBd01BLENBMU1ELEVBME1HUixJQTFNSCxDQTBNUSxTQUFDWixJQUFELENBQU9vQixPQUFQLENBQW1CLENBRTFCdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQTdNRCxDQThNQSxDQXZSK0IsQ0FBeEIsQ0FBVCIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQU1JIFR3aWcgRW5naW5lXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTkgVGhlIEFNSSBUZWFtIC8gTFBTQyAvIElOMlAzXG4gKlxuICogVGhpcyBmaWxlIG11c3QgYmUgdXNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIENlQ0lMTC1DOlxuICogaHR0cDovL3d3dy5jZWNpbGwuaW5mby9saWNlbmNlcy9MaWNlbmNlX0NlQ0lMTC1DX1YxLWVuLmh0bWxcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1mci5odG1sXG4gKlxuICogQGdsb2JhbCBhZG1pbkRhc2hib2FyZEFwcFxuICpcbiAqL1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qIEFkbWluRGFzaGJvYXJkVXNlcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiRBTUlDbGFzcygnQWRtaW5EYXNoYm9hcmRVc2VycycsIHtcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRfaW5pdDogZnVuY3Rpb24oKVxuXHR7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0YW1pV2ViQXBwLmxvYWRSZXNvdXJjZXMoW1xuXHRcdFx0J3N1YmFwcHMvQWRtaW5EYXNoYm9hcmQvdHdpZy91c2Vycy91c2Vycy50d2lnJyxcblx0XHRcdCdzdWJhcHBzL0FkbWluRGFzaGJvYXJkL3R3aWcvdXNlcnMvdGFibGUudHdpZycsXG5cdFx0XSkuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHRhbWlXZWJBcHAucmVwbGFjZUhUTUwoJyNDQjYwMzZCN181OTcxXzQxQzJfMTE5NF9GNUEwNTFCMjFFQTAnLCBkYXRhWzBdKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHR0aGlzLmZyYWdtZW50VGFibGUgPSBkYXRhWzFdO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0JCgnI0FCMDA2MURBXzY5MURfODBBNV9DMkMwXzIyODZBQkI0ODQ1RCcpLmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcblxuXHRcdFx0XHRcdGlmKGUua2V5Q29kZSA9PSAxMylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRhZG1pbkRhc2hib2FyZEFwcC5zdWJzdWJhcHAuZmluZCgkKCcjQUIwMDYxREFfNjkxRF84MEE1X0MyQzBfMjI4NkFCQjQ4NDVEJykudmFsKCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JCgnI0NEMjRCQzAyX0MzOUZfQUUwQ19BODNGXzg1QjY0NTg0MjFCNicpLmNsaWNrKCgpID0+IHtcblxuXHRcdFx0XHRcdGFkbWluRGFzaGJvYXJkQXBwLnN1YnN1YmFwcC5maW5kKCQoJyNBQjAwNjFEQV82OTFEXzgwQTVfQzJDMF8yMjg2QUJCNDg0NUQnKS52YWwoKSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0cmVzdWx0LnJlc29sdmUoKTtcblx0XHRcdH0pO1xuXG5cdFx0fSkuZmFpbCgoZSkgPT4ge1xuXG5cdFx0XHRyZXN1bHQucmVqZWN0KGUpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdG9uTG9naW46IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiBhbWlDb21tYW5kLmV4ZWN1dGUoJ1NlYXJjaFF1ZXJ5IC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfcm9sZVwiIC1tcWw9XCJTRUxFQ1QgYHJvdXRlcl9yb2xlYC5gcm9sZWBcIicpLmRvbmUoKGRhdGEpID0+IHtcblxuXHRcdFx0dGhpcy5yb2xlcyA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJyb2xlXCJ9LiQnLCBkYXRhKTtcblxuXHRcdFx0aWYoJ2ZpbHRlcicgaW4gYW1pV2ViQXBwLmFyZ3MpXG5cdFx0XHR7XG5cdFx0XHRcdCQoJyNBQjAwNjFEQV82OTFEXzgwQTVfQzJDMF8yMjg2QUJCNDg0NUQnKS52YWwoYW1pV2ViQXBwLmFyZ3NbJ2ZpbHRlciddKTtcblxuXHRcdFx0XHRhZG1pbkRhc2hib2FyZEFwcC5zdWJzdWJhcHAuZmluZChhbWlXZWJBcHAuYXJnc1snZmlsdGVyJ10pO1xuXHRcdFx0fVxuXG5cdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRmaW5kOiBmdW5jdGlvbihmaWx0ZXIpXG5cdHtcblx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0ZmlsdGVyID0gZmlsdGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdTZWFyY2hRdWVyeSAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAtbXFsPVwiU0VMRUNUIGByb3V0ZXJfdXNlcmAuYGlkYCwgYHJvdXRlcl9yb2xlYC5gcm9sZWAgV0hFUkUgTE9XRVIoYHJvdXRlcl91c2VyYC5gQU1JVXNlcmApIExJS0UgXFwnJScgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGFtaVdlYkFwcC50ZXh0VG9TUUwoZmlsdGVyKSkgKyAnJVxcJyBPUiBMT1dFUihgcm91dGVyX3VzZXJgLmBlbWFpbGApIExJS0UgXFwnJScgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGFtaVdlYkFwcC50ZXh0VG9TUUwoZmlsdGVyKSkgKyAnJVxcJ1wiJykuZG9uZSgoZGF0YTIpID0+IHtcblxuXHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdTZWFyY2hRdWVyeSAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAtbXFsPVwiU0VMRUNUIGBpZGAsIGBBTUlVc2VyYCwgYGNsaWVudEROYCwgYGlzc3VlckROYCwgYGZpcnN0TmFtZWAsIGBsYXN0TmFtZWAsIGBlbWFpbGAsIGB2YWxpZGAgV0hFUkUgTE9XRVIoYHJvdXRlcl91c2VyYC5gQU1JVXNlcmApIExJS0UgXFwnJScgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGFtaVdlYkFwcC50ZXh0VG9TUUwoZmlsdGVyKSkgKyAnJVxcJyBPUiBMT1dFUihgcm91dGVyX3VzZXJgLmBlbWFpbGApIExJS0UgXFwnJScgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGFtaVdlYkFwcC50ZXh0VG9TUUwoZmlsdGVyKSkgKyAnJVxcJyBPUkRFUiBCWSBgQU1JVXNlcmAgTElNSVQgNTBcIicpLmRvbmUoKGRhdGExKSA9PiB7XG5cblx0XHRcdFx0Y29uc3Qgcm93czEgPSBhbWlXZWJBcHAuanNwYXRoKCcuLnJvd3NldC5yb3cnLCBkYXRhMSk7XG5cdFx0XHRcdGNvbnN0IHJvd3MyID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5yb3dzZXQucm93JywgZGF0YTIpO1xuXG5cdFx0XHRcdGNvbnN0IGlkcyA9IFtdO1xuXG5cdFx0XHRcdGNvbnN0IHVzZXJzID0ge307XG5cblx0XHRcdFx0cm93czEuZm9yRWFjaChmdW5jdGlvbihyb3cpIHtcblxuXHRcdFx0XHRcdGNvbnN0IGlkID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImlkXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IEFNSVVzZXIgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiQU1JVXNlclwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCBjbGllbnRETiA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJjbGllbnRETlwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCBpc3N1ZXJETiA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJpc3N1ZXJETlwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCBmaXJzdG5hbWUgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiZmlyc3ROYW1lXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGxhc3RuYW1lID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImxhc3ROYW1lXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGVtYWlsID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImVtYWlsXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IHZhbGlkID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cInZhbGlkXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXG5cdFx0XHRcdFx0aWRzLnB1c2goaWQpO1xuXG5cdFx0XHRcdFx0dXNlcnNbaWRdID0ge1xuXHRcdFx0XHRcdFx0QU1JVXNlcjogQU1JVXNlcixcblx0XHRcdFx0XHRcdGNsaWVudEROOiBjbGllbnRETixcblx0XHRcdFx0XHRcdGlzc3VlckROOiBpc3N1ZXJETixcblx0XHRcdFx0XHRcdGZpcnN0bmFtZTogZmlyc3RuYW1lLFxuXHRcdFx0XHRcdFx0bGFzdG5hbWU6IGxhc3RuYW1lLFxuXHRcdFx0XHRcdFx0ZW1haWw6IGVtYWlsLFxuXHRcdFx0XHRcdFx0dmFsaWQ6IHZhbGlkLFxuXHRcdFx0XHRcdFx0cm9sZXM6IFtdLFxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdHJvd3MyLmZvckVhY2goZnVuY3Rpb24ocm93KSB7XG5cblx0XHRcdFx0XHRjb25zdCBpZCA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJpZFwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCByb2xlID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cInNlbGYucm91dGVyX3JvbGUucm9sZVwifS4kJywgcm93KVswXSB8fCAnJztcblxuXHRcdFx0XHRcdGlmKGlkIGluIHVzZXJzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdHVzZXJzW2lkXS5yb2xlcy5wdXNoKHJvbGUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Y29uc3QgZGljdCA9IHtcblx0XHRcdFx0XHRpZHM6IGlkcyxcblx0XHRcdFx0XHR1c2VyczogdXNlcnMsXG5cdFx0XHRcdFx0cm9sZXM6IHRoaXMucm9sZXMsXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0YW1pV2ViQXBwLnJlcGxhY2VIVE1MKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDJywgdGhpcy5mcmFnbWVudFRhYmxlLCB7ZGljdDogZGljdH0pLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0Y29uc3QgZWwxID0gJCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyBbZGF0YS1jaGFuZ2UtdmFsaWRdJyk7XG5cblx0XHRcdFx0XHRjb25zdCBlbDIgPSAkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIFtkYXRhLWRlbGV0ZS11c2VyXScpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZWwzID0gJCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyBbZGF0YS1jaGFuZ2Utcm9sZV0nKTtcblxuXHRcdFx0XHRcdGNvbnN0IGVsNCA9ICQoJyNGQ0JENkRGQ18yMDYxXzhDQzNfNjUyQ183NzY3MUExNzlBQUMgW2RhdGEtY2hhbmdlLWNsaWVudC1kbicpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZWw1ID0gJCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyBbZGF0YS1jaGFuZ2UtaXNzdWVyLWRuJyk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDMuc2VsZWN0Mih7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBhIHJvbGUnLFxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwxLmNoYW5nZSgoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1VwZGF0ZUVsZW1lbnRzIC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfdXNlclwiIC1zZXBhcmF0b3I9XCJ8XCIgLWZpZWxkcz1cInZhbGlkXCIgLXZhbHVlcz1cIicgKyAoJChlLmN1cnJlbnRUYXJnZXQpLnByb3AoJ2NoZWNrZWQnKSA/IDEgOiAwKSArICdcIiAta2V5RmllbGRzPVwiaWRcIiAta2V5VmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLXZhbGlkJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHR9KS5mYWlsKGZ1bmN0aW9uKGRhdGEsIG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsMi5jbGljaygoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0XHRcdGlmKCFjb25maXJtKCdQbGVhc2UgY29uZmlybS4uLicpKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnUmVtb3ZlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLWtleUZpZWxkcz1cImlkXCIgLWtleVZhbHVlcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWRlbGV0ZS11c2VyJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0JCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyB0cltkYXRhLWlkPVwiJyArICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWRlbGV0ZS11c2VyJykgKyAnXCJdJykucmVtb3ZlKCk7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHR9KS5mYWlsKGZ1bmN0aW9uKGRhdGEsIG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsMy5vbignc2VsZWN0MjpzZWxlY3QnLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ0FkZFVzZXJSb2xlIC11c2VyPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLXJvbGUnKSkgKyAnXCIgLXJvbGU9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhlLnBhcmFtcy5kYXRhLnRleHQpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHR9KS5mYWlsKGZ1bmN0aW9uKGRhdGEsIG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsMy5vbignc2VsZWN0Mjp1bnNlbGVjdCcsIChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnUmVtb3ZlVXNlclJvbGUgLXVzZXI9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2Utcm9sZScpKSArICdcIiAtcm9sZT1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGUucGFyYW1zLmRhdGEudGV4dCkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWw0Lm9uKCdjbGljaycsIChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGNsaWVudEROID0gcHJvbXB0KCdOZXcgY2xpZW50IEROJywgJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJy52YWx1ZScpLnRleHQoKSk7XG5cblx0XHRcdFx0XHRcdGlmKGNsaWVudEROKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnVXBkYXRlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLXNlcGFyYXRvcj1cInxcIiAtZmllbGRzPVwiY2xpZW50RE5cIiAtdmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoY2xpZW50RE4pICsgJ1wiIC1rZXlGaWVsZHM9XCJpZFwiIC1rZXlWYWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2UtY2xpZW50LWRuJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy52YWx1ZScpLnRleHQoY2xpZW50RE4pO1xuXG5cdFx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsNS5vbignY2xpY2snLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRjb25zdCBpc3N1ZXJETiA9IHByb21wdCgnTmV3IGlzc3VlciBETicsICQoZS5jdXJyZW50VGFyZ2V0KS5maW5kKCcudmFsdWUnKS50ZXh0KCkpO1xuXG5cdFx0XHRcdFx0XHRpZihpc3N1ZXJETilcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1VwZGF0ZUVsZW1lbnRzIC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfdXNlclwiIC1zZXBhcmF0b3I9XCJ8XCIgLWZpZWxkcz1cImlzc3VlckROXCIgLXZhbHVlcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGlzc3VlckROKSArICdcIiAta2V5RmllbGRzPVwiaWRcIiAta2V5VmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLWlzc3Vlci1kbicpKSArICdcIicpLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcudmFsdWUnKS50ZXh0KGlzc3VlckROKTtcblxuXHRcdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC51bmxvY2soKTtcblxuXHRcdFx0XHRcdFx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdH0pO1xuXG5cdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbn0pO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiJdfQ==
