/*!
 * AMI Twig Engine
 *
 * Copyright (c) 2014-2019 The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global adminDashboardApp
 *
 */$AMIClass("AdminDashboardUsers",{_init:function _init(){var _this=this;var result=$.Deferred();amiWebApp.loadResources(["subapps/AdminDashboard/twig/users/users.twig","subapps/AdminDashboard/twig/users/table.twig"]).done(function(data){amiWebApp.replaceHTML("#CB6036B7_5971_41C2_1194_F5A051B21EA0",data[0]).done(function(){_this.fragmentTable=data[1];$("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").keypress(function(e){if(e.keyCode==13){adminDashboardApp.subsubapp.find($("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val())}});$("#CD24BC02_C39F_AE0C_A83F_85B6458421B6").click(function(){adminDashboardApp.subsubapp.find($("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val())});result.resolve()})}).fail(function(e){result.reject(e)});return result},onLogin:function onLogin(){var _this2=this;return amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_role\" -mql=\"SELECT `router_role`.`role`\"").done(function(data){_this2.roles=amiWebApp.jspath("..field{.@name===\"role\"}.$",data);if("filter"in amiWebApp.args){$("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val(amiWebApp.args["filter"]);adminDashboardApp.subsubapp.find(amiWebApp.args["filter"])}}).fail(function(data,message){amiWebApp.error(message,true)})},find:function find(filter){var _this3=this;amiWebApp.lock();filter=filter.trim();amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_user\" -mql=\"SELECT `router_user`.`id`, `router_role`.`role` WHERE `router_user`.`AMIUser` LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%'\"").done(function(data2){amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_user\" -mql=\"SELECT `id`, `AMIUser`, `clientDN`, `issuerDN`, `firstName`, `lastName`, `email`, `valid` WHERE `AMIUser` LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' ORDER BY `AMIUser` LIMIT 50\"").done(function(data1){var rows1=amiWebApp.jspath("..rowset.row",data1);var rows2=amiWebApp.jspath("..rowset.row",data2);var ids=[];var users={};rows1.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var AMIUser=amiWebApp.jspath("..field{.@name===\"AMIUser\"}.$",row)[0]||"";var clientDN=amiWebApp.jspath("..field{.@name===\"clientDN\"}.$",row)[0]||"";var issuerDN=amiWebApp.jspath("..field{.@name===\"issuerDN\"}.$",row)[0]||"";var firstname=amiWebApp.jspath("..field{.@name===\"firstName\"}.$",row)[0]||"";var lastname=amiWebApp.jspath("..field{.@name===\"lastName\"}.$",row)[0]||"";var email=amiWebApp.jspath("..field{.@name===\"email\"}.$",row)[0]||"";var valid=amiWebApp.jspath("..field{.@name===\"valid\"}.$",row)[0]||"";ids.push(id);users[id]={AMIUser:AMIUser,clientDN:clientDN,issuerDN:issuerDN,firstname:firstname,lastname:lastname,email:email,valid:valid,roles:[]}});rows2.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var role=amiWebApp.jspath("..field{.@name===\"self.router_role.role\"}.$",row)[0]||"";if(id in users){users[id].roles.push(role)}});var dict={ids:ids,users:users,roles:_this3.roles};amiWebApp.replaceHTML("#FCBD6DFC_2061_8CC3_652C_77671A179AAC",_this3.fragmentTable,{dict:dict}).done(function(){var el1=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-valid]");var el2=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-delete-user]");var el3=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-role]");var el4=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-client-dn");var el5=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-issuer-dn");el3.select2({placeholder:"Select a role"});el1.change(function(e){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"valid\" -values=\""+($(e.currentTarget).prop("checked")?1:0)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-valid"))+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el2.click(function(e){e.preventDefault();if(!confirm("Please confirm...")){return}amiWebApp.lock();amiCommand.execute("RemoveElements -catalog=\"self\" -entity=\"router_user\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-delete-user"))+"\"").done(function(){$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC tr[data-id=\""+$(e.currentTarget).attr("data-delete-user")+"\"]").remove();amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.on("select2:select",function(e){amiWebApp.lock();amiCommand.execute("AddUserRole -user=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.on("select2:unselect",function(e){amiWebApp.lock();amiCommand.execute("RemoveUserRole -user=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el4.on("click",function(e){var clientDN=prompt("New client DN",$(e.currentTarget).find(".value").text());if(clientDN){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"clientDN\" -values=\""+amiWebApp.textToString(clientDN)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-client-dn"))+"\"").done(function(){$(_this3).find(".value").text(clientDN);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});el5.on("click",function(e){var issuerDN=prompt("New issuer DN",$(e.currentTarget).find(".value").text());if(issuerDN){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"issuerDN\" -values=\""+amiWebApp.textToString(issuerDN)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-issuer-dn"))+"\"").done(function(){$(_this3).find(".value").text(issuerDN);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});amiWebApp.unlock()})}).fail(function(data,message){amiWebApp.error(message,true)})}).fail(function(data,message){amiWebApp.error(message,true)})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl91c2Vycy5lczYuanMiXSwibmFtZXMiOlsiJEFNSUNsYXNzIiwiX2luaXQiLCJyZXN1bHQiLCIkIiwiRGVmZXJyZWQiLCJhbWlXZWJBcHAiLCJsb2FkUmVzb3VyY2VzIiwiZG9uZSIsImRhdGEiLCJyZXBsYWNlSFRNTCIsImZyYWdtZW50VGFibGUiLCJrZXlwcmVzcyIsImUiLCJrZXlDb2RlIiwiYWRtaW5EYXNoYm9hcmRBcHAiLCJzdWJzdWJhcHAiLCJmaW5kIiwidmFsIiwiY2xpY2siLCJyZXNvbHZlIiwiZmFpbCIsInJlamVjdCIsIm9uTG9naW4iLCJhbWlDb21tYW5kIiwiZXhlY3V0ZSIsInJvbGVzIiwianNwYXRoIiwiYXJncyIsIm1lc3NhZ2UiLCJlcnJvciIsImZpbHRlciIsImxvY2siLCJ0cmltIiwidGV4dFRvU3RyaW5nIiwidGV4dFRvU1FMIiwiZGF0YTIiLCJkYXRhMSIsInJvd3MxIiwicm93czIiLCJpZHMiLCJ1c2VycyIsImZvckVhY2giLCJyb3ciLCJpZCIsIkFNSVVzZXIiLCJjbGllbnRETiIsImlzc3VlckROIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJlbWFpbCIsInZhbGlkIiwicHVzaCIsInJvbGUiLCJkaWN0IiwiZWwxIiwiZWwyIiwiZWwzIiwiZWw0IiwiZWw1Iiwic2VsZWN0MiIsInBsYWNlaG9sZGVyIiwiY2hhbmdlIiwiY3VycmVudFRhcmdldCIsInByb3AiLCJhdHRyIiwidW5sb2NrIiwicHJldmVudERlZmF1bHQiLCJjb25maXJtIiwicmVtb3ZlIiwib24iLCJwYXJhbXMiLCJ0ZXh0IiwicHJvbXB0Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7R0FpQkFBLFNBQVMsQ0FBQyxxQkFBRCxDQUF3QixDQUdoQ0MsS0FBSyxDQUFFLGdCQUNQLGdCQUNDLEdBQU1DLENBQUFBLE1BQU0sQ0FBR0MsQ0FBQyxDQUFDQyxRQUFGLEVBQWYsQ0FFQUMsU0FBUyxDQUFDQyxhQUFWLENBQXdCLENBQ3ZCLDhDQUR1QixDQUV2Qiw4Q0FGdUIsQ0FBeEIsRUFHR0MsSUFISCxDQUdRLFNBQUNDLElBQUQsQ0FBVSxDQUVqQkgsU0FBUyxDQUFDSSxXQUFWLENBQXNCLHVDQUF0QixDQUErREQsSUFBSSxDQUFDLENBQUQsQ0FBbkUsRUFBd0VELElBQXhFLENBQTZFLFVBQU0sQ0FFbEYsS0FBSSxDQUFDRyxhQUFMLENBQXFCRixJQUFJLENBQUMsQ0FBRCxDQUF6QixDQUlBTCxDQUFDLENBQUMsdUNBQUQsQ0FBRCxDQUEyQ1EsUUFBM0MsQ0FBb0QsU0FBU0MsQ0FBVCxDQUFZLENBRS9ELEdBQUdBLENBQUMsQ0FBQ0MsT0FBRixFQUFhLEVBQWhCLENBQ0EsQ0FDQ0MsaUJBQWlCLENBQUNDLFNBQWxCLENBQTRCQyxJQUE1QixDQUFpQ2IsQ0FBQyxDQUFDLHVDQUFELENBQUQsQ0FBMkNjLEdBQTNDLEVBQWpDLENBQ0EsQ0FDRCxDQU5ELEVBUUFkLENBQUMsQ0FBQyx1Q0FBRCxDQUFELENBQTJDZSxLQUEzQyxDQUFpRCxVQUFNLENBRXRESixpQkFBaUIsQ0FBQ0MsU0FBbEIsQ0FBNEJDLElBQTVCLENBQWlDYixDQUFDLENBQUMsdUNBQUQsQ0FBRCxDQUEyQ2MsR0FBM0MsRUFBakMsQ0FDQSxDQUhELEVBT0FmLE1BQU0sQ0FBQ2lCLE9BQVAsRUFDQSxDQXRCRCxDQXdCQSxDQTdCRCxFQTZCR0MsSUE3QkgsQ0E2QlEsU0FBQ1IsQ0FBRCxDQUFPLENBRWRWLE1BQU0sQ0FBQ21CLE1BQVAsQ0FBY1QsQ0FBZCxDQUNBLENBaENELEVBa0NBLE1BQU9WLENBQUFBLE1BQ1AsQ0ExQytCLENBOENoQ29CLE9BQU8sQ0FBRSxrQkFDVCxpQkFDQyxNQUFPQyxDQUFBQSxVQUFVLENBQUNDLE9BQVgsQ0FBbUIsNEZBQW5CLEVBQTJHakIsSUFBM0csQ0FBZ0gsU0FBQ0MsSUFBRCxDQUFVLENBRWhJLE1BQUksQ0FBQ2lCLEtBQUwsQ0FBYXBCLFNBQVMsQ0FBQ3FCLE1BQVYsQ0FBaUIsOEJBQWpCLENBQStDbEIsSUFBL0MsQ0FBYixDQUVBLEdBQUcsVUFBWUgsQ0FBQUEsU0FBUyxDQUFDc0IsSUFBekIsQ0FDQSxDQUNDeEIsQ0FBQyxDQUFDLHVDQUFELENBQUQsQ0FBMkNjLEdBQTNDLENBQStDWixTQUFTLENBQUNzQixJQUFWLENBQWUsUUFBZixDQUEvQyxFQUVBYixpQkFBaUIsQ0FBQ0MsU0FBbEIsQ0FBNEJDLElBQTVCLENBQWlDWCxTQUFTLENBQUNzQixJQUFWLENBQWUsUUFBZixDQUFqQyxDQUNBLENBRUQsQ0FYTSxFQVdKUCxJQVhJLENBV0MsU0FBQ1osSUFBRCxDQUFPb0IsT0FBUCxDQUFtQixDQUUxQnZCLFNBQVMsQ0FBQ3dCLEtBQVYsQ0FBZ0JELE9BQWhCLENBQXlCLElBQXpCLENBQ0EsQ0FkTSxDQWVQLENBL0QrQixDQW1FaENaLElBQUksQ0FBRSxjQUFTYyxNQUFULENBQ04saUJBQ0N6QixTQUFTLENBQUMwQixJQUFWLEdBRUFELE1BQU0sQ0FBR0EsTUFBTSxDQUFDRSxJQUFQLEVBQVQsQ0FFQVQsVUFBVSxDQUFDQyxPQUFYLENBQW1CLHFKQUFtSm5CLFNBQVMsQ0FBQzRCLFlBQVYsQ0FBdUI1QixTQUFTLENBQUM2QixTQUFWLENBQW9CSixNQUFwQixDQUF2QixDQUFuSixDQUF5TSxNQUE1TixFQUFvT3ZCLElBQXBPLENBQXlPLFNBQUM0QixLQUFELENBQVcsQ0FFblBaLFVBQVUsQ0FBQ0MsT0FBWCxDQUFtQixpTEFBK0tuQixTQUFTLENBQUM0QixZQUFWLENBQXVCNUIsU0FBUyxDQUFDNkIsU0FBVixDQUFvQkosTUFBcEIsQ0FBdkIsQ0FBL0ssQ0FBcU8sa0NBQXhQLEVBQTRSdkIsSUFBNVIsQ0FBaVMsU0FBQzZCLEtBQUQsQ0FBVyxDQUUzUyxHQUFNQyxDQUFBQSxLQUFLLENBQUdoQyxTQUFTLENBQUNxQixNQUFWLENBQWlCLGNBQWpCLENBQWlDVSxLQUFqQyxDQUFkLENBQ0EsR0FBTUUsQ0FBQUEsS0FBSyxDQUFHakMsU0FBUyxDQUFDcUIsTUFBVixDQUFpQixjQUFqQixDQUFpQ1MsS0FBakMsQ0FBZCxDQUVBLEdBQU1JLENBQUFBLEdBQUcsQ0FBRyxFQUFaLENBRUEsR0FBTUMsQ0FBQUEsS0FBSyxDQUFHLEVBQWQsQ0FFQUgsS0FBSyxDQUFDSSxPQUFOLENBQWMsU0FBU0MsR0FBVCxDQUFjLENBRTNCLEdBQU1DLENBQUFBLEVBQUUsQ0FBR3RDLFNBQVMsQ0FBQ3FCLE1BQVYsQ0FBaUIsNEJBQWpCLENBQTZDZ0IsR0FBN0MsRUFBa0QsQ0FBbEQsR0FBd0QsRUFBbkUsQ0FDQSxHQUFNRSxDQUFBQSxPQUFPLENBQUd2QyxTQUFTLENBQUNxQixNQUFWLENBQWlCLGlDQUFqQixDQUFrRGdCLEdBQWxELEVBQXVELENBQXZELEdBQTZELEVBQTdFLENBQ0EsR0FBTUcsQ0FBQUEsUUFBUSxDQUFHeEMsU0FBUyxDQUFDcUIsTUFBVixDQUFpQixrQ0FBakIsQ0FBbURnQixHQUFuRCxFQUF3RCxDQUF4RCxHQUE4RCxFQUEvRSxDQUNBLEdBQU1JLENBQUFBLFFBQVEsQ0FBR3pDLFNBQVMsQ0FBQ3FCLE1BQVYsQ0FBaUIsa0NBQWpCLENBQW1EZ0IsR0FBbkQsRUFBd0QsQ0FBeEQsR0FBOEQsRUFBL0UsQ0FDQSxHQUFNSyxDQUFBQSxTQUFTLENBQUcxQyxTQUFTLENBQUNxQixNQUFWLENBQWlCLG1DQUFqQixDQUFvRGdCLEdBQXBELEVBQXlELENBQXpELEdBQStELEVBQWpGLENBQ0EsR0FBTU0sQ0FBQUEsUUFBUSxDQUFHM0MsU0FBUyxDQUFDcUIsTUFBVixDQUFpQixrQ0FBakIsQ0FBbURnQixHQUFuRCxFQUF3RCxDQUF4RCxHQUE4RCxFQUEvRSxDQUNBLEdBQU1PLENBQUFBLEtBQUssQ0FBRzVDLFNBQVMsQ0FBQ3FCLE1BQVYsQ0FBaUIsK0JBQWpCLENBQWdEZ0IsR0FBaEQsRUFBcUQsQ0FBckQsR0FBMkQsRUFBekUsQ0FDQSxHQUFNUSxDQUFBQSxLQUFLLENBQUc3QyxTQUFTLENBQUNxQixNQUFWLENBQWlCLCtCQUFqQixDQUFnRGdCLEdBQWhELEVBQXFELENBQXJELEdBQTJELEVBQXpFLENBRUFILEdBQUcsQ0FBQ1ksSUFBSixDQUFTUixFQUFULEVBRUFILEtBQUssQ0FBQ0csRUFBRCxDQUFMLENBQVksQ0FDWEMsT0FBTyxDQUFFQSxPQURFLENBRVhDLFFBQVEsQ0FBRUEsUUFGQyxDQUdYQyxRQUFRLENBQUVBLFFBSEMsQ0FJWEMsU0FBUyxDQUFFQSxTQUpBLENBS1hDLFFBQVEsQ0FBRUEsUUFMQyxDQU1YQyxLQUFLLENBQUVBLEtBTkksQ0FPWEMsS0FBSyxDQUFFQSxLQVBJLENBUVh6QixLQUFLLENBQUUsRUFSSSxDQVVaLENBdkJELEVBeUJBYSxLQUFLLENBQUNHLE9BQU4sQ0FBYyxTQUFTQyxHQUFULENBQWMsQ0FFM0IsR0FBTUMsQ0FBQUEsRUFBRSxDQUFHdEMsU0FBUyxDQUFDcUIsTUFBVixDQUFpQiw0QkFBakIsQ0FBNkNnQixHQUE3QyxFQUFrRCxDQUFsRCxHQUF3RCxFQUFuRSxDQUNBLEdBQU1VLENBQUFBLElBQUksQ0FBRy9DLFNBQVMsQ0FBQ3FCLE1BQVYsQ0FBaUIsK0NBQWpCLENBQWdFZ0IsR0FBaEUsRUFBcUUsQ0FBckUsR0FBMkUsRUFBeEYsQ0FFQSxHQUFHQyxFQUFFLEdBQUlILENBQUFBLEtBQVQsQ0FDQSxDQUNDQSxLQUFLLENBQUNHLEVBQUQsQ0FBTCxDQUFVbEIsS0FBVixDQUFnQjBCLElBQWhCLENBQXFCQyxJQUFyQixDQUNBLENBQ0QsQ0FURCxFQVdBLEdBQU1DLENBQUFBLElBQUksQ0FBRyxDQUNaZCxHQUFHLENBQUVBLEdBRE8sQ0FFWkMsS0FBSyxDQUFFQSxLQUZLLENBR1pmLEtBQUssQ0FBRSxNQUFJLENBQUNBLEtBSEEsQ0FBYixDQU1BcEIsU0FBUyxDQUFDSSxXQUFWLENBQXNCLHVDQUF0QixDQUErRCxNQUFJLENBQUNDLGFBQXBFLENBQW1GLENBQUMyQyxJQUFJLENBQUVBLElBQVAsQ0FBbkYsRUFBaUc5QyxJQUFqRyxDQUFzRyxVQUFNLENBRTNHLEdBQU0rQyxDQUFBQSxHQUFHLENBQUduRCxDQUFDLENBQUMsMkRBQUQsQ0FBYixDQUVBLEdBQU1vRCxDQUFBQSxHQUFHLENBQUdwRCxDQUFDLENBQUMsMERBQUQsQ0FBYixDQUVBLEdBQU1xRCxDQUFBQSxHQUFHLENBQUdyRCxDQUFDLENBQUMsMERBQUQsQ0FBYixDQUVBLEdBQU1zRCxDQUFBQSxHQUFHLENBQUd0RCxDQUFDLENBQUMsOERBQUQsQ0FBYixDQUVBLEdBQU11RCxDQUFBQSxHQUFHLENBQUd2RCxDQUFDLENBQUMsOERBQUQsQ0FBYixDQUlBcUQsR0FBRyxDQUFDRyxPQUFKLENBQVksQ0FDWEMsV0FBVyxDQUFFLGVBREYsQ0FBWixFQU1BTixHQUFHLENBQUNPLE1BQUosQ0FBVyxTQUFDakQsQ0FBRCxDQUFPLENBRWpCUCxTQUFTLENBQUMwQixJQUFWLEdBRUFSLFVBQVUsQ0FBQ0MsT0FBWCxDQUFtQiwwR0FBbUdyQixDQUFDLENBQUNTLENBQUMsQ0FBQ2tELGFBQUgsQ0FBRCxDQUFtQkMsSUFBbkIsQ0FBd0IsU0FBeEIsRUFBcUMsQ0FBckMsQ0FBeUMsQ0FBNUksRUFBaUosb0NBQWpKLENBQW9MMUQsU0FBUyxDQUFDNEIsWUFBVixDQUF1QjlCLENBQUMsQ0FBQ1MsQ0FBQyxDQUFDa0QsYUFBSCxDQUFELENBQW1CRSxJQUFuQixDQUF3QixtQkFBeEIsQ0FBdkIsQ0FBcEwsQ0FBMlAsSUFBOVEsRUFBbVJ6RCxJQUFuUixDQUF3UixVQUFNLENBRTdSRixTQUFTLENBQUM0RCxNQUFWLEVBRUEsQ0FKRCxFQUlHN0MsSUFKSCxDQUlRLFNBQVNaLElBQVQsQ0FBZW9CLE9BQWYsQ0FBd0IsQ0FFL0J2QixTQUFTLENBQUN3QixLQUFWLENBQWdCRCxPQUFoQixDQUF5QixJQUF6QixDQUNBLENBUEQsQ0FRQSxDQVpELEVBZ0JBMkIsR0FBRyxDQUFDckMsS0FBSixDQUFVLFNBQUNOLENBQUQsQ0FBTyxDQUVoQkEsQ0FBQyxDQUFDc0QsY0FBRixHQUVBLEdBQUcsQ0FBQ0MsT0FBTyxDQUFDLG1CQUFELENBQVgsQ0FDQSxDQUNDLE1BQ0EsQ0FFRDlELFNBQVMsQ0FBQzBCLElBQVYsR0FFQVIsVUFBVSxDQUFDQyxPQUFYLENBQW1CLDJGQUFzRm5CLFNBQVMsQ0FBQzRCLFlBQVYsQ0FBdUI5QixDQUFDLENBQUNTLENBQUMsQ0FBQ2tELGFBQUgsQ0FBRCxDQUFtQkUsSUFBbkIsQ0FBd0Isa0JBQXhCLENBQXZCLENBQXRGLENBQTRKLElBQS9LLEVBQW9MekQsSUFBcEwsQ0FBeUwsVUFBTSxDQUU5TEosQ0FBQyxDQUFDLHNEQUF1REEsQ0FBQyxDQUFDUyxDQUFDLENBQUNrRCxhQUFILENBQUQsQ0FBbUJFLElBQW5CLENBQXdCLGtCQUF4QixDQUF2RCxDQUFxRyxLQUF0RyxDQUFELENBQTZHSSxNQUE3RyxHQUVBL0QsU0FBUyxDQUFDNEQsTUFBVixFQUVBLENBTkQsRUFNRzdDLElBTkgsQ0FNUSxTQUFTWixJQUFULENBQWVvQixPQUFmLENBQXdCLENBRS9CdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQVRELENBVUEsQ0FyQkQsRUF5QkE0QixHQUFHLENBQUNhLEVBQUosQ0FBTyxnQkFBUCxDQUF5QixTQUFDekQsQ0FBRCxDQUFPLENBRS9CUCxTQUFTLENBQUMwQixJQUFWLEdBRUFSLFVBQVUsQ0FBQ0MsT0FBWCxDQUFtQix1QkFBd0JuQixTQUFTLENBQUM0QixZQUFWLENBQXVCOUIsQ0FBQyxDQUFDUyxDQUFDLENBQUNrRCxhQUFILENBQUQsQ0FBbUJFLElBQW5CLENBQXdCLGtCQUF4QixDQUF2QixDQUF4QixDQUE4RixhQUE5RixDQUE0RzNELFNBQVMsQ0FBQzRCLFlBQVYsQ0FBdUJyQixDQUFDLENBQUMwRCxNQUFGLENBQVM5RCxJQUFULENBQWMrRCxJQUFyQyxDQUE1RyxDQUF5SixJQUE1SyxFQUFpTGhFLElBQWpMLENBQXNMLFVBQU0sQ0FFM0xGLFNBQVMsQ0FBQzRELE1BQVYsRUFFQSxDQUpELEVBSUc3QyxJQUpILENBSVEsU0FBU1osSUFBVCxDQUFlb0IsT0FBZixDQUF3QixDQUUvQnZCLFNBQVMsQ0FBQ3dCLEtBQVYsQ0FBZ0JELE9BQWhCLENBQXlCLElBQXpCLENBQ0EsQ0FQRCxDQVFBLENBWkQsRUFnQkE0QixHQUFHLENBQUNhLEVBQUosQ0FBTyxrQkFBUCxDQUEyQixTQUFDekQsQ0FBRCxDQUFPLENBRWpDUCxTQUFTLENBQUMwQixJQUFWLEdBRUFSLFVBQVUsQ0FBQ0MsT0FBWCxDQUFtQiwwQkFBMkJuQixTQUFTLENBQUM0QixZQUFWLENBQXVCOUIsQ0FBQyxDQUFDUyxDQUFDLENBQUNrRCxhQUFILENBQUQsQ0FBbUJFLElBQW5CLENBQXdCLGtCQUF4QixDQUF2QixDQUEzQixDQUFpRyxhQUFqRyxDQUErRzNELFNBQVMsQ0FBQzRCLFlBQVYsQ0FBdUJyQixDQUFDLENBQUMwRCxNQUFGLENBQVM5RCxJQUFULENBQWMrRCxJQUFyQyxDQUEvRyxDQUE0SixJQUEvSyxFQUFvTGhFLElBQXBMLENBQXlMLFVBQU0sQ0FFOUxGLFNBQVMsQ0FBQzRELE1BQVYsRUFFQSxDQUpELEVBSUc3QyxJQUpILENBSVEsU0FBU1osSUFBVCxDQUFlb0IsT0FBZixDQUF3QixDQUUvQnZCLFNBQVMsQ0FBQ3dCLEtBQVYsQ0FBZ0JELE9BQWhCLENBQXlCLElBQXpCLENBQ0EsQ0FQRCxDQVFBLENBWkQsRUFnQkE2QixHQUFHLENBQUNZLEVBQUosQ0FBTyxPQUFQLENBQWdCLFNBQUN6RCxDQUFELENBQU8sQ0FFdEIsR0FBTWlDLENBQUFBLFFBQVEsQ0FBRzJCLE1BQU0sQ0FBQyxlQUFELENBQWtCckUsQ0FBQyxDQUFDUyxDQUFDLENBQUNrRCxhQUFILENBQUQsQ0FBbUI5QyxJQUFuQixDQUF3QixRQUF4QixFQUFrQ3VELElBQWxDLEVBQWxCLENBQXZCLENBRUEsR0FBRzFCLFFBQUgsQ0FDQSxDQUNDeEMsU0FBUyxDQUFDMEIsSUFBVixHQUVBUixVQUFVLENBQUNDLE9BQVgsQ0FBbUIsNEdBQXFHbkIsU0FBUyxDQUFDNEIsWUFBVixDQUF1QlksUUFBdkIsQ0FBckcsQ0FBd0ksb0NBQXhJLENBQTJLeEMsU0FBUyxDQUFDNEIsWUFBVixDQUF1QjlCLENBQUMsQ0FBQ1MsQ0FBQyxDQUFDa0QsYUFBSCxDQUFELENBQW1CRSxJQUFuQixDQUF3Qix1QkFBeEIsQ0FBdkIsQ0FBM0ssQ0FBc1AsSUFBelEsRUFBOFF6RCxJQUE5USxDQUFtUixVQUFNLENBRXhSSixDQUFDLENBQUMsTUFBRCxDQUFELENBQVFhLElBQVIsQ0FBYSxRQUFiLEVBQXVCdUQsSUFBdkIsQ0FBNEIxQixRQUE1QixFQUVBeEMsU0FBUyxDQUFDNEQsTUFBVixFQUVBLENBTkQsRUFNRzdDLElBTkgsQ0FNUSxTQUFTWixJQUFULENBQWVvQixPQUFmLENBQXdCLENBRS9CdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQVRELENBVUEsQ0FDRCxDQW5CRCxFQXVCQThCLEdBQUcsQ0FBQ1csRUFBSixDQUFPLE9BQVAsQ0FBZ0IsU0FBQ3pELENBQUQsQ0FBTyxDQUV0QixHQUFNa0MsQ0FBQUEsUUFBUSxDQUFHMEIsTUFBTSxDQUFDLGVBQUQsQ0FBa0JyRSxDQUFDLENBQUNTLENBQUMsQ0FBQ2tELGFBQUgsQ0FBRCxDQUFtQjlDLElBQW5CLENBQXdCLFFBQXhCLEVBQWtDdUQsSUFBbEMsRUFBbEIsQ0FBdkIsQ0FFQSxHQUFHekIsUUFBSCxDQUNBLENBQ0N6QyxTQUFTLENBQUMwQixJQUFWLEdBRUFSLFVBQVUsQ0FBQ0MsT0FBWCxDQUFtQiw0R0FBcUduQixTQUFTLENBQUM0QixZQUFWLENBQXVCYSxRQUF2QixDQUFyRyxDQUF3SSxvQ0FBeEksQ0FBMkt6QyxTQUFTLENBQUM0QixZQUFWLENBQXVCOUIsQ0FBQyxDQUFDUyxDQUFDLENBQUNrRCxhQUFILENBQUQsQ0FBbUJFLElBQW5CLENBQXdCLHVCQUF4QixDQUF2QixDQUEzSyxDQUFzUCxJQUF6USxFQUE4UXpELElBQTlRLENBQW1SLFVBQU0sQ0FFeFJKLENBQUMsQ0FBQyxNQUFELENBQUQsQ0FBUWEsSUFBUixDQUFhLFFBQWIsRUFBdUJ1RCxJQUF2QixDQUE0QnpCLFFBQTVCLEVBRUF6QyxTQUFTLENBQUM0RCxNQUFWLEVBRUEsQ0FORCxFQU1HN0MsSUFOSCxDQU1RLFNBQUNaLElBQUQsQ0FBT29CLE9BQVAsQ0FBbUIsQ0FFMUJ2QixTQUFTLENBQUN3QixLQUFWLENBQWdCRCxPQUFoQixDQUF5QixJQUF6QixDQUNBLENBVEQsQ0FVQSxDQUNELENBbkJELEVBdUJBdkIsU0FBUyxDQUFDNEQsTUFBVixFQUdBLENBOUlELENBZ0pBLENBbk1ELEVBbU1HN0MsSUFuTUgsQ0FtTVEsU0FBQ1osSUFBRCxDQUFPb0IsT0FBUCxDQUFtQixDQUUxQnZCLFNBQVMsQ0FBQ3dCLEtBQVYsQ0FBZ0JELE9BQWhCLENBQXlCLElBQXpCLENBQ0EsQ0F0TUQsQ0F3TUEsQ0ExTUQsRUEwTUdSLElBMU1ILENBME1RLFNBQUNaLElBQUQsQ0FBT29CLE9BQVAsQ0FBbUIsQ0FFMUJ2QixTQUFTLENBQUN3QixLQUFWLENBQWdCRCxPQUFoQixDQUF5QixJQUF6QixDQUNBLENBN01ELENBOE1BLENBdlIrQixDQUF4QixDQUFUIiwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBBTUkgVHdpZyBFbmdpbmVcbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQtMjAxOSBUaGUgQU1JIFRlYW0gLyBMUFNDIC8gSU4yUDNcbiAqXG4gKiBUaGlzIGZpbGUgbXVzdCBiZSB1c2VkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgQ2VDSUxMLUM6XG4gKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZW4uaHRtbFxuICogaHR0cDovL3d3dy5jZWNpbGwuaW5mby9saWNlbmNlcy9MaWNlbmNlX0NlQ0lMTC1DX1YxLWZyLmh0bWxcbiAqXG4gKiBAZ2xvYmFsIGFkbWluRGFzaGJvYXJkQXBwXG4gKlxuICovXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyogQWRtaW5EYXNoYm9hcmRVc2VycyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuJEFNSUNsYXNzKCdBZG1pbkRhc2hib2FyZFVzZXJzJywge1xuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdF9pbml0OiBmdW5jdGlvbigpXG5cdHtcblx0XHRjb25zdCByZXN1bHQgPSAkLkRlZmVycmVkKCk7XG5cblx0XHRhbWlXZWJBcHAubG9hZFJlc291cmNlcyhbXG5cdFx0XHQnc3ViYXBwcy9BZG1pbkRhc2hib2FyZC90d2lnL3VzZXJzL3VzZXJzLnR3aWcnLFxuXHRcdFx0J3N1YmFwcHMvQWRtaW5EYXNoYm9hcmQvdHdpZy91c2Vycy90YWJsZS50d2lnJyxcblx0XHRdKS5kb25lKChkYXRhKSA9PiB7XG5cblx0XHRcdGFtaVdlYkFwcC5yZXBsYWNlSFRNTCgnI0NCNjAzNkI3XzU5NzFfNDFDMl8xMTk0X0Y1QTA1MUIyMUVBMCcsIGRhdGFbMF0pLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdHRoaXMuZnJhZ21lbnRUYWJsZSA9IGRhdGFbMV07XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHQkKCcjQUIwMDYxREFfNjkxRF84MEE1X0MyQzBfMjI4NkFCQjQ4NDVEJykua2V5cHJlc3MoZnVuY3Rpb24oZSkge1xuXG5cdFx0XHRcdFx0aWYoZS5rZXlDb2RlID09IDEzKVxuXHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdGFkbWluRGFzaGJvYXJkQXBwLnN1YnN1YmFwcC5maW5kKCQoJyNBQjAwNjFEQV82OTFEXzgwQTVfQzJDMF8yMjg2QUJCNDg0NUQnKS52YWwoKSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQkKCcjQ0QyNEJDMDJfQzM5Rl9BRTBDX0E4M0ZfODVCNjQ1ODQyMUI2JykuY2xpY2soKCkgPT4ge1xuXG5cdFx0XHRcdFx0YWRtaW5EYXNoYm9hcmRBcHAuc3Vic3ViYXBwLmZpbmQoJCgnI0FCMDA2MURBXzY5MURfODBBNV9DMkMwXzIyODZBQkI0ODQ1RCcpLnZhbCgpKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRyZXN1bHQucmVzb2x2ZSgpO1xuXHRcdFx0fSk7XG5cblx0XHR9KS5mYWlsKChlKSA9PiB7XG5cblx0XHRcdHJlc3VsdC5yZWplY3QoZSk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0b25Mb2dpbjogZnVuY3Rpb24oKVxuXHR7XG5cdFx0cmV0dXJuIGFtaUNvbW1hbmQuZXhlY3V0ZSgnU2VhcmNoUXVlcnkgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl9yb2xlXCIgLW1xbD1cIlNFTEVDVCBgcm91dGVyX3JvbGVgLmByb2xlYFwiJykuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHR0aGlzLnJvbGVzID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cInJvbGVcIn0uJCcsIGRhdGEpO1xuXG5cdFx0XHRpZignZmlsdGVyJyBpbiBhbWlXZWJBcHAuYXJncylcblx0XHRcdHtcblx0XHRcdFx0JCgnI0FCMDA2MURBXzY5MURfODBBNV9DMkMwXzIyODZBQkI0ODQ1RCcpLnZhbChhbWlXZWJBcHAuYXJnc1snZmlsdGVyJ10pO1xuXG5cdFx0XHRcdGFkbWluRGFzaGJvYXJkQXBwLnN1YnN1YmFwcC5maW5kKGFtaVdlYkFwcC5hcmdzWydmaWx0ZXInXSk7XG5cdFx0XHR9XG5cblx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHR9KTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGZpbmQ6IGZ1bmN0aW9uKGZpbHRlcilcblx0e1xuXHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRmaWx0ZXIgPSBmaWx0ZXIudHJpbSgpO1xuXG5cdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdTZWFyY2hRdWVyeSAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAtbXFsPVwiU0VMRUNUIGByb3V0ZXJfdXNlcmAuYGlkYCwgYHJvdXRlcl9yb2xlYC5gcm9sZWAgV0hFUkUgYHJvdXRlcl91c2VyYC5gQU1JVXNlcmAgTElLRSBcXCclJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoYW1pV2ViQXBwLnRleHRUb1NRTChmaWx0ZXIpKSArICclXFwnXCInKS5kb25lKChkYXRhMikgPT4ge1xuXG5cdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1NlYXJjaFF1ZXJ5IC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfdXNlclwiIC1tcWw9XCJTRUxFQ1QgYGlkYCwgYEFNSVVzZXJgLCBgY2xpZW50RE5gLCBgaXNzdWVyRE5gLCBgZmlyc3ROYW1lYCwgYGxhc3ROYW1lYCwgYGVtYWlsYCwgYHZhbGlkYCBXSEVSRSBgQU1JVXNlcmAgTElLRSBcXCclJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoYW1pV2ViQXBwLnRleHRUb1NRTChmaWx0ZXIpKSArICclXFwnIE9SREVSIEJZIGBBTUlVc2VyYCBMSU1JVCA1MFwiJykuZG9uZSgoZGF0YTEpID0+IHtcblxuXHRcdFx0XHRjb25zdCByb3dzMSA9IGFtaVdlYkFwcC5qc3BhdGgoJy4ucm93c2V0LnJvdycsIGRhdGExKTtcblx0XHRcdFx0Y29uc3Qgcm93czIgPSBhbWlXZWJBcHAuanNwYXRoKCcuLnJvd3NldC5yb3cnLCBkYXRhMik7XG5cblx0XHRcdFx0Y29uc3QgaWRzID0gW107XG5cblx0XHRcdFx0Y29uc3QgdXNlcnMgPSB7fTtcblxuXHRcdFx0XHRyb3dzMS5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuXG5cdFx0XHRcdFx0Y29uc3QgaWQgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiaWRcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgQU1JVXNlciA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJBTUlVc2VyXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGNsaWVudEROID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImNsaWVudEROXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGlzc3VlckROID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImlzc3VlckROXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGZpcnN0bmFtZSA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJmaXJzdE5hbWVcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgbGFzdG5hbWUgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwibGFzdE5hbWVcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgZW1haWwgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiZW1haWxcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgdmFsaWQgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwidmFsaWRcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cblx0XHRcdFx0XHRpZHMucHVzaChpZCk7XG5cblx0XHRcdFx0XHR1c2Vyc1tpZF0gPSB7XG5cdFx0XHRcdFx0XHRBTUlVc2VyOiBBTUlVc2VyLFxuXHRcdFx0XHRcdFx0Y2xpZW50RE46IGNsaWVudEROLFxuXHRcdFx0XHRcdFx0aXNzdWVyRE46IGlzc3VlckROLFxuXHRcdFx0XHRcdFx0Zmlyc3RuYW1lOiBmaXJzdG5hbWUsXG5cdFx0XHRcdFx0XHRsYXN0bmFtZTogbGFzdG5hbWUsXG5cdFx0XHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdFx0XHR2YWxpZDogdmFsaWQsXG5cdFx0XHRcdFx0XHRyb2xlczogW10sXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0cm93czIuZm9yRWFjaChmdW5jdGlvbihyb3cpIHtcblxuXHRcdFx0XHRcdGNvbnN0IGlkID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImlkXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IHJvbGUgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwic2VsZi5yb3V0ZXJfcm9sZS5yb2xlXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXG5cdFx0XHRcdFx0aWYoaWQgaW4gdXNlcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dXNlcnNbaWRdLnJvbGVzLnB1c2gocm9sZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRjb25zdCBkaWN0ID0ge1xuXHRcdFx0XHRcdGlkczogaWRzLFxuXHRcdFx0XHRcdHVzZXJzOiB1c2Vycyxcblx0XHRcdFx0XHRyb2xlczogdGhpcy5yb2xlcyxcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRhbWlXZWJBcHAucmVwbGFjZUhUTUwoJyNGQ0JENkRGQ18yMDYxXzhDQzNfNjUyQ183NzY3MUExNzlBQUMnLCB0aGlzLmZyYWdtZW50VGFibGUsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRjb25zdCBlbDEgPSAkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIFtkYXRhLWNoYW5nZS12YWxpZF0nKTtcblxuXHRcdFx0XHRcdGNvbnN0IGVsMiA9ICQoJyNGQ0JENkRGQ18yMDYxXzhDQzNfNjUyQ183NzY3MUExNzlBQUMgW2RhdGEtZGVsZXRlLXVzZXJdJyk7XG5cblx0XHRcdFx0XHRjb25zdCBlbDMgPSAkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIFtkYXRhLWNoYW5nZS1yb2xlXScpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZWw0ID0gJCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyBbZGF0YS1jaGFuZ2UtY2xpZW50LWRuJyk7XG5cblx0XHRcdFx0XHRjb25zdCBlbDUgPSAkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIFtkYXRhLWNoYW5nZS1pc3N1ZXItZG4nKTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsMy5zZWxlY3QyKHtcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IGEgcm9sZScsXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDEuY2hhbmdlKChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnVXBkYXRlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLXNlcGFyYXRvcj1cInxcIiAtZmllbGRzPVwidmFsaWRcIiAtdmFsdWVzPVwiJyArICgkKGUuY3VycmVudFRhcmdldCkucHJvcCgnY2hlY2tlZCcpID8gMSA6IDApICsgJ1wiIC1rZXlGaWVsZHM9XCJpZFwiIC1rZXlWYWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2UtdmFsaWQnKSkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwyLmNsaWNrKChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdFx0aWYoIWNvbmZpcm0oJ1BsZWFzZSBjb25maXJtLi4uJykpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdFx0XHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdSZW1vdmVFbGVtZW50cyAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAta2V5RmllbGRzPVwiaWRcIiAta2V5VmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtZGVsZXRlLXVzZXInKSkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHQkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIHRyW2RhdGEtaWQ9XCInICsgJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtZGVsZXRlLXVzZXInKSArICdcIl0nKS5yZW1vdmUoKTtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwzLm9uKCdzZWxlY3QyOnNlbGVjdCcsIChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnQWRkVXNlclJvbGUgLXVzZXI9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2Utcm9sZScpKSArICdcIiAtcm9sZT1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGUucGFyYW1zLmRhdGEudGV4dCkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwzLm9uKCdzZWxlY3QyOnVuc2VsZWN0JywgKGUpID0+IHtcblxuXHRcdFx0XHRcdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdFx0XHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdSZW1vdmVVc2VyUm9sZSAtdXNlcj1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWNoYW5nZS1yb2xlJykpICsgJ1wiIC1yb2xlPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoZS5wYXJhbXMuZGF0YS50ZXh0KSArICdcIicpLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC51bmxvY2soKTtcblxuXHRcdFx0XHRcdFx0fSkuZmFpbChmdW5jdGlvbihkYXRhLCBtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDQub24oJ2NsaWNrJywgKGUpID0+IHtcblxuXHRcdFx0XHRcdFx0Y29uc3QgY2xpZW50RE4gPSBwcm9tcHQoJ05ldyBjbGllbnQgRE4nLCAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnLnZhbHVlJykudGV4dCgpKTtcblxuXHRcdFx0XHRcdFx0aWYoY2xpZW50RE4pXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdVcGRhdGVFbGVtZW50cyAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAtc2VwYXJhdG9yPVwifFwiIC1maWVsZHM9XCJjbGllbnRETlwiIC12YWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhjbGllbnRETikgKyAnXCIgLWtleUZpZWxkcz1cImlkXCIgLWtleVZhbHVlcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWNoYW5nZS1jbGllbnQtZG4nKSkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRcdCQodGhpcykuZmluZCgnLnZhbHVlJykudGV4dChjbGllbnRETik7XG5cblx0XHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdFx0fSkuZmFpbChmdW5jdGlvbihkYXRhLCBtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWw1Lm9uKCdjbGljaycsIChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGlzc3VlckROID0gcHJvbXB0KCdOZXcgaXNzdWVyIEROJywgJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJy52YWx1ZScpLnRleHQoKSk7XG5cblx0XHRcdFx0XHRcdGlmKGlzc3VlckROKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnVXBkYXRlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLXNlcGFyYXRvcj1cInxcIiAtZmllbGRzPVwiaXNzdWVyRE5cIiAtdmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoaXNzdWVyRE4pICsgJ1wiIC1rZXlGaWVsZHM9XCJpZFwiIC1rZXlWYWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2UtaXNzdWVyLWRuJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy52YWx1ZScpLnRleHQoaXNzdWVyRE4pO1xuXG5cdFx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdH0pLmZhaWwoKGRhdGEsIG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0fSk7XG5cblx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHR9KTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuIl19
