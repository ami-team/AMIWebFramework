/*!
 * AMI Twig Engine
 *
 * Copyright (c) 2014-2019 The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global adminDashboardApp
 *
 */$AMIClass("AdminDashboardUsers",{_init:function _init(){var _this=this;var result=$.Deferred();amiWebApp.loadResources(["subapps/AdminDashboard/twig/users/users.twig","subapps/AdminDashboard/twig/users/table.twig"]).done(function(data){amiWebApp.replaceHTML("#CB6036B7_5971_41C2_1194_F5A051B21EA0",data[0]).done(function(){_this.fragmentTable=data[1];$("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").keypress(function(e){if(e.keyCode==13){adminDashboardApp.subsubapp.find($("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val())}});$("#CD24BC02_C39F_AE0C_A83F_85B6458421B6").click(function(){adminDashboardApp.subsubapp.find($("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val())});result.resolve()})}).fail(function(e){result.reject(e)});return result},onLogin:function onLogin(){var _this2=this;return amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_role\" -mql=\"SELECT `router_role`.`role`\"").done(function(data){_this2.roles=amiWebApp.jspath("..field{.@name===\"role\"}.$",data);if("filter"in amiWebApp.args){$("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val(amiWebApp.args["filter"]);adminDashboardApp.subsubapp.find(amiWebApp.args["filter"])}}).fail(function(data,message){amiWebApp.error(message,true)})},find:function find(filter){var _this3=this;amiWebApp.lock();filter=filter.trim();amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_user\" -mql=\"SELECT `router_user`.`id`, `router_role`.`role` WHERE `router_user`.`AMIUser` LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%'\"").done(function(data2){amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_user\" -mql=\"SELECT `id`, `AMIUser`, `clientDN`, `issuerDN`, `firstName`, `lastName`, `email`, `valid` WHERE `AMIUser` LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' ORDER BY `AMIUser`\"").done(function(data1){var rows1=amiWebApp.jspath("..rowset.row",data1);var rows2=amiWebApp.jspath("..rowset.row",data2);var ids=[];var users={};rows1.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var AMIUser=amiWebApp.jspath("..field{.@name===\"AMIUser\"}.$",row)[0]||"";var clientDN=amiWebApp.jspath("..field{.@name===\"clientDN\"}.$",row)[0]||"";var issuerDN=amiWebApp.jspath("..field{.@name===\"issuerDN\"}.$",row)[0]||"";var firstname=amiWebApp.jspath("..field{.@name===\"firstName\"}.$",row)[0]||"";var lastname=amiWebApp.jspath("..field{.@name===\"lastName\"}.$",row)[0]||"";var email=amiWebApp.jspath("..field{.@name===\"email\"}.$",row)[0]||"";var valid=amiWebApp.jspath("..field{.@name===\"valid\"}.$",row)[0]||"";ids.push(id);users[id]={AMIUser:AMIUser,clientDN:clientDN,issuerDN:issuerDN,firstname:firstname,lastname:lastname,email:email,valid:valid,roles:[]}});rows2.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var role=amiWebApp.jspath("..field{.@name===\"self.router_role.role\"}.$",row)[0]||"";users[id].roles.push(role)});var dict={ids:ids,users:users,roles:_this3.roles};amiWebApp.replaceHTML("#FCBD6DFC_2061_8CC3_652C_77671A179AAC",_this3.fragmentTable,{dict:dict}).done(function(){var el1=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-valid]");var el2=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-delete-user]");var el3=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-role]");var el4=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-client-dn");var el5=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-issuer-dn");el3.select2({placeholder:"Select a role"});el1.change(function(e){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"valid\" -values=\""+($(e.currentTarget).prop("checked")?1:0)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-valid"))+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el2.click(function(e){e.preventDefault();if(!confirm("Please confirm...")){return}amiWebApp.lock();amiCommand.execute("RemoveElements -catalog=\"self\" -entity=\"router_user\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-delete-user"))+"\"").done(function(){$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC tr[data-id=\""+$(e.currentTarget).attr("data-delete-user")+"\"]").remove();amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.on("select2:select",function(e){amiWebApp.lock();amiCommand.execute("AddUserRole -user=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.on("select2:unselect",function(e){amiWebApp.lock();amiCommand.execute("RemoveUserRole -user=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el4.on("click",function(e){var clientDN=prompt("New client DN",$(e.currentTarget).find(".value").text());if(clientDN){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"clientDN\" -values=\""+amiWebApp.textToString(clientDN)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-client-dn"))+"\"").done(function(){$(_this3).find(".value").text(clientDN);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});el5.on("click",function(e){var issuerDN=prompt("New issuer DN",$(e.currentTarget).find(".value").text());if(issuerDN){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"issuerDN\" -values=\""+amiWebApp.textToString(issuerDN)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-issuer-dn"))+"\"").done(function(){$(_this3).find(".value").text(issuerDN);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});amiWebApp.unlock()})}).fail(function(data,message){amiWebApp.error(message,true)})}).fail(function(data,message){amiWebApp.error(message,true)})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl91c2Vycy5lczYuanMiXSwibmFtZXMiOlsiJEFNSUNsYXNzIiwiX2luaXQiLCJyZXN1bHQiLCIkIiwiRGVmZXJyZWQiLCJhbWlXZWJBcHAiLCJsb2FkUmVzb3VyY2VzIiwiZG9uZSIsImRhdGEiLCJyZXBsYWNlSFRNTCIsImZyYWdtZW50VGFibGUiLCJrZXlwcmVzcyIsImUiLCJrZXlDb2RlIiwiYWRtaW5EYXNoYm9hcmRBcHAiLCJzdWJzdWJhcHAiLCJmaW5kIiwidmFsIiwiY2xpY2siLCJyZXNvbHZlIiwiZmFpbCIsInJlamVjdCIsIm9uTG9naW4iLCJhbWlDb21tYW5kIiwiZXhlY3V0ZSIsInJvbGVzIiwianNwYXRoIiwiYXJncyIsIm1lc3NhZ2UiLCJlcnJvciIsImZpbHRlciIsImxvY2siLCJ0cmltIiwidGV4dFRvU3RyaW5nIiwidGV4dFRvU1FMIiwiZGF0YTIiLCJkYXRhMSIsInJvd3MxIiwicm93czIiLCJpZHMiLCJ1c2VycyIsImZvckVhY2giLCJyb3ciLCJpZCIsIkFNSVVzZXIiLCJjbGllbnRETiIsImlzc3VlckROIiwiZmlyc3RuYW1lIiwibGFzdG5hbWUiLCJlbWFpbCIsInZhbGlkIiwicHVzaCIsInJvbGUiLCJkaWN0IiwiZWwxIiwiZWwyIiwiZWwzIiwiZWw0IiwiZWw1Iiwic2VsZWN0MiIsInBsYWNlaG9sZGVyIiwiY2hhbmdlIiwiY3VycmVudFRhcmdldCIsInByb3AiLCJhdHRyIiwidW5sb2NrIiwicHJldmVudERlZmF1bHQiLCJjb25maXJtIiwicmVtb3ZlIiwib24iLCJwYXJhbXMiLCJ0ZXh0IiwicHJvbXB0Il0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7R0FpQkFBLFNBQVMsQ0FBQyxxQkFBRCxDQUF3QixDQUdoQ0MsS0FBSyxDQUFFLGdCQUNQLGdCQUNDLEdBQU1DLENBQUFBLE1BQU0sQ0FBR0MsQ0FBQyxDQUFDQyxRQUFGLEVBQWYsQ0FFQUMsU0FBUyxDQUFDQyxhQUFWLENBQXdCLENBQ3ZCLDhDQUR1QixDQUV2Qiw4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QXpCLENBQ0EsQ0FURCxDQVVBLENBQ0QsQ0FuQkQsRUF1QkF2QixTQUFTLENBQUM0RCxNQUFWLEVBR0EsQ0E5SUQsQ0FnSkEsQ0FoTUQsRUFnTUc3QyxJQWhNSCxDQWdNUSxTQUFDWixJQUFELENBQU9vQixPQUFQLENBQW1CLENBRTFCdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQW5NRCxDQXFNQSxDQXZNRCxFQXVNR1IsSUF2TUgsQ0F1TVEsU0FBQ1osSUFBRCxDQUFPb0IsT0FBUCxDQUFtQixDQUUxQnZCLFNBQVMsQ0FBQ3dCLEtBQVYsQ0FBZ0JELE9BQWhCLENBQXlCLElBQXpCLENBQ0EsQ0ExTUQsQ0EyTUEsQ0FwUitCLENBQXhCLENBQVQiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFNSSBUd2lnIEVuZ2luZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE5IFRoZSBBTUkgVGVhbSAvIExQU0MgLyBJTjJQM1xuICpcbiAqIFRoaXMgZmlsZSBtdXN0IGJlIHVzZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBDZUNJTEwtQzpcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1lbi5odG1sXG4gKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZnIuaHRtbFxuICpcbiAqIEBnbG9iYWwgYWRtaW5EYXNoYm9hcmRBcHBcbiAqXG4gKi9cblxuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG4vKiBBZG1pbkRhc2hib2FyZFVzZXJzICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKi9cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4kQU1JQ2xhc3MoJ0FkbWluRGFzaGJvYXJkVXNlcnMnLCB7XG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0X2luaXQ6IGZ1bmN0aW9uKClcblx0e1xuXHRcdGNvbnN0IHJlc3VsdCA9ICQuRGVmZXJyZWQoKTtcblxuXHRcdGFtaVdlYkFwcC5sb2FkUmVzb3VyY2VzKFtcblx0XHRcdCdzdWJhcHBzL0FkbWluRGFzaGJvYXJkL3R3aWcvdXNlcnMvdXNlcnMudHdpZycsXG5cdFx0XHQnc3ViYXBwcy9BZG1pbkRhc2hib2FyZC90d2lnL3VzZXJzL3RhYmxlLnR3aWcnLFxuXHRcdF0pLmRvbmUoKGRhdGEpID0+IHtcblxuXHRcdFx0YW1pV2ViQXBwLnJlcGxhY2VIVE1MKCcjQ0I2MDM2QjdfNTk3MV80MUMyXzExOTRfRjVBMDUxQjIxRUEwJywgZGF0YVswXSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0dGhpcy5mcmFnbWVudFRhYmxlID0gZGF0YVsxXTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdCQoJyNBQjAwNjFEQV82OTFEXzgwQTVfQzJDMF8yMjg2QUJCNDg0NUQnKS5rZXlwcmVzcyhmdW5jdGlvbihlKSB7XG5cblx0XHRcdFx0XHRpZihlLmtleUNvZGUgPT0gMTMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0YWRtaW5EYXNoYm9hcmRBcHAuc3Vic3ViYXBwLmZpbmQoJCgnI0FCMDA2MURBXzY5MURfODBBNV9DMkMwXzIyODZBQkI0ODQ1RCcpLnZhbCgpKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdCQoJyNDRDI0QkMwMl9DMzlGX0FFMENfQTgzRl84NUI2NDU4NDIxQjYnKS5jbGljaygoKSA9PiB7XG5cblx0XHRcdFx0XHRhZG1pbkRhc2hib2FyZEFwcC5zdWJzdWJhcHAuZmluZCgkKCcjQUIwMDYxREFfNjkxRF84MEE1X0MyQzBfMjI4NkFCQjQ4NDVEJykudmFsKCkpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdHJlc3VsdC5yZXNvbHZlKCk7XG5cdFx0XHR9KTtcblxuXHRcdH0pLmZhaWwoKGUpID0+IHtcblxuXHRcdFx0cmVzdWx0LnJlamVjdChlKTtcblx0XHR9KTtcblxuXHRcdHJldHVybiByZXN1bHQ7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRvbkxvZ2luOiBmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gYW1pQ29tbWFuZC5leGVjdXRlKCdTZWFyY2hRdWVyeSAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3JvbGVcIiAtbXFsPVwiU0VMRUNUIGByb3V0ZXJfcm9sZWAuYHJvbGVgXCInKS5kb25lKChkYXRhKSA9PiB7XG5cblx0XHRcdHRoaXMucm9sZXMgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwicm9sZVwifS4kJywgZGF0YSk7XG5cblx0XHRcdGlmKCdmaWx0ZXInIGluIGFtaVdlYkFwcC5hcmdzKVxuXHRcdFx0e1xuXHRcdFx0XHQkKCcjQUIwMDYxREFfNjkxRF84MEE1X0MyQzBfMjI4NkFCQjQ4NDVEJykudmFsKGFtaVdlYkFwcC5hcmdzWydmaWx0ZXInXSk7XG5cblx0XHRcdFx0YWRtaW5EYXNoYm9hcmRBcHAuc3Vic3ViYXBwLmZpbmQoYW1pV2ViQXBwLmFyZ3NbJ2ZpbHRlciddKTtcblx0XHRcdH1cblxuXHRcdH0pLmZhaWwoKGRhdGEsIG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdH0pO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0ZmluZDogZnVuY3Rpb24oZmlsdGVyKVxuXHR7XG5cdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdGZpbHRlciA9IGZpbHRlci50cmltKCk7XG5cblx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1NlYXJjaFF1ZXJ5IC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfdXNlclwiIC1tcWw9XCJTRUxFQ1QgYHJvdXRlcl91c2VyYC5gaWRgLCBgcm91dGVyX3JvbGVgLmByb2xlYCBXSEVSRSBgcm91dGVyX3VzZXJgLmBBTUlVc2VyYCBMSUtFIFxcJyUnICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhhbWlXZWJBcHAudGV4dFRvU1FMKGZpbHRlcikpICsgJyVcXCdcIicpLmRvbmUoKGRhdGEyKSA9PiB7XG5cblx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnU2VhcmNoUXVlcnkgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLW1xbD1cIlNFTEVDVCBgaWRgLCBgQU1JVXNlcmAsIGBjbGllbnRETmAsIGBpc3N1ZXJETmAsIGBmaXJzdE5hbWVgLCBgbGFzdE5hbWVgLCBgZW1haWxgLCBgdmFsaWRgIFdIRVJFIGBBTUlVc2VyYCBMSUtFIFxcJyUnICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhhbWlXZWJBcHAudGV4dFRvU1FMKGZpbHRlcikpICsgJyVcXCcgT1JERVIgQlkgYEFNSVVzZXJgXCInKS5kb25lKChkYXRhMSkgPT4ge1xuXG5cdFx0XHRcdGNvbnN0IHJvd3MxID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5yb3dzZXQucm93JywgZGF0YTEpO1xuXHRcdFx0XHRjb25zdCByb3dzMiA9IGFtaVdlYkFwcC5qc3BhdGgoJy4ucm93c2V0LnJvdycsIGRhdGEyKTtcblxuXHRcdFx0XHRjb25zdCBpZHMgPSBbXTtcblxuXHRcdFx0XHRjb25zdCB1c2VycyA9IHt9O1xuXG5cdFx0XHRcdHJvd3MxLmZvckVhY2goZnVuY3Rpb24ocm93KSB7XG5cblx0XHRcdFx0XHRjb25zdCBpZCA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJpZFwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCBBTUlVc2VyID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cIkFNSVVzZXJcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgY2xpZW50RE4gPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiY2xpZW50RE5cIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgaXNzdWVyRE4gPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiaXNzdWVyRE5cIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgZmlyc3RuYW1lID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImZpcnN0TmFtZVwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCBsYXN0bmFtZSA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJsYXN0TmFtZVwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCBlbWFpbCA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJlbWFpbFwifS4kJywgcm93KVswXSB8fCAnJztcblx0XHRcdFx0XHRjb25zdCB2YWxpZCA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJ2YWxpZFwifS4kJywgcm93KVswXSB8fCAnJztcblxuXHRcdFx0XHRcdGlkcy5wdXNoKGlkKTtcblxuXHRcdFx0XHRcdHVzZXJzW2lkXSA9IHtcblx0XHRcdFx0XHRcdEFNSVVzZXI6IEFNSVVzZXIsXG5cdFx0XHRcdFx0XHRjbGllbnRETjogY2xpZW50RE4sXG5cdFx0XHRcdFx0XHRpc3N1ZXJETjogaXNzdWVyRE4sXG5cdFx0XHRcdFx0XHRmaXJzdG5hbWU6IGZpcnN0bmFtZSxcblx0XHRcdFx0XHRcdGxhc3RuYW1lOiBsYXN0bmFtZSxcblx0XHRcdFx0XHRcdGVtYWlsOiBlbWFpbCxcblx0XHRcdFx0XHRcdHZhbGlkOiB2YWxpZCxcblx0XHRcdFx0XHRcdHJvbGVzOiBbXSxcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRyb3dzMi5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuXG5cdFx0XHRcdFx0Y29uc3QgaWQgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiaWRcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3Qgcm9sZSA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJzZWxmLnJvdXRlcl9yb2xlLnJvbGVcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cblx0XHRcdFx0XHR1c2Vyc1tpZF0ucm9sZXMucHVzaChyb2xlKTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Y29uc3QgZGljdCA9IHtcblx0XHRcdFx0XHRpZHM6IGlkcyxcblx0XHRcdFx0XHR1c2VyczogdXNlcnMsXG5cdFx0XHRcdFx0cm9sZXM6IHRoaXMucm9sZXMsXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0YW1pV2ViQXBwLnJlcGxhY2VIVE1MKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDJywgdGhpcy5mcmFnbWVudFRhYmxlLCB7ZGljdDogZGljdH0pLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0Y29uc3QgZWwxID0gJCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyBbZGF0YS1jaGFuZ2UtdmFsaWRdJyk7XG5cblx0XHRcdFx0XHRjb25zdCBlbDIgPSAkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIFtkYXRhLWRlbGV0ZS11c2VyXScpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZWwzID0gJCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyBbZGF0YS1jaGFuZ2Utcm9sZV0nKTtcblxuXHRcdFx0XHRcdGNvbnN0IGVsNCA9ICQoJyNGQ0JENkRGQ18yMDYxXzhDQzNfNjUyQ183NzY3MUExNzlBQUMgW2RhdGEtY2hhbmdlLWNsaWVudC1kbicpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZWw1ID0gJCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyBbZGF0YS1jaGFuZ2UtaXNzdWVyLWRuJyk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDMuc2VsZWN0Mih7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlcjogJ1NlbGVjdCBhIHJvbGUnLFxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwxLmNoYW5nZSgoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1VwZGF0ZUVsZW1lbnRzIC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfdXNlclwiIC1zZXBhcmF0b3I9XCJ8XCIgLWZpZWxkcz1cInZhbGlkXCIgLXZhbHVlcz1cIicgKyAoJChlLmN1cnJlbnRUYXJnZXQpLnByb3AoJ2NoZWNrZWQnKSA/IDEgOiAwKSArICdcIiAta2V5RmllbGRzPVwiaWRcIiAta2V5VmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLXZhbGlkJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHR9KS5mYWlsKGZ1bmN0aW9uKGRhdGEsIG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsMi5jbGljaygoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cblx0XHRcdFx0XHRcdGlmKCFjb25maXJtKCdQbGVhc2UgY29uZmlybS4uLicpKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnUmVtb3ZlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLWtleUZpZWxkcz1cImlkXCIgLWtleVZhbHVlcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWRlbGV0ZS11c2VyJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0JCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyB0cltkYXRhLWlkPVwiJyArICQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWRlbGV0ZS11c2VyJykgKyAnXCJdJykucmVtb3ZlKCk7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHR9KS5mYWlsKGZ1bmN0aW9uKGRhdGEsIG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsMy5vbignc2VsZWN0MjpzZWxlY3QnLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ0FkZFVzZXJSb2xlIC11c2VyPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLXJvbGUnKSkgKyAnXCIgLXJvbGU9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhlLnBhcmFtcy5kYXRhLnRleHQpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHR9KS5mYWlsKGZ1bmN0aW9uKGRhdGEsIG1lc3NhZ2UpIHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsMy5vbignc2VsZWN0Mjp1bnNlbGVjdCcsIChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnUmVtb3ZlVXNlclJvbGUgLXVzZXI9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2Utcm9sZScpKSArICdcIiAtcm9sZT1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGUucGFyYW1zLmRhdGEudGV4dCkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWw0Lm9uKCdjbGljaycsIChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGNsaWVudEROID0gcHJvbXB0KCdOZXcgY2xpZW50IEROJywgJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJy52YWx1ZScpLnRleHQoKSk7XG5cblx0XHRcdFx0XHRcdGlmKGNsaWVudEROKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnVXBkYXRlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLXNlcGFyYXRvcj1cInxcIiAtZmllbGRzPVwiY2xpZW50RE5cIiAtdmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoY2xpZW50RE4pICsgJ1wiIC1rZXlGaWVsZHM9XCJpZFwiIC1rZXlWYWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2UtY2xpZW50LWRuJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy52YWx1ZScpLnRleHQoY2xpZW50RE4pO1xuXG5cdFx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsNS5vbignY2xpY2snLCAoZSkgPT4ge1xuXG5cdFx0XHRcdFx0XHRjb25zdCBpc3N1ZXJETiA9IHByb21wdCgnTmV3IGlzc3VlciBETicsICQoZS5jdXJyZW50VGFyZ2V0KS5maW5kKCcudmFsdWUnKS50ZXh0KCkpO1xuXG5cdFx0XHRcdFx0XHRpZihpc3N1ZXJETilcblx0XHRcdFx0XHRcdHtcblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdFx0XHRcdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ1VwZGF0ZUVsZW1lbnRzIC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfdXNlclwiIC1zZXBhcmF0b3I9XCJ8XCIgLWZpZWxkcz1cImlzc3VlckROXCIgLXZhbHVlcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGlzc3VlckROKSArICdcIiAta2V5RmllbGRzPVwiaWRcIiAta2V5VmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtY2hhbmdlLWlzc3Vlci1kbicpKSArICdcIicpLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0XHRcdFx0JCh0aGlzKS5maW5kKCcudmFsdWUnKS50ZXh0KGlzc3VlckROKTtcblxuXHRcdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC51bmxvY2soKTtcblxuXHRcdFx0XHRcdFx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdH0pO1xuXG5cdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbn0pO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiJdfQ==
