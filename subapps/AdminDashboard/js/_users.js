/*!
 * AMI Twig Engine
 *
 * Copyright (c) 2014-2019 The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global adminDashboardApp
 *
 */$AMIClass("AdminDashboardUsers",{_init:function _init(){var _this=this;var result=$.Deferred();amiWebApp.loadResources(["subapps/AdminDashboard/twig/users/users.twig","subapps/AdminDashboard/twig/users/table.twig"]).done(function(data){amiWebApp.replaceHTML("#CB6036B7_5971_41C2_1194_F5A051B21EA0",data[0]).done(function(){_this.fragmentTable=data[1];$("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").keypress(function(e){if(e.keyCode==13){adminDashboardApp.subsubapp.find($("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val())}});$("#CD24BC02_C39F_AE0C_A83F_85B6458421B6").click(function(){adminDashboardApp.subsubapp.find($("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val())});result.resolve()})}).fail(function(e){result.reject(e)});return result},onLogin:function onLogin(){var _this2=this;return amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_role\" -mql=\"SELECT `router_role`.`role`\"").done(function(data){_this2.roles=amiWebApp.jspath("..field{.@name===\"role\"}.$",data);if("filter"in amiWebApp.args){$("#AB0061DA_691D_80A5_C2C0_2286ABB4845D").val(amiWebApp.args["filter"]);adminDashboardApp.subsubapp.find(amiWebApp.args["filter"])}}).fail(function(data,message){amiWebApp.error(message,true)})},find:function find(filter){var _this3=this;amiWebApp.lock();filter=filter.trim().toLowerCase();amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_user\" -mql=\"SELECT `router_user`.`id`, `router_role`.`role` WHERE LOWER(`router_user`.`AMIUser`) LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' OR LOWER(`router_user`.`email`) LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%'\"").done(function(data2){amiCommand.execute("SearchQuery -catalog=\"self\" -entity=\"router_user\" -mql=\"SELECT `id`, `AMIUser`, `clientDN`, `issuerDN`, `firstName`, `lastName`, `email`, `valid` WHERE LOWER(`AMIUser`) LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' OR LOWER(`email`) LIKE '%"+amiWebApp.textToString(amiWebApp.textToSQL(filter))+"%' ORDER BY `AMIUser` LIMIT 50\"").done(function(data1){var rows1=amiWebApp.jspath("..rowset.row",data1);var rows2=amiWebApp.jspath("..rowset.row",data2);var ids=[];var users={};rows1.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var AMIUser=amiWebApp.jspath("..field{.@name===\"AMIUser\"}.$",row)[0]||"";var clientDN=amiWebApp.jspath("..field{.@name===\"clientDN\"}.$",row)[0]||"";var issuerDN=amiWebApp.jspath("..field{.@name===\"issuerDN\"}.$",row)[0]||"";var firstname=amiWebApp.jspath("..field{.@name===\"firstName\"}.$",row)[0]||"";var lastname=amiWebApp.jspath("..field{.@name===\"lastName\"}.$",row)[0]||"";var email=amiWebApp.jspath("..field{.@name===\"email\"}.$",row)[0]||"";var valid=amiWebApp.jspath("..field{.@name===\"valid\"}.$",row)[0]||"";ids.push(id);users[id]={AMIUser:AMIUser,clientDN:clientDN,issuerDN:issuerDN,firstname:firstname,lastname:lastname,email:email,valid:valid,roles:[]}});rows2.forEach(function(row){var id=amiWebApp.jspath("..field{.@name===\"id\"}.$",row)[0]||"";var role=amiWebApp.jspath("..field{.@name===\"self.router_role.role\"}.$",row)[0]||"";if(id in users){users[id].roles.push(role)}});var dict={ids:ids,users:users,roles:_this3.roles};amiWebApp.replaceHTML("#FCBD6DFC_2061_8CC3_652C_77671A179AAC",_this3.fragmentTable,{dict:dict}).done(function(){var el1=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-valid]");var el2=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-delete-user]");var el3=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-role]");var el4=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-client-dn");var el5=$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC [data-change-issuer-dn");el3.select2({placeholder:"Select a role"});el1.change(function(e){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"valid\" -values=\""+($(e.currentTarget).prop("checked")?1:0)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-valid"))+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el2.click(function(e){e.preventDefault();if(!confirm("Please confirm...")){return}amiWebApp.lock();amiCommand.execute("RemoveElements -catalog=\"self\" -entity=\"router_user\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-delete-user"))+"\"").done(function(){$("#FCBD6DFC_2061_8CC3_652C_77671A179AAC tr[data-id=\""+$(e.currentTarget).attr("data-delete-user")+"\"]").remove();amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.on("select2:select",function(e){amiWebApp.lock();amiCommand.execute("AddUserRole -user=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el3.on("select2:unselect",function(e){amiWebApp.lock();amiCommand.execute("RemoveUserRole -user=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-role"))+"\" -role=\""+amiWebApp.textToString(e.params.data.text)+"\"").done(function(){amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})});el4.on("click",function(e){var clientDN=prompt("New client DN",$(e.currentTarget).find(".value").text());if(clientDN){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"clientDN\" -values=\""+amiWebApp.textToString(clientDN)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-client-dn"))+"\"").done(function(){$(_this3).find(".value").text(clientDN);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});el5.on("click",function(e){var issuerDN=prompt("New issuer DN",$(e.currentTarget).find(".value").text());if(issuerDN){amiWebApp.lock();amiCommand.execute("UpdateElements -catalog=\"self\" -entity=\"router_user\" -separator=\"|\" -fields=\"issuerDN\" -values=\""+amiWebApp.textToString(issuerDN)+"\" -keyFields=\"id\" -keyValues=\""+amiWebApp.textToString($(e.currentTarget).attr("data-change-issuer-dn"))+"\"").done(function(){$(_this3).find(".value").text(issuerDN);amiWebApp.unlock()}).fail(function(data,message){amiWebApp.error(message,true)})}});amiWebApp.unlock()})}).fail(function(data,message){amiWebApp.error(message,true)})}).fail(function(data,message){amiWebApp.error(message,true)})}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIl91c2Vycy5lczYuanMiXSwibmFtZXMiOlsiJEFNSUNsYXNzIiwiX2luaXQiLCJyZXN1bHQiLCIkIiwiRGVmZXJyZWQiLCJhbWlXZWJBcHAiLCJsb2FkUmVzb3VyY2VzIiwiZG9uZSIsImRhdGEiLCJyZXBsYWNlSFRNTCIsImZyYWdtZW50VGFibGUiLCJrZXlwcmVzcyIsImUiLCJrZXlDb2RlIiwiYWRtaW5EYXNoYm9hcmRBcHAiLCJzdWJzdWJhcHAiLCJmaW5kIiwidmFsIiwiY2xpY2siLCJyZXNvbHZlIiwiZmFpbCIsInJlamVjdCIsIm9uTG9naW4iLCJhbWlDb21tYW5kIiwiZXhlY3V0ZSIsInJvbGVzIiwianNwYXRoIiwiYXJncyIsIm1lc3NhZ2UiLCJlcnJvciIsImZpbHRlciIsImxvY2siLCJ0cmltIiwidG9Mb3dlckNhc2UiLCJ0ZXh0VG9TdHJpbmciLCJ0ZXh0VG9TUUwiLCJkYXRhMiIsImRhdGExIiwicm93czEiLCJyb3dzMiIsImlkcyIsInVzZXJzIiwiZm9yRWFjaCIsInJvdyIsImlkIiwiQU1JVXNlciIsImNsaWVudEROIiwiaXNzdWVyRE4iLCJmaXJzdG5hbWUiLCJsYXN0bmFtZSIsImVtYWlsIiwidmFsaWQiLCJwdXNoIiwicm9sZSIsImRpY3QiLCJlbDEiLCJlbDIiLCJlbDMiLCJlbDQiLCJlbDUiLCJzZWxlY3QyIiwicGxhY2Vob2xkZXIiLCJjaGFuZ2UiLCJjdXJyZW50VGFyZ2V0IiwicHJvcCIsImF0dHIiLCJ1bmxvY2siLCJwcmV2ZW50RGVmYXVsdCIsImNvbmZpcm0iLCJyZW1vdmUiLCJvbiIsInBhcmFtcyIsInRleHQiLCJwcm9tcHQiXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztHQWlCQUEsU0FBUyxDQUFDLHFCQUFELENBQXdCLENBR2hDQyxLQUFLLENBQUUsZ0JBQ1AsZ0JBQ0MsR0FBTUMsQ0FBQUEsTUFBTSxDQUFHQyxDQUFDLENBQUNDLFFBQUYsRUFBZixDQUVBQyxTQUFTLENBQUNDLGFBQVYsQ0FBd0IsQ0FDdkIs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Q0FBM0ssQ0FBc1AsSUFBelEsRUFBOFExRCxJQUE5USxDQUFtUixVQUFNLENBRXhSSixDQUFDLENBQUMsTUFBRCxDQUFELENBQVFhLElBQVIsQ0FBYSxRQUFiLEVBQXVCd0QsSUFBdkIsQ0FBNEJ6QixRQUE1QixFQUVBMUMsU0FBUyxDQUFDNkQsTUFBVixFQUVBLENBTkQsRUFNRzlDLElBTkgsQ0FNUSxTQUFDWixJQUFELENBQU9vQixPQUFQLENBQW1CLENBRTFCdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQVRELENBVUEsQ0FDRCxDQW5CRCxFQXVCQXZCLFNBQVMsQ0FBQzZELE1BQVYsRUFHQSxDQTlJRCxDQWdKQSxDQW5NRCxFQW1NRzlDLElBbk1ILENBbU1RLFNBQUNaLElBQUQsQ0FBT29CLE9BQVAsQ0FBbUIsQ0FFMUJ2QixTQUFTLENBQUN3QixLQUFWLENBQWdCRCxPQUFoQixDQUF5QixJQUF6QixDQUNBLENBdE1ELENBd01BLENBMU1ELEVBME1HUixJQTFNSCxDQTBNUSxTQUFDWixJQUFELENBQU9vQixPQUFQLENBQW1CLENBRTFCdkIsU0FBUyxDQUFDd0IsS0FBVixDQUFnQkQsT0FBaEIsQ0FBeUIsSUFBekIsQ0FDQSxDQTdNRCxDQThNQSxDQXZSK0IsQ0FBeEIsQ0FBVCIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogQU1JIFR3aWcgRW5naW5lXG4gKlxuICogQ29weXJpZ2h0IChjKSAyMDE0LTIwMTkgVGhlIEFNSSBUZWFtIC8gTFBTQyAvIElOMlAzXG4gKlxuICogVGhpcyBmaWxlIG11c3QgYmUgdXNlZCB1bmRlciB0aGUgdGVybXMgb2YgdGhlIENlQ0lMTC1DOlxuICogaHR0cDovL3d3dy5jZWNpbGwuaW5mby9saWNlbmNlcy9MaWNlbmNlX0NlQ0lMTC1DX1YxLWVuLmh0bWxcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1mci5odG1sXG4gKlxuICogQGdsb2JhbCBhZG1pbkRhc2hib2FyZEFwcFxuICpcbiAqL1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qIEFkbWluRGFzaGJvYXJkVXNlcnMgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiRBTUlDbGFzcygnQWRtaW5EYXNoYm9hcmRVc2VycycsIHtcblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRfaW5pdDogZnVuY3Rpb24oKVxuXHR7XG5cdFx0Y29uc3QgcmVzdWx0ID0gJC5EZWZlcnJlZCgpO1xuXG5cdFx0YW1pV2ViQXBwLmxvYWRSZXNvdXJjZXMoW1xuXHRcdFx0J3N1YmFwcHMvQWRtaW5EYXNoYm9hcmQvdHdpZy91c2Vycy91c2Vycy50d2lnJyxcblx0XHRcdCdzdWJhcHBzL0FkbWluRGFzaGJvYXJkL3R3aWcvdXNlcnMvdGFibGUudHdpZycsXG5cdFx0XSkuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHRhbWlXZWJBcHAucmVwbGFjZUhUTUwoJyNDQjYwMzZCN181OTcxXzQxQzJfMTE5NF9GNUEwNTFCMjFFQTAnLCBkYXRhWzBdKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHR0aGlzLmZyYWdtZW50VGFibGUgPSBkYXRhWzFdO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0JCgnI0FCMDA2MURBXzY5MURfODBBNV9DMkMwXzIyODZBQkI0ODQ1RCcpLmtleXByZXNzKGZ1bmN0aW9uKGUpIHtcblxuXHRcdFx0XHRcdGlmKGUua2V5Q29kZSA9PSAxMylcblx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRhZG1pbkRhc2hib2FyZEFwcC5zdWJzdWJhcHAuZmluZCgkKCcjQUIwMDYxREFfNjkxRF84MEE1X0MyQzBfMjI4NkFCQjQ4NDVEJykudmFsKCkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0JCgnI0NEMjRCQzAyX0MzOUZfQUUwQ19BODNGXzg1QjY0NTg0MjFCNicpLmNsaWNrKCgpID0+IHtcblxuXHRcdFx0XHRcdGFkbWluRGFzaGJvYXJkQXBwLnN1YnN1YmFwcC5maW5kKCQoJyNBQjAwNjFEQV82OTFEXzgwQTVfQzJDMF8yMjg2QUJCNDg0NUQnKS52YWwoKSk7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0cmVzdWx0LnJlc29sdmUoKTtcblx0XHRcdH0pO1xuXG5cdFx0fSkuZmFpbCgoZSkgPT4ge1xuXG5cdFx0XHRyZXN1bHQucmVqZWN0KGUpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdG9uTG9naW46IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiBhbWlDb21tYW5kLmV4ZWN1dGUoJ1NlYXJjaFF1ZXJ5IC1jYXRhbG9nPVwic2VsZlwiIC1lbnRpdHk9XCJyb3V0ZXJfcm9sZVwiIC1tcWw9XCJTRUxFQ1QgYHJvdXRlcl9yb2xlYC5gcm9sZWBcIicpLmRvbmUoKGRhdGEpID0+IHtcblxuXHRcdFx0dGhpcy5yb2xlcyA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJyb2xlXCJ9LiQnLCBkYXRhKTtcblxuXHRcdFx0aWYoJ2ZpbHRlcicgaW4gYW1pV2ViQXBwLmFyZ3MpXG5cdFx0XHR7XG5cdFx0XHRcdCQoJyNBQjAwNjFEQV82OTFEXzgwQTVfQzJDMF8yMjg2QUJCNDg0NUQnKS52YWwoYW1pV2ViQXBwLmFyZ3NbJ2ZpbHRlciddKTtcblxuXHRcdFx0XHRhZG1pbkRhc2hib2FyZEFwcC5zdWJzdWJhcHAuZmluZChhbWlXZWJBcHAuYXJnc1snZmlsdGVyJ10pO1xuXHRcdFx0fVxuXG5cdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0fSk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRmaW5kOiBmdW5jdGlvbihmaWx0ZXIpXG5cdHtcblx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0ZmlsdGVyID0gZmlsdGVyLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdTZWFyY2hRdWVyeSAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAtbXFsPVwiU0VMRUNUIGByb3V0ZXJfdXNlcmAuYGlkYCwgYHJvdXRlcl9yb2xlYC5gcm9sZWAgV0hFUkUgTE9XRVIoYHJvdXRlcl91c2VyYC5gQU1JVXNlcmApIExJS0UgXFwnJScgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGFtaVdlYkFwcC50ZXh0VG9TUUwoZmlsdGVyKSkgKyAnJVxcJyBPUiBMT1dFUihgcm91dGVyX3VzZXJgLmBlbWFpbGApIExJS0UgXFwnJScgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGFtaVdlYkFwcC50ZXh0VG9TUUwoZmlsdGVyKSkgKyAnJVxcJ1wiJykuZG9uZSgoZGF0YTIpID0+IHtcblxuXHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdTZWFyY2hRdWVyeSAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAtbXFsPVwiU0VMRUNUIGBpZGAsIGBBTUlVc2VyYCwgYGNsaWVudEROYCwgYGlzc3VlckROYCwgYGZpcnN0TmFtZWAsIGBsYXN0TmFtZWAsIGBlbWFpbGAsIGB2YWxpZGAgV0hFUkUgTE9XRVIoYEFNSVVzZXJgKSBMSUtFIFxcJyUnICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhhbWlXZWJBcHAudGV4dFRvU1FMKGZpbHRlcikpICsgJyVcXCcgT1IgTE9XRVIoYGVtYWlsYCkgTElLRSBcXCclJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoYW1pV2ViQXBwLnRleHRUb1NRTChmaWx0ZXIpKSArICclXFwnIE9SREVSIEJZIGBBTUlVc2VyYCBMSU1JVCA1MFwiJykuZG9uZSgoZGF0YTEpID0+IHtcblxuXHRcdFx0XHRjb25zdCByb3dzMSA9IGFtaVdlYkFwcC5qc3BhdGgoJy4ucm93c2V0LnJvdycsIGRhdGExKTtcblx0XHRcdFx0Y29uc3Qgcm93czIgPSBhbWlXZWJBcHAuanNwYXRoKCcuLnJvd3NldC5yb3cnLCBkYXRhMik7XG5cblx0XHRcdFx0Y29uc3QgaWRzID0gW107XG5cblx0XHRcdFx0Y29uc3QgdXNlcnMgPSB7fTtcblxuXHRcdFx0XHRyb3dzMS5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuXG5cdFx0XHRcdFx0Y29uc3QgaWQgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiaWRcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgQU1JVXNlciA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJBTUlVc2VyXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGNsaWVudEROID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImNsaWVudEROXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGlzc3VlckROID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImlzc3VlckROXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IGZpcnN0bmFtZSA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJmaXJzdE5hbWVcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgbGFzdG5hbWUgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwibGFzdE5hbWVcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgZW1haWwgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwiZW1haWxcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdFx0Y29uc3QgdmFsaWQgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwidmFsaWRcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cblx0XHRcdFx0XHRpZHMucHVzaChpZCk7XG5cblx0XHRcdFx0XHR1c2Vyc1tpZF0gPSB7XG5cdFx0XHRcdFx0XHRBTUlVc2VyOiBBTUlVc2VyLFxuXHRcdFx0XHRcdFx0Y2xpZW50RE46IGNsaWVudEROLFxuXHRcdFx0XHRcdFx0aXNzdWVyRE46IGlzc3VlckROLFxuXHRcdFx0XHRcdFx0Zmlyc3RuYW1lOiBmaXJzdG5hbWUsXG5cdFx0XHRcdFx0XHRsYXN0bmFtZTogbGFzdG5hbWUsXG5cdFx0XHRcdFx0XHRlbWFpbDogZW1haWwsXG5cdFx0XHRcdFx0XHR2YWxpZDogdmFsaWQsXG5cdFx0XHRcdFx0XHRyb2xlczogW10sXG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0cm93czIuZm9yRWFjaChmdW5jdGlvbihyb3cpIHtcblxuXHRcdFx0XHRcdGNvbnN0IGlkID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImlkXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRcdGNvbnN0IHJvbGUgPSBhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwic2VsZi5yb3V0ZXJfcm9sZS5yb2xlXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXG5cdFx0XHRcdFx0aWYoaWQgaW4gdXNlcnMpXG5cdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0dXNlcnNbaWRdLnJvbGVzLnB1c2gocm9sZSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRjb25zdCBkaWN0ID0ge1xuXHRcdFx0XHRcdGlkczogaWRzLFxuXHRcdFx0XHRcdHVzZXJzOiB1c2Vycyxcblx0XHRcdFx0XHRyb2xlczogdGhpcy5yb2xlcyxcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRhbWlXZWJBcHAucmVwbGFjZUhUTUwoJyNGQ0JENkRGQ18yMDYxXzhDQzNfNjUyQ183NzY3MUExNzlBQUMnLCB0aGlzLmZyYWdtZW50VGFibGUsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRjb25zdCBlbDEgPSAkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIFtkYXRhLWNoYW5nZS12YWxpZF0nKTtcblxuXHRcdFx0XHRcdGNvbnN0IGVsMiA9ICQoJyNGQ0JENkRGQ18yMDYxXzhDQzNfNjUyQ183NzY3MUExNzlBQUMgW2RhdGEtZGVsZXRlLXVzZXJdJyk7XG5cblx0XHRcdFx0XHRjb25zdCBlbDMgPSAkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIFtkYXRhLWNoYW5nZS1yb2xlXScpO1xuXG5cdFx0XHRcdFx0Y29uc3QgZWw0ID0gJCgnI0ZDQkQ2REZDXzIwNjFfOENDM182NTJDXzc3NjcxQTE3OUFBQyBbZGF0YS1jaGFuZ2UtY2xpZW50LWRuJyk7XG5cblx0XHRcdFx0XHRjb25zdCBlbDUgPSAkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIFtkYXRhLWNoYW5nZS1pc3N1ZXItZG4nKTtcblxuXHRcdFx0XHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdFx0XHRcdGVsMy5zZWxlY3QyKHtcblx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyOiAnU2VsZWN0IGEgcm9sZScsXG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDEuY2hhbmdlKChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnVXBkYXRlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLXNlcGFyYXRvcj1cInxcIiAtZmllbGRzPVwidmFsaWRcIiAtdmFsdWVzPVwiJyArICgkKGUuY3VycmVudFRhcmdldCkucHJvcCgnY2hlY2tlZCcpID8gMSA6IDApICsgJ1wiIC1rZXlGaWVsZHM9XCJpZFwiIC1rZXlWYWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2UtdmFsaWQnKSkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwyLmNsaWNrKChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblxuXHRcdFx0XHRcdFx0aWYoIWNvbmZpcm0oJ1BsZWFzZSBjb25maXJtLi4uJykpXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdFx0XHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdSZW1vdmVFbGVtZW50cyAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAta2V5RmllbGRzPVwiaWRcIiAta2V5VmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtZGVsZXRlLXVzZXInKSkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHQkKCcjRkNCRDZERkNfMjA2MV84Q0MzXzY1MkNfNzc2NzFBMTc5QUFDIHRyW2RhdGEtaWQ9XCInICsgJChlLmN1cnJlbnRUYXJnZXQpLmF0dHIoJ2RhdGEtZGVsZXRlLXVzZXInKSArICdcIl0nKS5yZW1vdmUoKTtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwzLm9uKCdzZWxlY3QyOnNlbGVjdCcsIChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnQWRkVXNlclJvbGUgLXVzZXI9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2Utcm9sZScpKSArICdcIiAtcm9sZT1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKGUucGFyYW1zLmRhdGEudGV4dCkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdH0pLmZhaWwoZnVuY3Rpb24oZGF0YSwgbWVzc2FnZSkge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWwzLm9uKCdzZWxlY3QyOnVuc2VsZWN0JywgKGUpID0+IHtcblxuXHRcdFx0XHRcdFx0YW1pV2ViQXBwLmxvY2soKTtcblxuXHRcdFx0XHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdSZW1vdmVVc2VyUm9sZSAtdXNlcj1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWNoYW5nZS1yb2xlJykpICsgJ1wiIC1yb2xlPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoZS5wYXJhbXMuZGF0YS50ZXh0KSArICdcIicpLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC51bmxvY2soKTtcblxuXHRcdFx0XHRcdFx0fSkuZmFpbChmdW5jdGlvbihkYXRhLCBtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRlbDQub24oJ2NsaWNrJywgKGUpID0+IHtcblxuXHRcdFx0XHRcdFx0Y29uc3QgY2xpZW50RE4gPSBwcm9tcHQoJ05ldyBjbGllbnQgRE4nLCAkKGUuY3VycmVudFRhcmdldCkuZmluZCgnLnZhbHVlJykudGV4dCgpKTtcblxuXHRcdFx0XHRcdFx0aWYoY2xpZW50RE4pXG5cdFx0XHRcdFx0XHR7XG5cdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdFx0YW1pQ29tbWFuZC5leGVjdXRlKCdVcGRhdGVFbGVtZW50cyAtY2F0YWxvZz1cInNlbGZcIiAtZW50aXR5PVwicm91dGVyX3VzZXJcIiAtc2VwYXJhdG9yPVwifFwiIC1maWVsZHM9XCJjbGllbnRETlwiIC12YWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZyhjbGllbnRETikgKyAnXCIgLWtleUZpZWxkcz1cImlkXCIgLWtleVZhbHVlcz1cIicgKyBhbWlXZWJBcHAudGV4dFRvU3RyaW5nKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKCdkYXRhLWNoYW5nZS1jbGllbnQtZG4nKSkgKyAnXCInKS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRcdCQodGhpcykuZmluZCgnLnZhbHVlJykudGV4dChjbGllbnRETik7XG5cblx0XHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHRcdFx0fSkuZmFpbChmdW5jdGlvbihkYXRhLCBtZXNzYWdlKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAuZXJyb3IobWVzc2FnZSwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0XHRcdFx0ZWw1Lm9uKCdjbGljaycsIChlKSA9PiB7XG5cblx0XHRcdFx0XHRcdGNvbnN0IGlzc3VlckROID0gcHJvbXB0KCdOZXcgaXNzdWVyIEROJywgJChlLmN1cnJlbnRUYXJnZXQpLmZpbmQoJy52YWx1ZScpLnRleHQoKSk7XG5cblx0XHRcdFx0XHRcdGlmKGlzc3VlckROKVxuXHRcdFx0XHRcdFx0e1xuXHRcdFx0XHRcdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnVXBkYXRlRWxlbWVudHMgLWNhdGFsb2c9XCJzZWxmXCIgLWVudGl0eT1cInJvdXRlcl91c2VyXCIgLXNlcGFyYXRvcj1cInxcIiAtZmllbGRzPVwiaXNzdWVyRE5cIiAtdmFsdWVzPVwiJyArIGFtaVdlYkFwcC50ZXh0VG9TdHJpbmcoaXNzdWVyRE4pICsgJ1wiIC1rZXlGaWVsZHM9XCJpZFwiIC1rZXlWYWx1ZXM9XCInICsgYW1pV2ViQXBwLnRleHRUb1N0cmluZygkKGUuY3VycmVudFRhcmdldCkuYXR0cignZGF0YS1jaGFuZ2UtaXNzdWVyLWRuJykpICsgJ1wiJykuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0XHRcdFx0XHQkKHRoaXMpLmZpbmQoJy52YWx1ZScpLnRleHQoaXNzdWVyRE4pO1xuXG5cdFx0XHRcdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXG5cdFx0XHRcdFx0XHRcdH0pLmZhaWwoKGRhdGEsIG1lc3NhZ2UpID0+IHtcblxuXHRcdFx0XHRcdFx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cblx0XHRcdFx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdFx0XHRcdH0pO1xuXG5cdFx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdFx0YW1pV2ViQXBwLmVycm9yKG1lc3NhZ2UsIHRydWUpO1xuXHRcdFx0fSk7XG5cblx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdGFtaVdlYkFwcC5lcnJvcihtZXNzYWdlLCB0cnVlKTtcblx0XHR9KTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuIl19
