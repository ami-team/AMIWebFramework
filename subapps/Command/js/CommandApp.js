/*!
 * AMI Twig Engine
 *
 * Copyright (c) 2014-2019 The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global saveAs
 *
 */$AMIClass("CommandApp",{$extends:ami.SubApp,onReady:function onReady(userdata){var _this=this;var result=$.Deferred();amiWebApp.loadResources(["subapps/Command/twig/CommandApp.twig","subapps/Command/twig/command.twig","subapps/Command/twig/result.twig","js/3rd-party/filesaver.min.js"]).done(function(data){amiWebApp.replaceHTML("#ami_main_content",data[0],{dict:{command:userdata}}).done(function(){_this.fragmentCommand=data[1];_this.fragmentResult=data[2];result.resolve()})}).fail(function(message){result.reject(message)});return result},onLogin:function onLogin(){return this.getCommands()},onLogout:function onLogout(){return this.getCommands()},getCommands:function getCommands(){var _this2=this;var result=$.Deferred();amiCommand.execute("ListCommands").done(function(data){var isAuthenticated=amiLogin.isAuthenticated();var rows=amiWebApp.jspath("..row",data);var dict=[];rows.forEach(function(row){var command=amiWebApp.jspath("..field{.@name===\"command\"}.$",row)[0]||"";var visible=(amiWebApp.jspath("..field{.@name===\"visible\"}.$",row)[0]||"true")!=="false";var secured=(amiWebApp.jspath("..field{.@name===\"secured\"}.$",row)[0]||"false")!=="false";var help=amiWebApp.jspath("..field{.@name===\"help\"}.$",row)[0]||"";var usage=amiWebApp.jspath("..field{.@name===\"usage\"}.$",row)[0]||"";if(visible&&isAuthenticated||amiLogin.hasRole("AMI_ADMIN")||command==="GetSessionInfo"||command==="ResetPassword"||command==="AddUser"){var proto;if(!usage){proto=command;help+="<br /><br />Usage:<br />"+command}else{proto=command+" "+usage;help+="<br /><br />Usage:<br />"+command+" "+usage}help=help.replace(new RegExp(command,"g"),"<strong>"+command+"</strong>");dict.push({command:command,secured:secured,help:help,proto:proto})}});amiWebApp.replaceHTML("#D847C44B_D28F_49B3_AF79_7A68B3305ED2",_this2.fragmentCommand,{dict:dict}).done(function(){result.resolve()})}).fail(function(data,message){result.reject(message)});return result},execute:function execute(command,converter){var _this3=this;command=command.trim();converter=converter.trim();if(command){amiWebApp.lock();amiCommand.execute(command,{converter:converter}).always(function(data,message,url){var dict={data:converter==="AMIXmlToJson.xsl"?JSON.stringify(data,undefined,2):data,url:url};amiWebApp.prependHTML("#AB4BA483_EE27_44D0_BB54_F5BFCFE4DA7E",_this3.fragmentResult,{dict:dict}).done(function(){amiWebApp.unlock()})})}},select:function select(command){$("#CE9A50CD_63CA_4A1E_B336_F45399BEC84D").val(command)},copy:function copy(text){amiWebApp.createControl(null,this,"textBox",[text],{})},save:function save(data){var converter=$("#C8D10895_E8A7_46A0_B638_C8DDDED8F91C").val().trim();var fileMime;var fileName;if(converter==="AMIXmlToXml.xsl"){fileMime="application/xml";fileName="result.xml"}else if(converter==="AMIXmlToJson.xsl"){fileMime="application/json";fileName="result.json"}else if(converter==="AMIXmlToCsv.xsl"){fileMime="text/csv";fileName="result.csv"}else{fileMime="text/plain";fileName="result.txt"}saveAs(new Blob([amiWebApp.htmlToText(data)],{type:fileMime}),fileName)}});var commandApp=new CommandApp;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1hbmRBcHAuZXM2LmpzIl0sIm5hbWVzIjpbIiRBTUlDbGFzcyIsIiRleHRlbmRzIiwiYW1pIiwiU3ViQXBwIiwib25SZWFkeSIsInVzZXJkYXRhIiwicmVzdWx0IiwiJCIsIkRlZmVycmVkIiwiYW1pV2ViQXBwIiwibG9hZFJlc291cmNlcyIsImRvbmUiLCJkYXRhIiwicmVwbGFjZUhUTUwiLCJkaWN0IiwiY29tbWFuZCIsImZyYWdtZW50Q29tbWFuZCIsImZyYWdtZW50UmVzdWx0IiwicmVzb2x2ZSIsImZhaWwiLCJtZXNzYWdlIiwicmVqZWN0Iiwib25Mb2dpbiIsImdldENvbW1hbmRzIiwib25Mb2dvdXQiLCJhbWlDb21tYW5kIiwiZXhlY3V0ZSIsImlzQXV0aGVudGljYXRlZCIsImFtaUxvZ2luIiwicm93cyIsImpzcGF0aCIsImZvckVhY2giLCJyb3ciLCJ2aXNpYmxlIiwic2VjdXJlZCIsImhlbHAiLCJ1c2FnZSIsImhhc1JvbGUiLCJwcm90byIsInJlcGxhY2UiLCJSZWdFeHAiLCJwdXNoIiwiY29udmVydGVyIiwidHJpbSIsImxvY2siLCJhbHdheXMiLCJ1cmwiLCJKU09OIiwic3RyaW5naWZ5IiwidW5kZWZpbmVkIiwicHJlcGVuZEhUTUwiLCJ1bmxvY2siLCJzZWxlY3QiLCJ2YWwiLCJjb3B5IiwidGV4dCIsImNyZWF0ZUNvbnRyb2wiLCJzYXZlIiwiZmlsZU1pbWUiLCJmaWxlTmFtZSIsInNhdmVBcyIsIkJsb2IiLCJodG1sVG9UZXh0IiwidHlwZSIsImNvbW1hbmRBcHAiLCJDb21tYW5kQXBwIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7R0FlQUEsU0FBUyxDQUFDLFlBQUQsQ0FBZSxDQUd2QkMsUUFBUSxDQUFFQyxHQUFHLENBQUNDLE1BSFMsQ0FPdkJDLE9BQU8sQ0FBRSxpQkFBU0MsUUFBVCxDQUNULGdCQUNDLEdBQU1DLENBQUFBLE1BQU0sQ0FBR0MsQ0FBQyxDQUFDQyxRQUFGLEVBQWYsQ0FFQUMsU0FBUyxDQUFDQyxh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LENBSkksSUFLQSxJQUFHakIsU0FBUyxHQUFLLGlCQUFqQixDQUNMLENBQ0NnQixRQUFRLENBQUcsVUFBWCxDQUNBQyxRQUFRLENBQUcsWUFDWCxDQUpJLElBTUwsQ0FDQ0QsUUFBUSxDQUFHLFlBQVgsQ0FDQUMsUUFBUSxDQUFHLFlBQ1gsQ0FJREMsTUFBTSxDQUFDLEdBQUlDLENBQUFBLElBQUosQ0FBUyxDQUFDcEQsU0FBUyxDQUFDcUQsVUFBVixDQUFxQmxELElBQXJCLENBQUQsQ0FBVCxDQUF1QyxDQUFDbUQsSUFBSSxDQUFFTCxRQUFQLENBQXZDLENBQUQsQ0FBMkRDLFFBQTNELENBR04sQ0FqTXNCLENBQWYsQ0FBVCxDQTBNQSxHQUFNSyxDQUFBQSxVQUFVLENBQUcsR0FBSUMsQ0FBQUEsVUFBdkIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFNSSBUd2lnIEVuZ2luZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE5IFRoZSBBTUkgVGVhbSAvIExQU0MgLyBJTjJQM1xuICpcbiAqIFRoaXMgZmlsZSBtdXN0IGJlIHVzZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBDZUNJTEwtQzpcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1lbi5odG1sXG4gKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZnIuaHRtbFxuICpcbiAqIEBnbG9iYWwgc2F2ZUFzXG4gKlxuICovXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4kQU1JQ2xhc3MoJ0NvbW1hbmRBcHAnLCB7XG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0JGV4dGVuZHM6IGFtaS5TdWJBcHAsXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRvblJlYWR5OiBmdW5jdGlvbih1c2VyZGF0YSlcblx0e1xuXHRcdGNvbnN0IHJlc3VsdCA9ICQuRGVmZXJyZWQoKTtcblxuXHRcdGFtaVdlYkFwcC5sb2FkUmVzb3VyY2VzKFtcblx0XHRcdCdzdWJhcHBzL0NvbW1hbmQvdHdpZy9Db21tYW5kQXBwLnR3aWcnLFxuXHRcdFx0J3N1YmFwcHMvQ29tbWFuZC90d2lnL2NvbW1hbmQudHdpZycsXG5cdFx0XHQnc3ViYXBwcy9Db21tYW5kL3R3aWcvcmVzdWx0LnR3aWcnLFxuXHRcdFx0J2pzLzNyZC1wYXJ0eS9maWxlc2F2ZXIubWluLmpzJyxcblx0XHRdKS5kb25lKChkYXRhKSA9PiB7XG5cblx0XHRcdGFtaVdlYkFwcC5yZXBsYWNlSFRNTCgnI2FtaV9tYWluX2NvbnRlbnQnLCBkYXRhWzBdLCB7ZGljdDoge2NvbW1hbmQ6IHVzZXJkYXRhfX0pLmRvbmUoKCkgPT4ge1xuXG5cdFx0XHRcdHRoaXMuZnJhZ21lbnRDb21tYW5kID0gZGF0YVsxXTtcblx0XHRcdFx0dGhpcy5mcmFnbWVudFJlc3VsdCA9IGRhdGFbMl07XG5cblx0XHRcdFx0cmVzdWx0LnJlc29sdmUoKTtcblx0XHRcdH0pO1xuXG5cdFx0fSkuZmFpbCgobWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRyZXN1bHQucmVqZWN0KG1lc3NhZ2UpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdG9uTG9naW46IGZ1bmN0aW9uKClcblx0e1xuXHRcdHJldHVybiB0aGlzLmdldENvbW1hbmRzKCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRvbkxvZ291dDogZnVuY3Rpb24oKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q29tbWFuZHMoKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGdldENvbW1hbmRzOiBmdW5jdGlvbigpXG5cdHtcblx0XHRjb25zdCByZXN1bHQgPSAkLkRlZmVycmVkKCk7XG5cblx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoJ0xpc3RDb21tYW5kcycpLmRvbmUoKGRhdGEpID0+IHtcblxuXHRcdFx0Y29uc3QgaXNBdXRoZW50aWNhdGVkID0gYW1pTG9naW4uaXNBdXRoZW50aWNhdGVkKCk7XG5cblx0XHRcdGNvbnN0IHJvd3MgPSBhbWlXZWJBcHAuanNwYXRoKCcuLnJvdycsIGRhdGEpO1xuXG5cdFx0XHRjb25zdCBkaWN0ID0gW107XG5cblx0XHRcdHJvd3MuZm9yRWFjaCgocm93KSA9PiB7XG5cblx0XHRcdFx0Y29uc3QgY29tbWFuZCA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJjb21tYW5kXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXG5cdFx0XHRcdGNvbnN0IHZpc2libGUgPSAoYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cInZpc2libGVcIn0uJCcsIHJvdylbMF0gfHwgJ3RydWUnKSAhPT0gJ2ZhbHNlJztcblx0XHRcdFx0Y29uc3Qgc2VjdXJlZCA9IChhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwic2VjdXJlZFwifS4kJywgcm93KVswXSB8fCAnZmFsc2UnKSAhPT0gJ2ZhbHNlJztcblxuXHRcdFx0XHRsZXQgaGVscCA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJoZWxwXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXHRcdFx0XHRjb25zdCB1c2FnZSA9IGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJ1c2FnZVwifS4kJywgcm93KVswXSB8fCAnJztcblxuXHRcdFx0XHRpZigodmlzaWJsZSAmJiBpc0F1dGhlbnRpY2F0ZWQpIHx8IGFtaUxvZ2luLmhhc1JvbGUoJ0FNSV9BRE1JTicpIHx8IGNvbW1hbmQgPT09ICdHZXRTZXNzaW9uSW5mbycgfHwgY29tbWFuZCA9PT0gJ1Jlc2V0UGFzc3dvcmQnIHx8IGNvbW1hbmQgPT09ICdBZGRVc2VyJylcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGxldCBwcm90bztcblxuXHRcdFx0XHRcdGlmKCF1c2FnZSkge1xuXHRcdFx0XHRcdFx0cHJvdG8gPSBjb21tYW5kO1xuXHRcdFx0XHRcdFx0aGVscCArPSAnPGJyIC8+PGJyIC8+VXNhZ2U6PGJyIC8+JyArIGNvbW1hbmQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHByb3RvID0gY29tbWFuZCArICcgJyArIHVzYWdlO1xuXHRcdFx0XHRcdFx0aGVscCArPSAnPGJyIC8+PGJyIC8+VXNhZ2U6PGJyIC8+JyArIGNvbW1hbmQgKyAnICcgKyB1c2FnZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRoZWxwID0gaGVscC5yZXBsYWNlKG5ldyBSZWdFeHAoY29tbWFuZCwgJ2cnKSwgJzxzdHJvbmc+JyArIGNvbW1hbmQgKyAnPC9zdHJvbmc+Jyk7XG5cblx0XHRcdFx0XHRkaWN0LnB1c2goe1xuXHRcdFx0XHRcdFx0Y29tbWFuZDogY29tbWFuZCxcblx0XHRcdFx0XHRcdHNlY3VyZWQ6IHNlY3VyZWQsXG5cdFx0XHRcdFx0XHRoZWxwOiBoZWxwLFxuXHRcdFx0XHRcdFx0cHJvdG86IHByb3RvLFxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0YW1pV2ViQXBwLnJlcGxhY2VIVE1MKCcjRDg0N0M0NEJfRDI4Rl80OUIzX0FGNzlfN0E2OEIzMzA1RUQyJywgdGhpcy5mcmFnbWVudENvbW1hbmQsIHtkaWN0OiBkaWN0fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0cmVzdWx0LnJlc29sdmUoKTtcblx0XHRcdH0pO1xuXG5cdFx0fSkuZmFpbCgoZGF0YSwgbWVzc2FnZSkgPT4ge1xuXG5cdFx0XHRyZXN1bHQucmVqZWN0KG1lc3NhZ2UpO1xuXHRcdH0pO1xuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGV4ZWN1dGU6IGZ1bmN0aW9uKGNvbW1hbmQsIGNvbnZlcnRlcilcblx0e1xuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGNvbW1hbmQgPSBjb21tYW5kLnRyaW0oKTtcblx0XHRjb252ZXJ0ZXIgPSBjb252ZXJ0ZXIudHJpbSgpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0aWYoY29tbWFuZClcblx0XHR7XG5cdFx0XHRhbWlXZWJBcHAubG9jaygpO1xuXG5cdFx0XHRhbWlDb21tYW5kLmV4ZWN1dGUoY29tbWFuZCwge2NvbnZlcnRlcjogY29udmVydGVyfSkuYWx3YXlzKChkYXRhLCBtZXNzYWdlLCB1cmwpID0+IHtcblxuXHRcdFx0XHRjb25zdCBkaWN0ID0ge1xuXHRcdFx0XHRcdGRhdGE6IChjb252ZXJ0ZXIgPT09ICdBTUlYbWxUb0pzb24ueHNsJykgPyBKU09OLnN0cmluZ2lmeShkYXRhLCB1bmRlZmluZWQsIDIpIDogZGF0YSxcblx0XHRcdFx0XHR1cmw6IHVybCxcblx0XHRcdFx0fTtcblxuXHRcdFx0XHRhbWlXZWJBcHAucHJlcGVuZEhUTUwoJyNBQjRCQTQ4M19FRTI3XzQ0RDBfQkI1NF9GNUJGQ0ZFNERBN0UnLCB0aGlzLmZyYWdtZW50UmVzdWx0LCB7ZGljdDogZGljdH0pLmRvbmUoZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRhbWlXZWJBcHAudW5sb2NrKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0fVxuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0c2VsZWN0OiBmdW5jdGlvbihjb21tYW5kKVxuXHR7XG5cdFx0JCgnI0NFOUE1MENEXzYzQ0FfNEExRV9CMzM2X0Y0NTM5OUJFQzg0RCcpLnZhbChjb21tYW5kKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdGNvcHk6IGZ1bmN0aW9uKHRleHQpXG5cdHtcblx0XHRhbWlXZWJBcHAuY3JlYXRlQ29udHJvbChudWxsLCB0aGlzLCAndGV4dEJveCcsIFt0ZXh0XSwge30pO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0c2F2ZTogZnVuY3Rpb24oZGF0YSlcblx0e1xuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRcdGNvbnN0IGNvbnZlcnRlciA9ICQoJyNDOEQxMDg5NV9FOEE3XzQ2QTBfQjYzOF9DOEREREVEOEY5MUMnKS52YWwoKS50cmltKCk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRsZXQgZmlsZU1pbWU7XG5cdFx0bGV0IGZpbGVOYW1lO1xuXG5cdFx0LyoqLyBpZihjb252ZXJ0ZXIgPT09ICdBTUlYbWxUb1htbC54c2wnKVxuXHRcdHtcblx0XHRcdGZpbGVNaW1lID0gJ2FwcGxpY2F0aW9uL3htbCc7XG5cdFx0XHRmaWxlTmFtZSA9ICdyZXN1bHQueG1sJztcblx0XHR9XG5cdFx0ZWxzZSBpZihjb252ZXJ0ZXIgPT09ICdBTUlYbWxUb0pzb24ueHNsJylcblx0XHR7XG5cdFx0XHRmaWxlTWltZSA9ICdhcHBsaWNhdGlvbi9qc29uJztcblx0XHRcdGZpbGVOYW1lID0gJ3Jlc3VsdC5qc29uJztcblx0XHR9XG5cdFx0ZWxzZSBpZihjb252ZXJ0ZXIgPT09ICdBTUlYbWxUb0Nzdi54c2wnKVxuXHRcdHtcblx0XHRcdGZpbGVNaW1lID0gJ3RleHQvY3N2Jztcblx0XHRcdGZpbGVOYW1lID0gJ3Jlc3VsdC5jc3YnO1xuXHRcdH1cblx0XHRlbHNlXG5cdFx0e1xuXHRcdFx0ZmlsZU1pbWUgPSAndGV4dC9wbGFpbic7XG5cdFx0XHRmaWxlTmFtZSA9ICdyZXN1bHQudHh0Jztcblx0XHR9XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRzYXZlQXMobmV3IEJsb2IoW2FtaVdlYkFwcC5odG1sVG9UZXh0KGRhdGEpXSwge3R5cGU6IGZpbGVNaW1lfSksIGZpbGVOYW1lKTtcblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xufSk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuLyogR0xPQkFMIElOU1RBTkNFICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICovXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuY29uc3QgY29tbWFuZEFwcCA9IG5ldyBDb21tYW5kQXBwKCk7XG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuIl19
