/*!
 * AMI Twig Engine
 *
 * Copyright (c) 2014-2019 The AMI Team / LPSC / IN2P3
 *
 * This file must be used under the terms of the CeCILL-C:
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-en.html
 * http://www.cecill.info/licences/Licence_CeCILL-C_V1-fr.html
 *
 * @global saveAs
 *
 */$AMIClass("CommandApp",{$extends:ami.SubApp,onReady:function onReady(userdata){var _this=this;var result=$.Deferred();amiWebApp.loadResources(["subapps/Command/twig/CommandApp.twig","subapps/Command/twig/command.twig","subapps/Command/twig/result.twig","js/3rd-party/filesaver.min.js","js/3rd-party/ace/ace.min.js"]).done(function(data){amiWebApp.replaceHTML("#ami_main_content",data[0],{dict:{command:userdata}}).done(function(){_this.fragmentCommand=data[1];_this.fragmentResult=data[2];result.resolve()})}).fail(function(message){result.reject(message)});return result},onLogin:function onLogin(){return this.getCommands()},onLogout:function onLogout(){return this.getCommands()},getCommands:function getCommands(){var _this2=this;var result=$.Deferred();amiCommand.execute("ListCommands").done(function(data){var isAuthenticated=amiLogin.isAuthenticated();var rows=amiWebApp.jspath("..row",data);var dict=[];rows.forEach(function(row){var command=amiWebApp.jspath("..field{.@name===\"command\"}.$",row)[0]||"";var visible=(amiWebApp.jspath("..field{.@name===\"visible\"}.$",row)[0]||"true")!=="false";var secured=(amiWebApp.jspath("..field{.@name===\"secured\"}.$",row)[0]||"false")!=="false";var help=amiWebApp.jspath("..field{.@name===\"help\"}.$",row)[0]||"";var usage=amiWebApp.jspath("..field{.@name===\"usage\"}.$",row)[0]||"";if(visible&&isAuthenticated||amiLogin.hasRole("AMI_ADMIN")||command==="GetSessionInfo"||command==="ResetPassword"||command==="AddUser"){var proto;if(!usage){proto=command;help+="<br /><br />Usage:<br />"+command}else{proto=command+" "+usage;help+="<br /><br />Usage:<br />"+command+" "+usage}help=help.replace(new RegExp(command,"g"),"<strong>"+command+"</strong>");dict.push({command:command,secured:secured,help:help,proto:proto})}});amiWebApp.replaceHTML("#D847C44B_D28F_49B3_AF79_7A68B3305ED2",_this2.fragmentCommand,{dict:dict}).done(function(){result.resolve()})}).fail(function(data,message){result.reject(message)});return result},execute:function execute(command,converter){var _this3=this;command=command.trim();converter=converter.trim();if(command){amiWebApp.lock();amiCommand.execute(command,{converter:converter}).always(function(data,message,url){var dict={data:converter==="AMIXmlToJson.xsl"?JSON.stringify(data,undefined,2):data,type:converter!=="AMIXmlToJson.xsl"?converter!=="AMIXmlToXml.xsl"?"text":"xml":"json",url:url};amiWebApp.prependHTML("#AB4BA483_EE27_44D0_BB54_F5BFCFE4DA7E",_this3.fragmentResult,{dict:dict}).done(function(){amiWebApp.unlock()})})}},select:function select(command){$("#CE9A50CD_63CA_4A1E_B336_F45399BEC84D").val(command)},copy:function copy(text){amiWebApp.createControl(null,this,"textBox",[text],{})},save:function save(data){var converter=$("#C8D10895_E8A7_46A0_B638_C8DDDED8F91C").val().trim();var fileMime;var fileName;if(converter==="AMIXmlToXml.xsl"){fileMime="application/xml";fileName="result.xml"}else if(converter==="AMIXmlToJson.xsl"){fileMime="application/json";fileName="result.json"}else if(converter==="AMIXmlToCsv.xsl"){fileMime="text/csv";fileName="result.csv"}else{fileMime="text/plain";fileName="result.txt"}saveAs(new Blob([amiWebApp.htmlToText(data)],{type:fileMime}),fileName)}});var commandApp=new CommandApp;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbW1hbmRBcHAuZXM2LmpzIl0sIm5hbWVzIjpbIiRBTUlDbGFzcyIsIiRleHRlbmRzIiwiYW1pIiwiU3ViQXBwIiwib25SZWFkeSIsInVzZXJkYXRhIiwicmVzdWx0IiwiJCIsIkRlZmVycmVkIiwiYW1pV2ViQXBwIiwibG9hZFJlc291cmNlcyIsImRvbmUiLCJkYXRhIiwicmVwbGFjZUhUTUwiLCJkaWN0IiwiY29tbWFuZCIsImZyYWdtZW50Q29tbWFuZCIsImZyYWdtZW50UmVzdWx0IiwicmVzb2x2ZSIsImZhaWwiLCJtZXNzYWdlIiwicmVqZWN0Iiwib25Mb2dpbiIsImdldENvbW1hbmRzIiwib25Mb2dvdXQiLCJhbWlDb21tYW5kIiwiZXhlY3V0ZSIsImlzQXV0aGVudGljYXRlZCIsImFtaUxvZ2luIiwicm93cyIsImpzcGF0aCIsImZvckVhY2giLCJyb3ciLCJ2aXNpYmxlIiwic2VjdXJlZCIsImhlbHAiLCJ1c2FnZSIsImhhc1JvbGUiLCJwcm90byIsInJlcGxhY2UiLCJSZWdFeHAiLCJwdXNoIiwiY29udmVydGVyIiwidHJpbSIsImxvY2siLCJhbHdheXMiLCJ1cmwiLCJKU09OIiwic3RyaW5naWZ5IiwidW5kZWZpbmVkIiwidHlwZSIsInByZXBlbmRIVE1MIiwidW5sb2NrIiwic2VsZWN0IiwidmFsIiwiY29weSIsInRleHQiLCJjcmVhdGVDb250cm9sIiwic2F2ZSIsImZpbGVNaW1lIiwiZmlsZU5hbWUiLCJzYXZlQXMiLCJCbG9iIiwiaHRtbFRvVGV4dCIsImNvbW1hbmRBcHAiLCJDb21tYW5kQXBwIl0sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7R0FlQUEsU0FBUyxDQUFDLFlBQUQsQ0FBZSxDQUd2QkMsUUFBUSxDQUFFQyxHQUFHLENBQUNDLE1BSFMsQ0FPdkJDLE9BQU8sQ0FBRSxpQkFBU0MsUUFBVCxDQUNULGdCQUNDLEdBQU1DLENBQUFBLE1BQU0sQ0FBR0MsQ0FBQyxDQUFDQyxRQUFGLEVBQWYsQ0FFQUMsU0FBUyxDQUFDQyxh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WCxDQUNBQyxRQUFRLENBQUcsWUFDWCxDQUpJLElBS0EsSUFBR2xCLFNBQVMsR0FBSyxrQkFBakIsQ0FDTCxDQUNDaUIsUUFBUSxDQUFHLGtCQUFYLENBQ0FDLFFBQVEsQ0FBRyxhQUNYLENBSkksSUFLQSxJQUFHbEIsU0FBUyxHQUFLLGlCQUFqQixDQUNMLENBQ0NpQixRQUFRLENBQUcsVUFBWCxDQUNBQyxRQUFRLENBQUcsWUFDWCxDQUpJLElBTUwsQ0FDQ0QsUUFBUSxDQUFHLFlBQVgsQ0FDQUMsUUFBUSxDQUFHLFlBQ1gsQ0FJREMsTUFBTSxDQUFDLEdBQUlDLENBQUFBLElBQUosQ0FBUyxDQUFDckQsU0FBUyxDQUFDc0QsVUFBVixDQUFxQm5ELElBQXJCLENBQUQsQ0FBVCxDQUF1QyxDQUFDc0MsSUFBSSxDQUFFUyxRQUFQLENBQXZDLENBQUQsQ0FBMkRDLFFBQTNELENBR04sQ0F2TXNCLENBQWYsQ0FBVCxDQWdOQSxHQUFNSSxDQUFBQSxVQUFVLENBQUcsR0FBSUMsQ0FBQUEsVUFBdkIiLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIEFNSSBUd2lnIEVuZ2luZVxuICpcbiAqIENvcHlyaWdodCAoYykgMjAxNC0yMDE5IFRoZSBBTUkgVGVhbSAvIExQU0MgLyBJTjJQM1xuICpcbiAqIFRoaXMgZmlsZSBtdXN0IGJlIHVzZWQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBDZUNJTEwtQzpcbiAqIGh0dHA6Ly93d3cuY2VjaWxsLmluZm8vbGljZW5jZXMvTGljZW5jZV9DZUNJTEwtQ19WMS1lbi5odG1sXG4gKiBodHRwOi8vd3d3LmNlY2lsbC5pbmZvL2xpY2VuY2VzL0xpY2VuY2VfQ2VDSUxMLUNfVjEtZnIuaHRtbFxuICpcbiAqIEBnbG9iYWwgc2F2ZUFzXG4gKlxuICovXG5cbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4kQU1JQ2xhc3MoJ0NvbW1hbmRBcHAnLCB7XG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0JGV4dGVuZHM6IGFtaS5TdWJBcHAsXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRvblJlYWR5OiBmdW5jdGlvbih1c2VyZGF0YSlcblx0e1xuXHRcdGNvbnN0IHJlc3VsdCA9ICQuRGVmZXJyZWQoKTtcblxuXHRcdGFtaVdlYkFwcC5sb2FkUmVzb3VyY2VzKFtcblx0XHRcdCdzdWJhcHBzL0NvbW1hbmQvdHdpZy9Db21tYW5kQXBwLnR3aWcnLFxuXHRcdFx0J3N1YmFwcHMvQ29tbWFuZC90d2lnL2NvbW1hbmQudHdpZycsXG5cdFx0XHQnc3ViYXBwcy9Db21tYW5kL3R3aWcvcmVzdWx0LnR3aWcnLFxuXHRcdFx0J2pzLzNyZC1wYXJ0eS9maWxlc2F2ZXIubWluLmpzJyxcblx0XHRcdCdqcy8zcmQtcGFydHkvYWNlL2FjZS5taW4uanMnLFxuXHRcdF0pLmRvbmUoKGRhdGEpID0+IHtcblxuXHRcdFx0YW1pV2ViQXBwLnJlcGxhY2VIVE1MKCcjYW1pX21haW5fY29udGVudCcsIGRhdGFbMF0sIHtkaWN0OiB7Y29tbWFuZDogdXNlcmRhdGF9fSkuZG9uZSgoKSA9PiB7XG5cblx0XHRcdFx0dGhpcy5mcmFnbWVudENvbW1hbmQgPSBkYXRhWzFdO1xuXHRcdFx0XHR0aGlzLmZyYWdtZW50UmVzdWx0ID0gZGF0YVsyXTtcblxuXHRcdFx0XHRyZXN1bHQucmVzb2x2ZSgpO1xuXHRcdFx0fSk7XG5cblx0XHR9KS5mYWlsKChtZXNzYWdlKSA9PiB7XG5cblx0XHRcdHJlc3VsdC5yZWplY3QobWVzc2FnZSk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0b25Mb2dpbjogZnVuY3Rpb24oKVxuXHR7XG5cdFx0cmV0dXJuIHRoaXMuZ2V0Q29tbWFuZHMoKTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdG9uTG9nb3V0OiBmdW5jdGlvbigpXG5cdHtcblx0XHRyZXR1cm4gdGhpcy5nZXRDb21tYW5kcygpO1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0Z2V0Q29tbWFuZHM6IGZ1bmN0aW9uKClcblx0e1xuXHRcdGNvbnN0IHJlc3VsdCA9ICQuRGVmZXJyZWQoKTtcblxuXHRcdGFtaUNvbW1hbmQuZXhlY3V0ZSgnTGlzdENvbW1hbmRzJykuZG9uZSgoZGF0YSkgPT4ge1xuXG5cdFx0XHRjb25zdCBpc0F1dGhlbnRpY2F0ZWQgPSBhbWlMb2dpbi5pc0F1dGhlbnRpY2F0ZWQoKTtcblxuXHRcdFx0Y29uc3Qgcm93cyA9IGFtaVdlYkFwcC5qc3BhdGgoJy4ucm93JywgZGF0YSk7XG5cblx0XHRcdGNvbnN0IGRpY3QgPSBbXTtcblxuXHRcdFx0cm93cy5mb3JFYWNoKChyb3cpID0+IHtcblxuXHRcdFx0XHRjb25zdCBjb21tYW5kID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImNvbW1hbmRcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cblx0XHRcdFx0Y29uc3QgdmlzaWJsZSA9IChhbWlXZWJBcHAuanNwYXRoKCcuLmZpZWxkey5AbmFtZT09PVwidmlzaWJsZVwifS4kJywgcm93KVswXSB8fCAndHJ1ZScpICE9PSAnZmFsc2UnO1xuXHRcdFx0XHRjb25zdCBzZWN1cmVkID0gKGFtaVdlYkFwcC5qc3BhdGgoJy4uZmllbGR7LkBuYW1lPT09XCJzZWN1cmVkXCJ9LiQnLCByb3cpWzBdIHx8ICdmYWxzZScpICE9PSAnZmFsc2UnO1xuXG5cdFx0XHRcdGxldCBoZWxwID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cImhlbHBcIn0uJCcsIHJvdylbMF0gfHwgJyc7XG5cdFx0XHRcdGNvbnN0IHVzYWdlID0gYW1pV2ViQXBwLmpzcGF0aCgnLi5maWVsZHsuQG5hbWU9PT1cInVzYWdlXCJ9LiQnLCByb3cpWzBdIHx8ICcnO1xuXG5cdFx0XHRcdGlmKCh2aXNpYmxlICYmIGlzQXV0aGVudGljYXRlZCkgfHwgYW1pTG9naW4uaGFzUm9sZSgnQU1JX0FETUlOJykgfHwgY29tbWFuZCA9PT0gJ0dldFNlc3Npb25JbmZvJyB8fCBjb21tYW5kID09PSAnUmVzZXRQYXNzd29yZCcgfHwgY29tbWFuZCA9PT0gJ0FkZFVzZXInKVxuXHRcdFx0XHR7XG5cdFx0XHRcdFx0bGV0IHByb3RvO1xuXG5cdFx0XHRcdFx0aWYoIXVzYWdlKSB7XG5cdFx0XHRcdFx0XHRwcm90byA9IGNvbW1hbmQ7XG5cdFx0XHRcdFx0XHRoZWxwICs9ICc8YnIgLz48YnIgLz5Vc2FnZTo8YnIgLz4nICsgY29tbWFuZDtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cHJvdG8gPSBjb21tYW5kICsgJyAnICsgdXNhZ2U7XG5cdFx0XHRcdFx0XHRoZWxwICs9ICc8YnIgLz48YnIgLz5Vc2FnZTo8YnIgLz4nICsgY29tbWFuZCArICcgJyArIHVzYWdlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGhlbHAgPSBoZWxwLnJlcGxhY2UobmV3IFJlZ0V4cChjb21tYW5kLCAnZycpLCAnPHN0cm9uZz4nICsgY29tbWFuZCArICc8L3N0cm9uZz4nKTtcblxuXHRcdFx0XHRcdGRpY3QucHVzaCh7XG5cdFx0XHRcdFx0XHRjb21tYW5kOiBjb21tYW5kLFxuXHRcdFx0XHRcdFx0c2VjdXJlZDogc2VjdXJlZCxcblx0XHRcdFx0XHRcdGhlbHA6IGhlbHAsXG5cdFx0XHRcdFx0XHRwcm90bzogcHJvdG8sXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRhbWlXZWJBcHAucmVwbGFjZUhUTUwoJyNEODQ3QzQ0Ql9EMjhGXzQ5QjNfQUY3OV83QTY4QjMzMDVFRDInLCB0aGlzLmZyYWdtZW50Q29tbWFuZCwge2RpY3Q6IGRpY3R9KS5kb25lKCgpID0+IHtcblxuXHRcdFx0XHRyZXN1bHQucmVzb2x2ZSgpO1xuXHRcdFx0fSk7XG5cblx0XHR9KS5mYWlsKChkYXRhLCBtZXNzYWdlKSA9PiB7XG5cblx0XHRcdHJlc3VsdC5yZWplY3QobWVzc2FnZSk7XG5cdFx0fSk7XG5cblx0XHRyZXR1cm4gcmVzdWx0O1xuXHR9LFxuXG5cdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0ZXhlY3V0ZTogZnVuY3Rpb24oY29tbWFuZCwgY29udmVydGVyKVxuXHR7XG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0Y29tbWFuZCA9IGNvbW1hbmQudHJpbSgpO1xuXHRcdGNvbnZlcnRlciA9IGNvbnZlcnRlci50cmltKCk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRpZihjb21tYW5kKVxuXHRcdHtcblx0XHRcdGFtaVdlYkFwcC5sb2NrKCk7XG5cblx0XHRcdGFtaUNvbW1hbmQuZXhlY3V0ZShjb21tYW5kLCB7Y29udmVydGVyOiBjb252ZXJ0ZXJ9KS5hbHdheXMoKGRhdGEsIG1lc3NhZ2UsIHVybCkgPT4ge1xuXG5cdFx0XHRcdGNvbnN0IGRpY3QgPSB7XG5cdFx0XHRcdFx0ZGF0YTogKGNvbnZlcnRlciA9PT0gJ0FNSVhtbFRvSnNvbi54c2wnKSA/IEpTT04uc3RyaW5naWZ5KGRhdGEsIHVuZGVmaW5lZCwgMikgOiBkYXRhLFxuXHRcdFx0XHRcdHR5cGU6IChjb252ZXJ0ZXIgIT09ICdBTUlYbWxUb0pzb24ueHNsJykgPyAoXG5cdFx0XHRcdFx0ICAgICAgICAgICAgKGNvbnZlcnRlciAhPT0gJ0FNSVhtbFRvWG1sLnhzbCcpID8gKFxuXHRcdFx0XHRcdCAgICAgICAgICAgICAgICAgICd0ZXh0J1xuXHRcdFx0XHRcdCAgICAgICAgICAgICkgOiAneG1sJ1xuXHRcdFx0XHRcdCAgICAgICkgOiAnanNvbicsXG5cdFx0XHRcdFx0dXJsOiB1cmwsXG5cdFx0XHRcdH07XG5cblx0XHRcdFx0YW1pV2ViQXBwLnByZXBlbmRIVE1MKCcjQUI0QkE0ODNfRUUyN180NEQwX0JCNTRfRjVCRkNGRTREQTdFJywgdGhpcy5mcmFnbWVudFJlc3VsdCwge2RpY3Q6IGRpY3R9KS5kb25lKGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0YW1pV2ViQXBwLnVubG9jaygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHNlbGVjdDogZnVuY3Rpb24oY29tbWFuZClcblx0e1xuXHRcdCQoJyNDRTlBNTBDRF82M0NBXzRBMUVfQjMzNl9GNDUzOTlCRUM4NEQnKS52YWwoY29tbWFuZCk7XG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuXHRjb3B5OiBmdW5jdGlvbih0ZXh0KVxuXHR7XG5cdFx0YW1pV2ViQXBwLmNyZWF0ZUNvbnRyb2wobnVsbCwgdGhpcywgJ3RleHRCb3gnLCBbdGV4dF0sIHt9KTtcblx0fSxcblxuXHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdHNhdmU6IGZ1bmN0aW9uKGRhdGEpXG5cdHtcblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cblx0XHRjb25zdCBjb252ZXJ0ZXIgPSAkKCcjQzhEMTA4OTVfRThBN180NkEwX0I2MzhfQzhERERFRDhGOTFDJykudmFsKCkudHJpbSgpO1xuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0bGV0IGZpbGVNaW1lO1xuXHRcdGxldCBmaWxlTmFtZTtcblxuXHRcdC8qKi8gaWYoY29udmVydGVyID09PSAnQU1JWG1sVG9YbWwueHNsJylcblx0XHR7XG5cdFx0XHRmaWxlTWltZSA9ICdhcHBsaWNhdGlvbi94bWwnO1xuXHRcdFx0ZmlsZU5hbWUgPSAncmVzdWx0LnhtbCc7XG5cdFx0fVxuXHRcdGVsc2UgaWYoY29udmVydGVyID09PSAnQU1JWG1sVG9Kc29uLnhzbCcpXG5cdFx0e1xuXHRcdFx0ZmlsZU1pbWUgPSAnYXBwbGljYXRpb24vanNvbic7XG5cdFx0XHRmaWxlTmFtZSA9ICdyZXN1bHQuanNvbic7XG5cdFx0fVxuXHRcdGVsc2UgaWYoY29udmVydGVyID09PSAnQU1JWG1sVG9Dc3YueHNsJylcblx0XHR7XG5cdFx0XHRmaWxlTWltZSA9ICd0ZXh0L2Nzdic7XG5cdFx0XHRmaWxlTmFtZSA9ICdyZXN1bHQuY3N2Jztcblx0XHR9XG5cdFx0ZWxzZVxuXHRcdHtcblx0XHRcdGZpbGVNaW1lID0gJ3RleHQvcGxhaW4nO1xuXHRcdFx0ZmlsZU5hbWUgPSAncmVzdWx0LnR4dCc7XG5cdFx0fVxuXG5cdFx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG5cdFx0c2F2ZUFzKG5ldyBCbG9iKFthbWlXZWJBcHAuaHRtbFRvVGV4dChkYXRhKV0sIHt0eXBlOiBmaWxlTWltZX0pLCBmaWxlTmFtZSk7XG5cblx0XHQvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cdH0sXG5cblx0LyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbn0pO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbi8qIEdMT0JBTCBJTlNUQU5DRSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xuLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbmNvbnN0IGNvbW1hbmRBcHAgPSBuZXcgQ29tbWFuZEFwcCgpO1xuXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cbiJdfQ==
