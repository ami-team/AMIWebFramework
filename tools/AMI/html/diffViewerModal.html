<script type="text/javascript">
/*-------------------------------------------------------------------------*/
/* DIFF_MATCH_PATCH                                                        */
/*-------------------------------------------------------------------------*/

amiWebApp.loadScripts([
	'tools/common/js/diff_match_patch.min.js',
]);

/*-------------------------------------------------------------------------*/
/* CLASS AMIDiffViewer                                                     */
/*-------------------------------------------------------------------------*/

function AMIDiffViewer() {
	/*-----------------------------------------------------------------*/

	this.dmp = new diff_match_patch();

	/*-----------------------------------------------------------------*/

	this.show = function(code1, code3) {
		/*---------------------------------------------------------*/

		var d = this.dmp.diff_main(code1, code3);

		this.dmp.diff_cleanupEfficiency(d);

		var code2 = this.dmp.diff_prettyHtml(d);

		/*---------------------------------------------------------*/

		var data1 = '';

		var lines1 = code1.split('\n');

		for(var i = 0; i < lines1.length; i++) {

			data1 += '<code>' + lines1[i] + '</code>\n';
		}

		$('#modal_common_diff_viewer .code1').html(data1);

		/*---------------------------------------------------------*/

		var data2 = '';

		var lines2 = code2.split('\n');

		for(var i = 0; i < lines2.length; i++) {

			data2 += '<code>' + lines2[i] + '</code>\n';
		}

		$('#modal_common_diff_viewer .code2').html(data2);

		/*---------------------------------------------------------*/

		var data3 = '';

		var lines3 = code3.split('\n');

		for(var i = 0; i < lines3.length; i++) {

			data3 += '<code>' + lines3[i] + '</code>\n';
		}

		$('#modal_common_diff_viewer .code3').html(data3);

		/*---------------------------------------------------------*/

		$('#modal_common_diff_viewer').modal('show');

		/*---------------------------------------------------------*/
	};

	/*-----------------------------------------------------------------*/
}

/*-------------------------------------------------------------------------*/

amiDiffViewer = new AMIDiffViewer();

/*-------------------------------------------------------------------------*/
</script>

<div class="modal fade" id="modal_common_diff_viewer">
  <div class="modal-dialog" style="width: 96%;">
    <div class="modal-content">
      <div class="modal-header">
        <button class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
        <h4 class="modal-title"><i class="fa fa-file-text-o"></i> Diff Viewer</h4>
      </div>
      <div class="modal-body">

        <div class="row">

          <div class="col-md-4 text-center"><kbd>original</kbd></div>

          <div class="col-md-4 text-center"><kbd>difference</kbd></div>

          <div class="col-md-4 text-center"><kbd>changed</kbd></div>

        </div>

        <div class="row">

          <div class="col-md-4">
            <pre class="amicode code1"></pre>
          </div>

          <div class="col-md-4">
            <pre class="amicode code2"></pre>
          </div>

          <div class="col-md-4">
            <pre class="amicode code3"></pre>
          </div>

        </div>

      </div>
    </div>
  </div>
</div>
